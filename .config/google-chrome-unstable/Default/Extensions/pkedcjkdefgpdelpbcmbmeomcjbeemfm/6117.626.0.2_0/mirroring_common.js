'use strict';var ge;p("mr.IssueSeverity",{Jn:"fatal",nr:"warning",qp:"notification"});p("mr.IssueAction",{An:"dismiss",Jo:"learn_more"});var he=function(a,b){this.routeId=null;this.severity=b;this.isBlocking="fatal"==this.severity?!0:!1;this.title=a;this.message=null;this.defaultAction="dismiss";this.helpPageId=this.secondaryActions=null},je=function(){var a=new he(ie,"notification");a.helpPageId=6320939;a.defaultAction="learn_more";a.secondaryActions=["dismiss"];return a};var ke=function(a,b){var c=this;this.b=void 0===b?null:b;this.a=new Promise(function(b,e){var d=function(a){c.b=null;e(a)};c.f=d;a(function(a){c.b=null;b(a)},d)})};ke.prototype.cancel=function(a){this.f(a);if(this.b){var b=this.b;this.b=null;setTimeout(function(){return b(a)},0)}};var le=function(a,b,c){c=void 0===c?null:c;return new ke(function(d,e){a.a.then(function(a){if(b)try{d(b(a))}catch(g){e(g)}else d(a)},function(a){if(c)try{d(c(a))}catch(g){e(g)}else e(a)})},function(b){a.cancel(b)})};
ke.prototype.then=function(a,b){return le(this,a,void 0===b?null:b)};var me=function(a,b){return le(a,null,b)},ne=function(a){return new ke(function(b){b(a)})},oe=function(a){return new ke(function(b,c){c(a)})},pe=function(a){return new ke(function(b,c){a.then(b,c)})},qe=function(a,b){var c=!1,d=null;return new ke(function(e,f){a.then(function(a){c||(d=b(a),d.a.then(e,f))},f)},function(a){d?d.cancel(a):c=!0})};var re=function(){var a=ka(navigator.userAgent.match(/Windows NT (\d+.\d+)/)||[]);a.next();a=a.next().value;return 6.2<=parseFloat(a)},se=function(){var a=navigator.userAgent;return a.includes("CrOS")?"ChromeOS":a.includes("Windows")?"Windows":a.includes("Macintosh")?"Mac":a.includes("Linux")?"Linux":"Other"};var te=!("undefined"==typeof chrome||!chrome.networkingPrivate||!chrome.networkingPrivate.setWifiTDLSEnabledState||"ChromeOS"!=se()),ue=["ChromeOS","Windows"].includes(se());var ve=function(a,b,c,d){this.b=a;this.a=b;this.f=c||null;this.g=d||null},ye=function(a,b){if("tab"==a.b)a=we(a);else if("offscreen_tab"==a.b)b=we(a),b.presentationId=a.g,a=b;else{var c={audio:!1,video:!1};a.a.shouldCaptureVideo&&(c.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:b}},xe(a,c.video.mandatory));ue&&a.a.shouldCaptureAudio&&(c.audio={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:b}});a=c}return a},we=function(a){var b={audio:a.a.shouldCaptureAudio,video:a.a.shouldCaptureVideo};
a.a.shouldCaptureVideo&&(b.videoConstraints={mandatory:{enableAutoThrottling:!0}},xe(a,b.videoConstraints.mandatory));return b},xe=function(a,b){var c=a.a.minWidth,d=a.a.minHeight;if(a.a.senderSideLetterboxing){c=a.a;if(0==c.minHeight||0==c.maxHeight?0:Math.floor(100*c.minWidth/c.minHeight)==Math.floor(100*c.maxWidth/c.maxHeight))c={width:c.minWidth,height:c.minHeight};else{for(var d=c.maxWidth,e=c.maxHeight;0!=e;)var f=d%e,d=e,e=f;e=c.maxWidth/d;d=c.maxHeight/d;if(e<c.minWidth||d<c.minHeight)if(f=
Math.max(c.minWidth/e,c.minHeight/d),e*=f,d*=f,e>c.maxWidth||d>c.maxHeight)e=c.maxWidth,d=c.maxHeight;e=Math.round(e);d=Math.round(d);c={width:e,height:d}}d=c;c=d.width;d=d.height}Object.assign(b,{minWidth:c,minHeight:d,maxWidth:a.a.maxWidth,maxHeight:a.a.maxHeight,minFrameRate:a.a.minFrameRate,maxFrameRate:a.a.maxFrameRate})};var ze={Zm:0,Xm:1,bn:2,Ym:3,Em:4,an:5,ko:6,Tq:7,un:8,ug:9},Ae=function(a,b){a=Error.call(this,a);this.message=a.message;"stack"in a&&(this.stack=a.stack);this.reason=0<=b&&9>=b?b:9};la(Ae,Error);var Be=function(a){this.b=a;this.a=this.bd=null;this.l=Ja("mr.mirror.MirrorMediaStream")};Be.prototype.start=function(){return"tab"==this.b.b?Ce(this):"offscreen_tab"==this.b.b?De(this):Ee(this)};var Ce=function(a){var b=ye(a.b);u(a.l,"Starting tab capture with constraints "+JSON.stringify(b));return new Promise(function(c,d){chrome.tabCapture.capture(b,function(b){b?(Fe(a,b),c(a)):d(Ge())});window.setTimeout(function(){d(new Ae("chrome.tabCapture.capture failed to call its callback",2))},5E3)})};
Be.prototype.f=function(a){a&&u(this.l,function(){return"Track "+JSON.stringify(a.target)+" ended"});this.stop()};
var Ge=function(){return chrome.runtime.lastError&&chrome.runtime.lastError.message?new Ae(chrome.runtime.lastError.message,7):new Ae("empty_stream",0)},Ee=function(a){return(new Promise(function(a,c){var b=["screen","audio"];"Linux"==se()&&b.push("window");var e=chrome.desktopCapture.chooseDesktopMedia(b,a);window.setTimeout(function(){chrome.desktopCapture.cancelChooseDesktopMedia(e);c(new Ae("timeout",1))},6E4)})).then(function(b){if(!b)throw new Ae("User cancelled capture dialog",3);var c=ye(a.b,
b);u(a.l,function(){return"Starting desktop capture with constraints "+JSON.stringify(c)});return new Promise(function(a,b){navigator.webkitGetUserMedia(c,a,function(a){var c=8;if("PermissionDeniedError"==a.name||"NotAllowedError"==a.name)c=3;b(new Ae(a.name+" "+a.constraintName+": "+a.message,c))})})}).then(function(b){if(b)Fe(a,b);else throw new Ae("empty_stream",8);return a})},De=function(a){var b=ye(a.b);u(a.l,function(){return"Starting offscreen tab capture with constraints "+JSON.stringify(b)});
return new Promise(function(c,d){chrome.tabCapture.captureOffscreenTab(a.b.f.toString(),b,function(b){b?(Fe(a,b),c(a)):d(Ge())})})},Fe=function(a,b){a.a=b;b.getAudioTracks().length||b.getVideoTracks();b.getTracks().forEach(function(b){b.onended=a.f.bind(a)})};Be.prototype.stop=function(){this.a&&(this.a.getTracks().forEach(function(a){a.onended=null;a.stop()}),this.a=null,this.bd&&this.bd())};var He,Ie={Ro:0,cn:1,dn:2,wn:3,xn:4,Qn:5,lo:6,Po:7,hp:8,jp:9,bq:10,Aq:11,Bq:12,Iq:13,Sq:14},Je=function(a){void 0==He&&(cb("MediaRouter.Provider.WakeEvent",a,Ie),He=a)};var Me=function(a){return Ke(a)||Le(a)},Ne=function(a){if(!a.startsWith("http:")&&!a.startsWith("https:"))return!1;var b=document.createElement("a");b.href=a;return"http:"!=b.protocol&&"https:"!=b.protocol?!1:-1==b.hash.indexOf("__castAppId__")},Oe=["https://docs.google.com"],Ke=function(a){return a.startsWith("urn:x-org.chromium.media:source:tab:")||-1!=a.indexOf("0F5096E8")},Le=function(a){return"urn:x-org.chromium.media:source:desktop"==a};var Pe=function(a){return(new Promise(function(b){chrome.tabs.get(a,b)})).then(function(b){if(!b)throw Error("No such tab "+a);return b})};var Qe=function(){},Ue=function(a){var b=Re.get(a)||null;if(b)return Promise.resolve(b);b=Se.get(a);b||(b=new eb,Se.set(a,b),Te(a,b));return b.a},Te=function(a,b){var c=Ve.get(a)||null;if(!c)b.reject(Error("No corresponding bundle for "+a));else if(!We.has(c)){var d=Xe.get(c);d||(u(Ye,"Loading bundle "+c+" for module "+a),d=Ze(c),Xe.set(c,d));d.catch(function(a){b.reject(a)})}},Ze=function(a){var b=new eb;b.a.then(function(){u(Ye,"Bundle "+a+" loaded")},function(b){Ye.error("Failed to load bundle "+
a);throw b;});var c=document.createElement("script");c.src=chrome.extension.getURL(a);c.setAttribute("type","text/javascript");c.async=!0;c.onload=function(){return b.resolve(void 0)};c.onerror=function(){return b.reject(Error("Failed to load bundle "+a))};document.head.appendChild(c);return b.a},$e=function(a,b){if(Re.has(a))throw Error("Duplicate module "+a);Re.set(a,b);(a=Se.get(a))&&a.resolve(b)};
Qe.prototype.handleEvent=function(a,b){for(var c=1;c<arguments.length;++c);throw Error("Not implemented");};
var Ve=new Map([["mr.cast.ChannelService","background_script.js"],["mr.cast.SinkDiscoveryService","background_script.js"],["mr.mirror.cast.Service","mirroring_cast_streaming.js"],["mr.cloud.discovery.CloudSinkDiscoveryService","background_script.js"],["mr.dial.SinkDiscoveryService","background_script.js"],["mr.mirror.hangouts.HangoutsService","mirroring_hangouts.js"],["mr.mirror.hangouts.MeetingsService","mirroring_hangouts.js"],["mr.ProviderManager","background_script.js"],["mr.mirror.webrtc.WebRtcService",
"mirroring_webrtc.js"]]),We=new Set(["background_script.js"]),Ye=Ja("mr.Module"),Re=new Map,Se=new Map,Xe=new Map;var af=chrome.i18n.getMessage("545449835455981095");var bf=function(a,b){this.G=a;this.h=b||null;this.b=this.a=null;this.F=Ja("mr.mirror.Service."+a);this.s=this.T.bind(this);this.g=!1};la(bf,Qe);bf.prototype.Ha=function(a){this.g||(this.h=a,this.g=!0,this.me())};bf.prototype.me=function(){};bf.prototype.getName=function(){return this.G};
var gf=function(a,b,c,d,e,f){u(a.F,"Start mirroring on route "+b.id);return a.g?pe(cf(c,b.pb.tabId).then(function(){return df(a)}).then(function(){var a=ef(c,d,e);return(new Be(a)).start()}).then(function(c){if(a.b)throw c.stop(),new Ae("Cannot start multiple streams");a.b=c;c=a.j.bind(a);a.b.bd=c;return f?f(b).a:b}).then(function(b){if(a.a)throw new Ae("Cannot start multiple sessions");if(!a.b)throw new Ae("Media stream ended before session could start.");a.a=a.le(d,b);return a.a.start(a.b.a)}).then(function(){Ke(c)&&
!chrome.tabs.onUpdated.hasListener(a.s)&&chrome.tabs.onUpdated.addListener(a.s);return a.A(b,c,d)}).then(null,function(b){ff(a,b);return a.j().then(function(){throw b;})})):oe(Error("Not initialized"))},cf=function(a,b){return Ke(a)?b?Pe(b).then(function(a){if(!a.active)throw new Ae("Tab to be mirrored is not active",7);}):Promise.reject(new Ae("BUG: Tab ID is required.")):Promise.resolve()};
bf.prototype.J=function(a,b,c,d,e){var f=this;if(!this.a)return Promise.reject(new Ae("No session to update streams on",7));if(!this.a.di())return Promise.reject(new Ae("Session does not support updating stream",7));var g=!1;return Promise.resolve().then(function(){var a=ef(b,c,d);return(new Be(a)).start()}).then(function(b){f.b&&(f.b.bd=null,f.b.stop(),f.Od());f.b=b;b=f.j.bind(f);f.b.bd=b;g=!0;return e?e(a).a:a}).then(function(){if(!f.a)throw new Ae("Session ended while updating stream");if(!f.b)throw new Ae("Media stream ended before session could be updated.");
f.a.uf();return f.a.ii(f.b.a)}).then(this.A.bind(this,a,b,c)).then(null,function(a){ff(f,a);if(g)return f.j().then(function(){throw a;});throw a;})};
bf.prototype.A=function(a,b,c){var d=this;return new Promise(function(e,f){if(d.a)if(Ke(b))hf(d.a,a.pb.tabId).then(function(){jf(d.a);d.Je();e(d.a.Eb())},function(a){d.F.error("Failed to obtain initial tab info.",a);f(a)});else{if(Ne(b)){var g="Capturing "+a.mediaSource;kf(d.a,g,g,null);jf(d.a);d.Jf()}else kf(d.a,"Capturing Desktop","Capturing Desktop",null),jf(d.a),d.Ge();lf(d,c,d.b);e(d.a.Eb())}else f(new Ae("Session gone before executing post-startup steps",7))})};
var ff=function(a,b){b.reason=null!=b.reason?b.reason:9;a.F.error("Failed to start mirroring: "+b.message+(",  reason = "+b.reason+": "+b.stack));a.Ie(b.reason)},df=function(a){return a.g?a.j().then(function(b){b&&a.He();return b}):Promise.reject("Not initialized")};
bf.prototype.j=function(){var a=this;chrome.tabs.onUpdated.removeListener(this.s);var b=this.b;this.b=null;b&&(b.bd=null);var c=this.a;this.a=null;var d;c?d=this.af(c).catch(function(b){return a.F.error("Error in before-cleanup steps",b)}).then(function(){return c.stop()}).catch(function(b){return a.F.error("Error stopping session",b)}).then(function(){a.h.vf(c.Eb().id)}).catch(function(b){return a.F.error("Error in ended callbacks",b)}).then(function(){return!0}):d=Promise.resolve(!1);b&&(d=d.then(function(c){b.stop();
a.Od();return c}));return d};bf.prototype.af=function(){return Promise.resolve()};bf.prototype.T=function(a,b,c){Je(14);this.a&&this.a.tabId&&this.a.tabId==a&&("complete"==b.status||b.favIconUrl&&"complete"==c.status)&&(this.a.ji(c),this.h.sh(this.a.Eb()),jf(this.a))};
var ef=function(a,b,c){if(Ke(a))return new ve("tab",b);if(Le(a))return new ve("desktop",b);if(Ne(a)){if(!c)throw new Ae("Missing offscreen tab presentation id");return new ve("offscreen_tab",b,a,c)}throw new Ae("Source URN does not suggest a known capture type.");},lf=function(a,b,c){b.shouldCaptureAudio&&c.a&&!c.a.getAudioTracks().length&&a.h.oc(new he(af,"notification"))};h=bf.prototype;h.le=function(){};h.Je=function(){};h.Ge=function(){};h.Jf=function(){};h.He=function(){};h.Ie=function(){};
h.Od=function(){};h.tf=function(){return Ga()};h.createMediaRouteController=function(){return Ga()};var mf=function(a){this.g=a;this.v=!1;this.tabId=this.B=this.iconUrl=null},kf=function(a,b,c,d){a.g.description=b;a.v||a.g.offTheRecord?(a.B=null,a.iconUrl=null):(a.B=c,a.iconUrl=d);a.uf()},jf=function(a){a.v||a.g.offTheRecord||a.Qh()},hf=function(a,b){a.tabId=b;return Pe(b).then(a.ji.bind(a))};h=mf.prototype;h.ji=function(a){this.v=a.incognito;var b=new URL(a.url);kf(this,a.title,"file:"==b.protocol?"Local content (Tab)":b.hostname+" (Tab)",a.favIconUrl)};h.Eb=function(){return this.g};h.start=function(){};
h.di=function(){return!1};h.ii=function(){};h.stop=function(){return Promise.resolve()};h.Qh=function(){};h.uf=function(){};var qf=function(){var a=this;this.maxWidth=1920;this.maxHeight=1080;this.minHeight=this.minWidth=180;this.senderSideLetterboxing=!1;this.minFrameRate=0;this.maxFrameRate=30;this.minVideoBitrate=300;this.maxVideoBitrate=5E3;this.audioBitrate=0;this.maxLatencyMillis=800;this.animatedLatencyMillis=this.minLatencyMillis=400;this.dscpEnabled=["Mac","Linux","ChromeOS"].includes(se())||re();this.enableLogging=!0;this.useTdls=!1;this.shouldCaptureAudio=this.shouldCaptureVideo=!0;var b=window.localStorage?
window.localStorage.getItem(nf):null;if(b)try{var c=JSON.parse(String(b));if(c instanceof Object)of(this,c),t(Ja("mr.mirror.Settings"),function(){return"Initial mr.mirror.Settings overridden to: "+pf(a)});else throw Error("localStorage["+nf+"] "+("does not parse as an Object: "+b));}catch(d){throw Ja("mr.mirror.Settings").error(nf+' must be of the form \'{"maxWidth":640, "maxHeight":360}\'.',d),Error("Overrides not parseable.  See ERROR log for details.");}};
qf.prototype.clone=function(){var a=new qf;of(a,this);return a};
var pf=function(a){return JSON.stringify(a,function(a,c){if(0==a.length||!a.endsWith("_"))return c})},of=function(a,b){for(var c=ka(Object.keys(b)),d=c.next();!d.done;d=c.next())d=d.value,d.endsWith("_")||typeof b[d]!==typeof a[d]||(a[d]=b[d])},rf=function(a){var b=screen.width,c=screen.height;a.maxHeight*b<a.maxWidth*c?(b=Math.min(a.maxWidth,b),b-=b%160,c=90*b/160):(c=Math.min(a.maxHeight,c),c-=c%90,b=160*c/90);if(b<Math.max(160,a.minWidth)||c<Math.max(90,a.minHeight))b=Math.max(160,a.minWidth),
c=Math.max(90,a.minHeight);a.maxWidth=b;a.maxHeight=c},nf="mr.mirror.Settings.Overrides";var sf=function(a,b){this.type=a;this.data=b},tf=function(a){a=JSON.parse(a);if(!a.type)throw Error("Invalid message");return new sf(a.type,a.data)},uf=function(a,b,c,d){this.description=a;this.settings=b||null;this.mediaConstraints=c||null;this.presentationUrl=d||null};var xf=function(a,b){this.l=Ja("cv2.PeerConnection");this.T=vf;this.a=wf(this,b);this.j=this.a.createDataChannel(a,{reliable:!1});this.B=new eb;this.u=!1;this.g=0;this.f=null;this.w=this.h=0;this.b=!1;this.A=function(){};this.m=function(){};this.v=function(){};this.s=function(){}},yf=function(a,b){a.m=b},zf=function(a,b){a.v=b},Af=function(a,b){a.s=b},Bf=function(a,b){a.A=b},Cf=function(a,b){a.j.onmessage=function(a){b(a.data)}},Df=function(a){var b={};b.iceServers=[{url:"stun:stun.l.google.com:19302"}].concat(a);
return b},wf=function(a,b){var c=Df(b);b=new webkitRTCPeerConnection(c);b.onicecandidate=a.G.bind(a);b.a=a.K.bind(a);b.oniceconnectionstatechange=a.H.bind(a);u(a.l,function(){return"Created webkitRTCPeerConnnection with config: "+JSON.stringify(c)});return b};xf.prototype.start=function(){this.b||(this.b=!0,Ef(this))};xf.prototype.stop=function(){u(this.l,"Stopping peer connection...");this.b&&(this.b=!1,"closed"!=this.a.signalingState&&this.a.close());this.a=null};
var Ef=function(a){u(a.l,"Sending offer to peer.");a.h=Date.now();a.a.createOffer(a.J.bind(a),function(b){t(a.l,"Error creating offer.",b)},a.T);a.B.a.then(function(b){a.A(b)})};xf.prototype.J=function(a){var b=this;u(this.l,function(){return"Setting local description: "+JSON.stringify(a)});this.a.setLocalDescription(a,function(){u(b.l,"Local description set successfully")},function(a){t(b.l,"Error setting local description.",a)})};
var Ff=function(a,b){v(a.l,function(){return"<===: "+JSON.stringify(b)});var c=new RTCSessionDescription(b);u(a.l,function(){return"Setting remote description: "+JSON.stringify(c)});a.a.setRemoteDescription(c,function(){u(a.l,"Remote description set successfully.")},function(b){t(a.l,"Error setting remote description.",b)})};
xf.prototype.G=function(a){var b=this;a.candidate?(this.g++,this.w=Date.now(),1==this.g?this.f=setTimeout(function(){u(b.l,"ICE candidate gathering timed out.");b.f=null;Gf(b)},5E3):this.u&&t(this.l,"Received ICE candidate after resolving session description.")):(u(this.l,"End of ICE candidates."),Ua("MediaRouter.WebRtc.IceCandidateGathering.Duration.Reported",Date.now()-this.h),Gf(this),0<this.g&&Ua("MediaRouter.WebRtc.IceCandidateGathering.Duration.Real",this.w-this.h))};
xf.prototype.K=function(){"completed"==this.a.iceGatheringState&&Gf(this)};var Gf=function(a){clearTimeout(a.f);a.f=null;if(!a.u){u(a.l,"Resolving sesion description after gathering "+a.g+" ICE candidates.");var b=a.a.localDescription;a.B.resolve({type:b.type,sdp:b.sdp});a.u=!0}};
xf.prototype.H=function(a){var b=this;if(this.a){var c=this.a.iceConnectionState;u(this.l,"New ICE connection state: "+c+".");"connected"==c?this.m("iceconnected"):"completed"==c?this.m("icecompleted"):"failed"==c?(t(this.l,function(){return"Ice connection failed: "+JSON.stringify(a)}),this.v("icefailed")):"closed"==c?this.s("iceclosed"):"disconnected"==c&&(t(this.l,"Ice connection state is bad."),this.b&&(u(this.l,"Restarting ICE."),this.a.createOffer(this.J.bind(this),function(a){t(b.l,"Error creating new offer.",
a)},Hf)))}};var vf={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},Hf={mandatory:{IceRestart:!0,OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}};var If=window.localStorage,Jf=0,Lf=function(a){return(a=window.localStorage.getItem(Kf(a,!1)))?JSON.parse(a):null},Mf=function(a){return(a=window.localStorage.getItem(Kf(a,!0)))?JSON.parse(a):null},Of=function(a){if(Nf.has(a.ea()))throw Error("Duplicate instance name "+a.ea());Nf.set(a.ea(),a);a.wa()},Uf=function(a){for(var b=0,c=ka(Object.keys(If)),d=c.next();!d.done;d=c.next()){var d=d.value,e=d.length+window.localStorage.getItem(d).length;d.startsWith("mr.")?Jf+=e:b+=e}Pf=a;(window.localStorage.getItem("version")&&
window.localStorage.getItem("version")!==chrome.runtime.getManifest().version||Qf(a))&&Rf();u(Sf,"initialize: "+Jf+" chars used, "+b+" other chars");chrome.runtime.onSuspend.addListener(Tf)},Pf=null,Sf=Ja("mr.PersistentDataManager"),Nf=new Map,Kf=function(a,b){return"mr."+(b?"persistent.":"temp.")+a.ea()},Qf=function(a){return!!window.localStorage.getItem("mrInstanceId")&&window.localStorage.getItem("mrInstanceId")!==a},Tf=function(){u(Sf,"onSuspend");Vf("version",chrome.runtime.getManifest().version);
Pf&&Vf("mrInstanceId",Pf);Nf.forEach(Wf)},Wf=function(a){var b=a.ta();b&&void 0!=b[0]&&Vf(Kf(a,!1),JSON.stringify(b[0]));b&&void 0!=b[1]&&Vf(Kf(a,!0),JSON.stringify(b[1]))},Vf=function(a,b){var c=window.localStorage.getItem(a);c=null!=c?b.length-c.length:a.length+b.length;52E5<Jf+c&&(t(Sf,"Unable to write "+c+" chars"),Rf());if(52E5<Jf+c)throw Sf.error("Unable to write "+c+" chars after clearing temporary"),Error("Setting the value of '"+a+"' would exceed the quota, according to accounting.");try{window.localStorage.setItem(a,
b)}catch(d){throw Error("Setting the value of '"+a+"' would exceed the quota, according to the browser.");}Jf+=c},Xf=function(a){a=0==a.size%2?new Blob([a,new Uint8Array([0,0])]):new Blob([a,new Uint8Array([1])]);return new Promise(function(b,c){var d=new FileReader;d.onloadend=function(){if(d.error)c(d.error);else try{for(var a=d.result,f=[],g=0,l=a.byteLength;g<l;g+=8192)f.push(String.fromCharCode.apply(null,new Uint16Array(a,g,Math.min(l-g,8192)/2)));Vf("mr.temp.mirror.cast.Service.eventsBlob",
f.join(""));b()}catch(r){c(r)}};d.readAsArrayBuffer(a)})},Rf=function(){for(var a=ka(Object.keys(If)),b=a.next();!b.done;b=a.next())b=b.value,b.startsWith("mr.temp.")&&(Jf-=b.length+window.localStorage.getItem(b).length,delete window.localStorage[b]);u(Sf,"removeTemporary_: "+Jf+" chars used")};var Yf=function(a,b,c){this.j=c;this.f=a;this.g=b;this.b=0;this.a=null};Yf.prototype.get=function(){if(0<this.b){this.b--;var a=this.a;this.a=a.next;a.next=null}else a=this.f();return a};var Zf=function(a,b){a.g(b);a.b<a.j&&(a.b++,b.next=a.a,a.a=b)};var $f=function(a){return function(){return a}},ag=$f(!1),bg=$f(!0),cg=function(a){return a},dg=function(a){return function(){throw Error(a);}},eg=function(a){var b=b||0;return function(){return a.apply(this,Array.prototype.slice.call(arguments,0,b))}};var fg=function(a){oa.setTimeout(function(){throw a;},0)},gg,hg=function(){var a=oa.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!Gc("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,
a=n(function(a){if(("*"==d||a.origin==d)&&a.data==c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!Gc("Trident")&&!Gc("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(k(c.next)){c=c.next;var a=c.cf;c.cf=null;a()}};return function(a){d.next={cf:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?
function(a){var b=document.createElement("SCRIPT");b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){oa.setTimeout(a,0)}};var ig=function(){this.b=this.a=null},kg=new Yf(function(){return new jg},function(a){a.reset()},100);ig.prototype.add=function(a,b){var c=kg.get();c.set(a,b);this.b?this.b.next=c:this.a=c;this.b=c};ig.prototype.remove=function(){var a=null;this.a&&(a=this.a,this.a=this.a.next,this.a||(this.b=null),a.next=null);return a};var jg=function(){this.next=this.scope=this.a=null};jg.prototype.set=function(a,b){this.a=a;this.scope=b;this.next=null};
jg.prototype.reset=function(){this.next=this.scope=this.a=null};var qg=function(a,b){lg||mg();og||(lg(),og=!0);pg.add(a,b)},lg,mg=function(){if(-1!=String(oa.Promise).indexOf("[native code]")){var a=oa.Promise.resolve(void 0);lg=function(){a.then(rg)}}else lg=function(){var a=rg;!xa(oa.setImmediate)||oa.Window&&oa.Window.prototype&&!Gc("Edge")&&oa.Window.prototype.setImmediate==oa.setImmediate?(gg||(gg=hg()),gg(a)):oa.setImmediate(a)}},og=!1,pg=new ig,rg=function(){for(var a;a=pg.remove();){try{a.a.call(a.scope)}catch(b){fg(b)}Zf(kg,a)}og=!1};var sg=function(){return Gc("iPhone")&&!Gc("iPod")&&!Gc("iPad")},tg=function(){return sg()||Gc("iPad")||Gc("iPod")};var ug=function(a){ug[" "](a);return a};ug[" "]=ra;var vg=function(a,b){try{return ug(a[b]),!0}catch(c){}return!1},xg=function(a,b){var c=wg;return Object.prototype.hasOwnProperty.call(c,a)?c[a]:c[a]=b(a)};var yg=function(){return oa.navigator||null},zg=Gc("Opera"),Ag=Gc("Trident")||Gc("MSIE"),Bg=Gc("Edge"),Cg=Gc("Gecko")&&!(-1!=Dc.toLowerCase().indexOf("webkit")&&!Gc("Edge"))&&!(Gc("Trident")||Gc("MSIE"))&&!Gc("Edge"),Dg=-1!=Dc.toLowerCase().indexOf("webkit")&&!Gc("Edge"),Eg=Dg&&Gc("Mobile"),Fg=yg(),Gg=Fg&&Fg.platform||"",Hg=Gc("Macintosh"),Ig=Gc("Windows"),Jg=Gc("Linux")||Gc("CrOS"),Kg=Gc("Android"),Lg=sg(),Mg=Gc("iPad"),Ng=Gc("iPod"),Og=function(){var a=oa.document;return a?a.documentMode:void 0},
Pg;a:{var Qg="",Rg=function(){var a=Dc;if(Cg)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Bg)return/Edge\/([\d\.]+)/.exec(a);if(Ag)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Dg)return/WebKit\/(\S+)/.exec(a);if(zg)return/(?:Version)[ \/]?(\S+)/.exec(a)}();Rg&&(Qg=Rg?Rg[1]:"");if(Ag){var Sg=Og();if(null!=Sg&&Sg>parseFloat(Qg)){Pg=String(Sg);break a}}Pg=Qg}var Tg=Pg,wg={},Ug=function(a){return xg(a,function(){return 0<=xb(Tg,a)})},Vg;var Wg=oa.document;
Vg=Wg&&Ag?Og()||("CSS1Compat"==Wg.compatMode?parseInt(Tg,10):5):void 0;var Xg=function(a){if("undefined"==typeof a)return"undefined";if(null==a)return"NULL";var b=[],c;for(c in a)if(!xa(a[c])){var d=c+" = ";try{d+=a[c]}catch(e){d+="*** "+e+" ***"}b.push(d)}return b.join("\n")},Yg=function(a){var b=[],c=[],d={},e=function(a,g){var f=g+"  ";try{if(k(a))if(null===a)b.push("NULL");else if(pa(a))b.push('"'+a.replace(/\n/g,"\n"+g)+'"');else if(xa(a))b.push(String(a).replace(/\n/g,"\n"+g));else if(ya(a)){a[za]||c.push(a);var r=a[za]||(a[za]=++Ba);if(d[r])b.push("*** reference loop detected (id="+
r+") ***");else{d[r]=!0;b.push("{");for(var y in a)xa(a[y])||(b.push("\n"),b.push(f),b.push(y+" = "),e(a[y],f));b.push("\n"+g+"}");delete d[r]}}else b.push(a);else b.push("undefined")}catch(z){b.push("*** "+z+" ***")}};e(a,"");for(a=0;a<c.length;a++)Aa(c[a]);return b.join("")},Zg=function(a){var b=Zg;var c=Error();if(Error.captureStackTrace)Error.captureStackTrace(c,b),b=String(c.stack);else{try{throw c;}catch(e){c=e}b=(b=c.stack)?String(b):null}if(b)return b;b=[];for(var c=arguments.callee.caller,
d=0;c&&(!a||d<a);){b.push($g(c));b.push("()\n");try{c=c.caller}catch(e){b.push("[exception trying to get caller]\n");break}d++;if(50<=d){b.push("[...long stack...]");break}}a&&d>=a?b.push("[...reached max depth limit...]"):b.push("[end]");return b.join("")},$g=function(a){if(ah[a])return ah[a];a=String(a);if(!ah[a]){var b=/function ([^\(]+)/.exec(a);ah[a]=b?b[1]:"[Anonymous]"}return ah[a]},ah={};var bh=function(a,b,c,d,e){this.reset(a,b,c,d,e)};bh.prototype.a=null;var ch=0;bh.prototype.reset=function(a,b,c,d,e){"number"==typeof e||ch++;this.j=d||Fa();this.b=a;this.g=b;this.f=c;delete this.a};bh.prototype.getMessage=function(){return this.g};var dh=function(a){this.j=a;this.a=this.g=this.b=this.f=null},eh=function(a,b){this.name=a;this.value=b};eh.prototype.toString=function(){return this.name};var fh=new eh("SEVERE",1E3),gh=new eh("WARNING",900),hh=new eh("INFO",800),ih=new eh("CONFIG",700),jh=new eh("FINE",500),kh=new eh("FINER",400),lh=new eh("ALL",0);dh.prototype.getName=function(){return this.j};dh.prototype.getChildren=function(){this.g||(this.g={});return this.g};
var mh=function(a){if(a.b)return a.b;if(a.f)return mh(a.f);Cb("Root logger has no level set.");return null};dh.prototype.log=function(a,b,c){a.value>=mh(this).value&&(xa(b)&&(b=b()),a=new bh(a,String(b),this.j),c&&(a.a=c),nh(this,a))};dh.prototype.config=function(a,b){this.log(ih,a,b)};dh.prototype.logRecord=function(a){a.b.value>=mh(this).value&&nh(this,a)};
var nh=function(a,b){var c="log:"+b.getMessage();oa.console&&(oa.console.timeStamp?oa.console.timeStamp(c):oa.console.markTimeline&&oa.console.markTimeline(c));for(oa.msWriteProfilerMark&&oa.msWriteProfilerMark(c);a;){var d=a,e=b;if(d.a)for(var f=0;c=d.a[f];f++)c(e);a=a.f}},oh={},ph=null,qh=function(){ph||(ph=new dh(""),oh[""]=ph,ph.b=ih)},rh=function(a){qh();var b;if(!(b=oh[a])){b=new dh(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=rh(a.substr(0,c));c.getChildren()[d]=b;b.f=c;oh[a]=b}return b};var sh=function(){this.u=this.u;this.T=this.T};sh.prototype.u=!1;sh.prototype.sa=function(){this.u||(this.u=!0,this.Y())};sh.prototype.j=function(a){th(this,Ea(uh,a))};var th=function(a,b){a.u?k(void 0)?b.call(void 0):b():(a.T||(a.T=[]),a.T.push(k(void 0)?n(b,void 0):b))};sh.prototype.Y=function(){if(this.T)for(;this.T.length;)this.T.shift()()};var uh=function(a){a&&"function"==typeof a.sa&&a.sa()},vh=function(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];wa(d)?vh.apply(null,d):uh(d)}};var wh=!Ag||9<=Number(Vg),xh=Ag&&!Ug("9");!Dg||Ug("528");Cg&&Ug("1.9b")||Ag&&Ug("8")||zg&&Ug("9.5")||Dg&&Ug("528");Cg&&!Ug("8")||Ag&&Ug("9");var yh=function(){if(!oa.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});oa.addEventListener("test",null,b);oa.removeEventListener("test",null,b);return a}();var A=function(a,b){this.type=a;this.f=this.target=b;this.Oh=!0};A.prototype.g=function(){this.Oh=!1};var zh=function(a,b){A.call(this,a?a.type:"");this.relatedTarget=this.f=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=0;this.key="";this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.a=this.state=null;a&&this.init(a,b)};q(zh,A);
zh.prototype.init=function(a,b){var c=this.type=a.type,d=a.changedTouches?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.f=b;(b=a.relatedTarget)?Cg&&(vg(b,"nodeName")||(b=null)):"mouseover"==c?b=a.fromElement:"mouseout"==c&&(b=a.toElement);this.relatedTarget=b;null===d?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=
void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0);this.button=a.button;this.key=a.key||"";this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.state=a.state;this.a=a;a.defaultPrevented&&this.g()};zh.prototype.g=function(){zh.W.g.call(this);var a=this.a;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,xh)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var Ah="closure_listenable_"+(1E6*Math.random()|0),Bh=function(a){return!(!a||!a[Ah])},Ch=0;var Dh=function(a,b,c,d,e){this.listener=a;this.proxy=null;this.src=b;this.type=c;this.capture=!!d;this.Ma=e;this.key=++Ch;this.removed=this.je=!1},Eh=function(a){a.removed=!0;a.listener=null;a.proxy=null;a.src=null;a.Ma=null};var Fh=function(a){this.src=a;this.a={};this.b=0};Fh.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.a[f];a||(a=this.a[f]=[],this.b++);var g=Gh(a,b,d,e);-1<g?(b=a[g],c||(b.je=!1)):(b=new Dh(b,this.src,f,!!d,e),b.je=c,a.push(b));return b};Fh.prototype.remove=function(a,b,c,d){a=a.toString();if(!(a in this.a))return!1;var e=this.a[a];b=Gh(e,b,c,d);return-1<b?(Eh(e[b]),Ub(e,b),0==e.length&&(delete this.a[a],this.b--),!0):!1};
var Hh=function(a,b){var c=b.type;if(!(c in a.a))return!1;var d=Vb(a.a[c],b);d&&(Eh(b),0==a.a[c].length&&(delete a.a[c],a.b--));return d};Fh.prototype.removeAll=function(a){a=a&&a.toString();var b=0,c;for(c in this.a)if(!a||c==a){for(var d=this.a[c],e=0;e<d.length;e++)++b,Eh(d[e]);delete this.a[c];this.b--}return b};
var Ih=function(a,b,c,d,e){a=a.a[b.toString()];b=-1;a&&(b=Gh(a,c,d,e));return-1<b?a[b]:null},Gh=function(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.removed&&f.listener==b&&f.capture==!!c&&f.Ma==d)return e}return-1};var Jh="closure_lm_"+(1E6*Math.random()|0),Lh={},Mh=0,Oh=function(a,b,c,d,e){if(d&&d.once)return Nh(a,b,c,d,e);if(va(b)){for(var f=0;f<b.length;f++)Oh(a,b[f],c,d,e);return null}c=Ph(c);return Bh(a)?a.listen(b,c,ya(d)?!!d.capture:!!d,e):Qh(a,b,c,!1,d,e)},Qh=function(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var g=ya(e)?!!e.capture:!!e,l=Rh(a);l||(a[Jh]=l=new Fh(a));c=l.add(b,c,d,g,f);if(c.proxy)return c;d=Sh();c.proxy=d;d.src=a;d.listener=c;if(a.addEventListener)yh||(e=g),void 0===e&&(e=
!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(Th(b.toString()),d);else throw Error("addEventListener and attachEvent are unavailable.");Mh++;return c},Sh=function(){var a=Uh,b=wh?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b},Nh=function(a,b,c,d,e){if(va(b)){for(var f=0;f<b.length;f++)Nh(a,b[f],c,d,e);return null}c=Ph(c);return Bh(a)?Vh(a,b,c,ya(d)?!!d.capture:!!d,e):Qh(a,b,c,!0,d,e)},Wh=function(a,b,
c,d,e){if(va(b))for(var f=0;f<b.length;f++)Wh(a,b[f],c,d,e);else d=ya(d)?!!d.capture:!!d,c=Ph(c),Bh(a)?a.w(b,c,d,e):a&&(a=Rh(a))&&(b=Ih(a,b,c,d,e))&&Xh(b)},Xh=function(a){if(m(a)||!a||a.removed)return!1;var b=a.src;if(Bh(b))return Hh(b.yb,a);var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent&&b.detachEvent(Th(c),d);Mh--;(c=Rh(b))?(Hh(c,a),0==c.b&&(c.src=null,b[Jh]=null)):Eh(a);return!0},Th=function(a){return a in Lh?Lh[a]:Lh[a]="on"+a},Zh=function(a,b,
c,d){var e=!0;if(a=Rh(a))if(b=a.a[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.capture==c&&!f.removed&&(f=Yh(f,d),e=e&&!1!==f)}return e},Yh=function(a,b){var c=a.listener,d=a.Ma||a.src;a.je&&Xh(a);return c.call(d,b)},Uh=function(a,b){if(a.removed)return!0;if(!wh){var c=b||qa("window.event");b=new zh(c,this);var d=!0;if(!(0>c.keyCode||void 0!=c.returnValue)){a:{var e=!1;if(0==c.keyCode)try{c.keyCode=-1;break a}catch(g){e=!0}if(e||void 0==c.returnValue)c.returnValue=!0}c=[];for(e=
b.f;e;e=e.parentNode)c.push(e);for(var e=a.type,f=c.length-1;0<=f;f--)b.f=c[f],a=Zh(c[f],e,!0,b),d=d&&a;for(f=0;f<c.length;f++)b.f=c[f],a=Zh(c[f],e,!1,b),d=d&&a}return d}return Yh(a,new zh(b,this))},Rh=function(a){a=a[Jh];return a instanceof Fh?a:null},$h="__closure_events_fn_"+(1E9*Math.random()>>>0),Ph=function(a){if(xa(a))return a;a[$h]||(a[$h]=function(b){return a.handleEvent(b)});return a[$h]};var B=function(){sh.call(this);this.yb=new Fh(this);this.Gi=this;this.J=null};q(B,sh);B.prototype[Ah]=!0;B.prototype.removeEventListener=function(a,b,c,d){Wh(this,a,b,c,d)};
B.prototype.dispatchEvent=function(a){var b,c=this.J;if(c)for(b=[];c;c=c.J)b.push(c);var c=this.Gi,d=a.type||a;if(pa(a))a=new A(a,c);else if(a instanceof A)a.target=a.target||c;else{var e=a;a=new A(d,c);xc(a,e)}var e=!0;if(b)for(var f=b.length-1;0<=f;f--){var g=a.f=b[f];e=ai(g,d,!0,a)&&e}g=a.f=c;e=ai(g,d,!0,a)&&e;e=ai(g,d,!1,a)&&e;if(b)for(f=0;f<b.length;f++)g=a.f=b[f],e=ai(g,d,!1,a)&&e;return e};B.prototype.Y=function(){B.W.Y.call(this);this.yb&&this.yb.removeAll(void 0);this.J=null};
B.prototype.listen=function(a,b,c,d){return this.yb.add(String(a),b,!1,c,d)};var Vh=function(a,b,c,d,e){return a.yb.add(String(b),c,!0,d,e)};B.prototype.w=function(a,b,c,d){return this.yb.remove(String(a),b,c,d)};var ai=function(a,b,c,d){b=a.yb.a[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,f=0;f<b.length;++f){var g=b[f];if(g&&!g.removed&&g.capture==c){var l=g.listener,r=g.Ma||g.src;g.je&&Hh(a.yb,g);e=!1!==l.call(r,d)&&e}}return e&&0!=d.Oh};var bi="StopIteration"in oa?oa.StopIteration:{message:"StopIteration",stack:""},ci=function(){};ci.prototype.next=function(){throw bi;};ci.prototype.Oa=function(){return this};
var di=function(a){if(a instanceof ci)return a;if("function"==typeof a.Oa)return a.Oa(!1);if(wa(a)){var b=0,c=new ci;c.next=function(){for(;;){if(b>=a.length)throw bi;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");},ei=function(a,b,c){if(wa(a))try{w(a,b,c)}catch(d){if(d!==bi)throw d;}else{a=di(a);try{for(;;)b.call(c,a.next(),void 0,a)}catch(d){if(d!==bi)throw d;}}},fi=function(a,b){a=di(a);try{for(;!b.call(void 0,a.next(),void 0,a););}catch(c){if(c!==bi)throw c;}},gi=function(a){if(wa(a))return x(a);
a=di(a);var b=[];ei(a,function(a){b.push(a)});return b};var hi=oa.JSON.parse,ii=oa.JSON.stringify;var ji=function(a,b,c){a&&a.log(b,c,void 0)},ki=function(a,b,c){a&&a.log(fh,b,c)},C=function(a,b,c){a&&a.log(gh,b,c)},D=function(a,b){a&&a.log(hh,b,void 0)},li=function(a,b){a&&a.log(jh,b,void 0)};var mi=function(){};mi.prototype.a=null;var oi=function(a){var b;(b=a.a)||(b={},ni(a)&&(b[0]=!0,b[1]=!0),b=a.a=b);return b};var pi,qi=function(){};q(qi,mi);var ri=function(a){return(a=ni(a))?new ActiveXObject(a):new XMLHttpRequest},ni=function(a){if(!a.b&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.b=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.b};pi=new qi;var ti=function(a,b){this.b={};this.a=[];this.g=this.f=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&si(this,a)};h=ti.prototype;h.aa=function(){return this.f};h.R=function(){ui(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.b[this.a[b]]);return a};h.Fa=function(){ui(this);return this.a.concat()};h.La=function(a){return vi(this.b,a)};
h.Oc=function(a){for(var b=0;b<this.a.length;b++){var c=this.a[b];if(vi(this.b,c)&&this.b[c]==a)return!0}return!1};h.equals=function(a,b){if(this===a)return!0;if(this.f!=a.aa())return!1;b=b||wi;ui(this);for(var c,d=0;c=this.a[d];d++)if(!b(this.get(c),a.get(c)))return!1;return!0};var wi=function(a,b){return a===b};ti.prototype.kb=function(){return 0==this.f};ti.prototype.clear=function(){this.b={};this.g=this.f=this.a.length=0};
ti.prototype.remove=function(a){return vi(this.b,a)?(delete this.b[a],this.f--,this.g++,this.a.length>2*this.f&&ui(this),!0):!1};var ui=function(a){var b,c;if(a.f!=a.a.length){for(b=c=0;c<a.a.length;){var d=a.a[c];vi(a.b,d)&&(a.a[b++]=d);c++}a.a.length=b}if(a.f!=a.a.length){var e={};for(b=c=0;c<a.a.length;)d=a.a[c],vi(e,d)||(a.a[b++]=d,e[d]=1),c++;a.a.length=b}};ti.prototype.get=function(a,b){return vi(this.b,a)?this.b[a]:b};
ti.prototype.set=function(a,b){vi(this.b,a)||(this.f++,this.a.push(a),this.g++);this.b[a]=b};var si=function(a,b){if(b instanceof ti){var c=b.Fa();b=b.R()}else c=nc(b),b=mc(b);for(var d=0;d<c.length;d++)a.set(c[d],b[d])};ti.prototype.forEach=function(a,b){for(var c=this.Fa(),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};ti.prototype.clone=function(){return new ti(this)};var xi=function(a){ui(a);for(var b={},c=0;c<a.a.length;c++){var d=a.a[c];b[d]=a.b[d]}return b};
ti.prototype.Oa=function(a){ui(this);var b=0,c=this.g,d=this,e=new ci;e.next=function(){if(c!=d.g)throw Error("The map has changed since the iterator was created");if(b>=d.a.length)throw bi;var e=d.a[b++];return a?e:d.b[e]};return e};var vi=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};var yi=function(a){return a.aa&&"function"==typeof a.aa?a.aa():wa(a)||pa(a)?a.length:lc(a)},zi=function(a){if(a.R&&"function"==typeof a.R)return a.R();if(pa(a))return a.split("");if(wa(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return mc(a)},Ai=function(a){if(a.Fa&&"function"==typeof a.Fa)return a.Fa();if(!a.R||"function"!=typeof a.R){if(wa(a)||pa(a)){var b=[];a=a.length;for(var c=0;c<a;c++)b.push(c);return b}return nc(a)}},Bi=function(a){return a.kb&&"function"==typeof a.kb?a.kb():
wa(a)||pa(a)?Pb(a):qc(a)},Ci=function(a,b,c){if(a.forEach&&"function"==typeof a.forEach)a.forEach(b,c);else if(wa(a)||pa(a))w(a,b,c);else for(var d=Ai(a),e=zi(a),f=e.length,g=0;g<f;g++)b.call(c,e[g],d&&d[g],a)},Di=function(a,b,c){if("function"==typeof a.map)return a.map(b,c);if(wa(a)||pa(a))return Hb(a,b,c);var d=Ai(a),e=zi(a),f=e.length;if(d){var g={};for(var l=0;l<f;l++)g[d[l]]=b.call(c,e[l],d[l],a)}else for(g=[],l=0;l<f;l++)g[l]=b.call(c,e[l],void 0,a);return g},Ei=function(a,b){if("function"==
typeof a.every)return a.every(b,void 0);if(wa(a)||pa(a))return Kb(a,b,void 0);for(var c=Ai(a),d=zi(a),e=d.length,f=0;f<e;f++)if(!b.call(void 0,d[f],c&&c[f],a))return!1;return!0};var Fi=function(a){a.prototype.then=a.prototype.then;a.prototype.$goog_Thenable=!0},Gi=function(a){if(!a)return!1;try{return!!a.$goog_Thenable}catch(b){return!1}};var Ji=function(a,b){this.a=0;this.m=void 0;this.g=this.b=this.f=null;this.j=this.h=!1;if(a!=ra)try{var c=this;a.call(b,function(a){Hi(c,2,a)},function(a){if(!(a instanceof Ii))try{if(a instanceof Error)throw a;throw Error("Promise rejected.");}catch(e){}Hi(c,3,a)})}catch(d){Hi(this,3,d)}},Ki=function(){this.next=this.g=this.b=this.j=this.a=null;this.f=!1};Ki.prototype.reset=function(){this.g=this.b=this.j=this.a=null;this.f=!1};
var Li=new Yf(function(){return new Ki},function(a){a.reset()},100),Mi=function(a,b,c){var d=Li.get();d.j=a;d.b=b;d.g=c;return d},Ni=function(a){if(a instanceof Ji)return a;var b=new Ji(ra);Hi(b,2,a);return b},Oi=function(a){return new Ji(function(b,c){c(a)})},Qi=function(a,b,c){Pi(a,b,c,null)||qg(Ea(b,a))},Ri=function(a){return new Ji(function(b,c){a.length||b(void 0);for(var d=0,e;d<a.length;d++)e=a[d],Qi(e,b,c)})},Si=function(a){return new Ji(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,
c){d--;e[a]=c;0==d&&b(e)},g=function(a){c(a)},l=0,r;l<a.length;l++)r=a[l],Qi(r,Ea(f,l),g);else b(e)})},Ti=function(a){return new Ji(function(b){var c=a.length,d=[];if(c)for(var e=function(a,e,f){c--;d[a]=e?{ic:!0,value:f}:{ic:!1,reason:f};0==c&&b(d)},f=0,g;f<a.length;f++)g=a[f],Qi(g,Ea(e,f,!0),Ea(e,f,!1));else b(d)})},rc=function(){var a,b,c=new Ji(function(c,e){a=c;b=e});return new Ui(c,a,b)};Ji.prototype.then=function(a,b,c){return Vi(this,xa(a)?a:null,xa(b)?b:null,c)};Fi(Ji);
var Xi=function(a,b,c){b=Mi(b,b,c);b.f=!0;Wi(a,b);return a},Yi=function(a,b,c){return Vi(a,null,b,c)};Ji.prototype.cancel=function(a){0==this.a&&qg(function(){var b=new Ii(a);Zi(this,b)},this)};
var Zi=function(a,b){if(0==a.a)if(a.f){var c=a.f;if(c.b){for(var d=0,e=null,f=null,g=c.b;g&&(g.f||(d++,g.a==a&&(e=g),!(e&&1<d)));g=g.next)e||(f=g);e&&(0==c.a&&1==d?Zi(c,b):(f?(d=f,d.next==c.g&&(c.g=d),d.next=d.next.next):$i(c),aj(c,e,3,b)))}a.f=null}else Hi(a,3,b)},Wi=function(a,b){a.b||2!=a.a&&3!=a.a||bj(a);a.g?a.g.next=b:a.b=b;a.g=b},Vi=function(a,b,c,d){var e=Mi(null,null,null);e.a=new Ji(function(a,g){e.j=b?function(c){try{var e=b.call(d,c);a(e)}catch(y){g(y)}}:a;e.b=c?function(b){try{var e=c.call(d,
b);!k(e)&&b instanceof Ii?g(b):a(e)}catch(y){g(y)}}:g});e.a.f=a;Wi(a,e);return e.a};Ji.prototype.w=function(a){this.a=0;Hi(this,2,a)};Ji.prototype.s=function(a){this.a=0;Hi(this,3,a)};
var Hi=function(a,b,c){0==a.a&&(a===c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.a=1,Pi(c,a.w,a.s,a)||(a.m=c,a.a=b,a.f=null,bj(a),3!=b||c instanceof Ii||cj(a,c)))},Pi=function(a,b,c,d){if(a instanceof Ji)return Wi(a,Mi(b||ra,c||null,d)),!0;if(Gi(a))return a.then(b,c,d),!0;if(ya(a))try{var e=a.then;if(xa(e))return dj(a,e,b,c,d),!0}catch(f){return c.call(d,f),!0}return!1},dj=function(a,b,c,d,e){var f=!1,g=function(a){f||(f=!0,c.call(e,a))},l=function(a){f||(f=!0,d.call(e,a))};try{b.call(a,
g,l)}catch(r){l(r)}},bj=function(a){a.h||(a.h=!0,qg(a.u,a))},$i=function(a){var b=null;a.b&&(b=a.b,a.b=b.next,b.next=null);a.b||(a.g=null);return b};Ji.prototype.u=function(){for(var a;a=$i(this);)aj(this,a,this.a,this.m);this.h=!1};
var aj=function(a,b,c,d){if(3==c&&b.b&&!b.f)for(;a&&a.j;a=a.f)a.j=!1;if(b.a)b.a.f=null,ej(b,c,d);else try{b.f?b.j.call(b.g):ej(b,c,d)}catch(e){fj.call(null,e)}Zf(Li,b)},ej=function(a,b,c){2==b?a.j.call(a.g,c):a.b&&a.b.call(a.g,c)},cj=function(a,b){a.j=!0;qg(function(){a.j&&fj.call(null,b)})},fj=fg,Ii=function(a){zb.call(this,a)};q(Ii,zb);Ii.prototype.name="cancel";var Ui=function(a,b,c){this.a=a;this.resolve=b;this.reject=c};var gj=function(a,b){B.call(this);this.b=a||1;this.a=b||oa;this.f=n(this.em,this);this.g=Fa()};q(gj,B);h=gj.prototype;h.enabled=!1;h.ub=null;h.em=function(){if(this.enabled){var a=Fa()-this.g;0<a&&a<.8*this.b?this.ub=this.a.setTimeout(this.f,this.b-a):(this.ub&&(this.a.clearTimeout(this.ub),this.ub=null),this.dispatchEvent("tick"),this.enabled&&(this.ub=this.a.setTimeout(this.f,this.b),this.g=Fa()))}};h.start=function(){this.enabled=!0;this.ub||(this.ub=this.a.setTimeout(this.f,this.b),this.g=Fa())};
h.stop=function(){this.enabled=!1;this.ub&&(this.a.clearTimeout(this.ub),this.ub=null)};h.Y=function(){gj.W.Y.call(this);this.stop();delete this.a};
var hj=function(a,b,c){if(xa(a))c&&(a=n(a,c));else if(a&&"function"==typeof a.handleEvent)a=n(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:oa.setTimeout(a,b||0)},ij=function(a){oa.clearTimeout(a)},jj=function(a){var b=null;return Yi(new Ji(function(c,d){b=hj(function(){c(void 0)},a);-1==b&&d(Error("Failed to schedule timer."))}),function(a){ij(b);throw a;})};var kj=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/,lj=function(a,b){if(a){a=a.split("&");for(var c=0;c<a.length;c++){var d=a[c].indexOf("="),e=null;if(0<=d){var f=a[c].substring(0,d);e=a[c].substring(d+1)}else f=a[c];b(f,e?decodeURIComponent(e.replace(/\+/g," ")):"")}}},mj=function(a,b,c){c=null!=c?"="+encodeURIComponent(String(c)):"";if(b+=c){c=a.indexOf("#");0>c&&(c=a.length);var d=a.indexOf("?");if(0>d||d>c){d=c;var e=""}else e=
a.substring(d+1,c);a=[a.substr(0,d),e,a.substr(c)];c=a[1];a[1]=b?c?c+"&"+b:b:c;a=a[0]+(a[1]?"?"+a[1]:"")+a[2]}return a},nj=/#|$/,oj=function(a,b){var c=a.search(nj);a:{var d=0;for(var e=b.length;0<=(d=a.indexOf(b,d))&&d<c;){var f=a.charCodeAt(d-1);if(38==f||63==f)if(f=a.charCodeAt(d+e),!f||61==f||38==f||35==f)break a;d+=e+1}d=-1}if(0>d)return null;e=a.indexOf("&",d);if(0>e||e>c)e=c;d+=b.length+1;return decodeURIComponent(a.substr(d,e-d).replace(/\+/g," "))},pj=function(a,b){var c=a.length-1;0<=c&&
a.indexOf("/",c)==c&&(a=a.substr(0,a.length-1));0==b.lastIndexOf("/",0)&&(b=b.substr(1));return ub(a,"/",b)};var qj=function(a){B.call(this);this.headers=new ti;this.O=a||null;this.b=!1;this.K=this.a=null;this.fa=this.G="";this.m=0;this.f="";this.g=this.X=this.B=this.U=!1;this.h=0;this.v=null;this.s="";this.H=this.A=!1};q(qj,B);qj.prototype.l=rh("goog.net.XhrIo");var rj=/^https?$/i,sj=["POST","PUT"],tj=[],uj=function(a,b,c,d,e,f,g){var l=new qj;tj.push(l);b&&l.listen("complete",b);Vh(l,"ready",l.oa);f&&(l.h=Math.max(0,f));g&&(l.A=g);l.send(a,c,d,e);return l};qj.prototype.oa=function(){this.sa();Vb(tj,this)};
qj.prototype.send=function(a,b,c,d){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.G+"; newUri="+a);b=b?b.toUpperCase():"GET";this.G=a;this.f="";this.m=0;this.fa=b;this.U=!1;this.b=!0;this.a=this.O?ri(this.O):ri(pi);this.K=this.O?oi(this.O):oi(pi);this.a.onreadystatechange=n(this.ga,this);try{li(this.l,vj(this,"Opening Xhr")),this.X=!0,this.a.open(b,String(a),!0),this.X=!1}catch(f){li(this.l,vj(this,"Error opening Xhr: "+f.message));wj(this,f);return}a=c||"";
var e=this.headers.clone();d&&Ci(d,function(a,b){e.set(b,a)});d=Mb(e.Fa(),xj);c=oa.FormData&&a instanceof oa.FormData;!Ob(sj,b)||d||c||e.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");e.forEach(function(a,b){this.a.setRequestHeader(b,a)},this);this.s&&(this.a.responseType=this.s);"withCredentials"in this.a&&this.a.withCredentials!==this.A&&(this.a.withCredentials=this.A);try{yj(this),0<this.h&&(this.H=zj(this.a),li(this.l,vj(this,"Will abort after "+this.h+"ms if incomplete, xhr2 "+
this.H)),this.H?(this.a.timeout=this.h,this.a.ontimeout=n(this.ka,this)):this.v=hj(this.ka,this.h,this)),li(this.l,vj(this,"Sending request")),this.B=!0,this.a.send(a),this.B=!1}catch(f){li(this.l,vj(this,"Send error: "+f.message)),wj(this,f)}};var zj=function(a){return Ag&&Ug(9)&&m(a.timeout)&&k(a.ontimeout)},xj=function(a){return gb("Content-Type",a)};
qj.prototype.ka=function(){"undefined"!=typeof na&&this.a&&(this.f="Timed out after "+this.h+"ms, aborting",this.m=8,li(this.l,vj(this,this.f)),this.dispatchEvent("timeout"),this.abort(8))};var wj=function(a,b){a.b=!1;a.a&&(a.g=!0,a.a.abort(),a.g=!1);a.f=b;a.m=5;Aj(a);Bj(a)},Aj=function(a){a.U||(a.U=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))};
qj.prototype.abort=function(a){this.a&&this.b&&(li(this.l,vj(this,"Aborting")),this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.m=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Bj(this))};qj.prototype.Y=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Bj(this,!0));qj.W.Y.call(this)};qj.prototype.ga=function(){this.u||(this.X||this.B||this.g?Cj(this):this.ia())};qj.prototype.ia=function(){Cj(this)};
var Cj=function(a){if(a.b&&"undefined"!=typeof na)if(a.K[1]&&4==Dj(a)&&2==a.za())li(a.l,vj(a,"Local request error detected and ignored"));else if(a.B&&4==Dj(a))hj(a.ga,0,a);else if(a.dispatchEvent("readystatechange"),4==Dj(a)){li(a.l,vj(a,"Request complete"));a.b=!1;try{if(Ej(a))a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.m=6;try{var b=2<Dj(a)?a.a.statusText:""}catch(c){li(a.l,"Can not get status: "+c.message),b=""}a.f=b+" ["+a.za()+"]";Aj(a)}}finally{Bj(a)}}},Bj=function(a,b){if(a.a){yj(a);
var c=a.a,d=a.K[0]?ra:null;a.a=null;a.K=null;b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){ki(a.l,"Problem encountered resetting onreadystatechange: "+e.message)}}},yj=function(a){a.a&&a.H&&(a.a.ontimeout=null);m(a.v)&&(ij(a.v),a.v=null)},Ej=function(a){var b=a.za();a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break a;default:c=!1}if(!c){if(b=0===b)a=String(a.G).match(kj)[1]||null,!a&&oa.self&&oa.self.location&&(a=oa.self.location.protocol,
a=a.substr(0,a.length-1)),b=!rj.test(a?a.toLowerCase():"");c=b}return c},Dj=function(a){return a.a?a.a.readyState:0};qj.prototype.za=function(){try{return 2<Dj(this)?this.a.status:-1}catch(a){return-1}};
var Fj=function(a){try{return a.a?a.a.responseText:""}catch(b){return li(a.l,"Can not get responseText: "+b.message),""}},Gj=function(a){if(a.a)return hi(a.a.responseText)},Hj=function(a){try{if(!a.a)return null;if("response"in a.a)return a.a.response;switch(a.s){case "":case "text":return a.a.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in a.a)return a.a.mozResponseArrayBuffer}ki(a.l,"Response type "+a.s+" is not supported on this browser");return null}catch(b){return li(a.l,"Can not get response: "+
b.message),null}};qj.prototype.getResponseHeader=function(a){if(this.a&&4==Dj(this))return a=this.a.getResponseHeader(a),null===a?void 0:a};var Ij=function(a){var b={};a=(a.a&&4==Dj(a)?a.a.getAllResponseHeaders():"").split("\r\n");for(var c=0;c<a.length;c++)if(!ib(a[c])){var d=yb(a[c],": ",2);b[d[0]]=b[d[0]]?b[d[0]]+(", "+d[1]):d[1]}return b},vj=function(a,b){return b+" ["+a.fa+" "+a.G+" "+a.za()+"]"};var Jj=function(){},Kj=function(a){if(!a.startsWith("urn:x-org.chromium:media:route:"))return null;var b=a.substring(31);if(!b)return null;var c=b.match(/([^/]*)\/([^-/]*)-([^/]*)\/(.*)/);if(!c)return null;b=new Jj;b.g=a;a=ka(c);a.next();b.a=a.next().value;b.f=a.next().value;b.j=a.next().value;b.b=a.next().value;return b};Jj.prototype.Z=function(){return this.b};var Lj=function(a,b,c,d,e,f){this.id=a;this.sinkId=b;this.mediaSource=c;this.isLocal=d;this.description=e;this.iconUrl=f;this.allowStop=!0;this.customControllerPath=null;this.supportsMediaRouteController=!1;this.forDisplay=!0;this.offTheRecord=!1;this.Pc=d;this.isOffscreenPresentation=!1},Mj=function(a,b,c,d,e,f,g){return new Lj("urn:x-org.chromium:media:route:"+a+"/"+b+"-"+c+"/"+d,c,d,e,f,g)};var Nj=function(a){this.b=a;this.a=1E3*Math.floor(1E6*Math.random())},Oj=function(a){var b=a.a++;0==b&&(b=a.a++);return b};Nj.prototype.ea=function(){return"IdGenerator."+this.b};Nj.prototype.ta=function(){return[this.a]};Nj.prototype.wa=function(){var a=Lf(this);a&&(this.a=a)};window.navigator.userAgent.match(/Chrome\/([0-9]+)/);var Pj=function(a,b){this.type=a;this.entryPoint=b};p("castApp.frontEnd.ExtensionMessage",Pj);var Qj=function(a){return"urn:x-cast:com.google.cast."+a},Rj=Qj("tp.connection"),Sj=Qj("receiver"),Tj=Qj("remoting"),Uj=Qj("media"),Vj=Qj("webrtc"),Wj=Qj("broadcast"),Xj=vc({Vq:Rj,Wq:Qj("tp.heartbeat"),hq:Sj,lq:Tj,Qo:Uj,To:Qj("media.universalRemote.optIn"),pr:Vj,Om:Wj});var Yj=function(a){return"available"==a||"available_rescan"==a};var Zj=function(a,b,c,d,e){this.id=a;this.friendlyName=b;this.iconType=c||"generic";this.description=void 0===d?null:d;this.domain=void 0===e?null:e};var ak=(new Map).set("+","-").set("/","_").set("=","."),bk=(new Map).set("-","+").set("_","/").set(".","="),ck=function(a){return atob(a.replace(/[-_.]/g,function(a){return bk.get(a)}))},dk=function(a){return btoa(String.fromCharCode.apply(String,[].concat(ma(a)))).replace(/[+/=]/g,function(a){return ak.get(a)})};var ek=function(){this.a=[];this.j=[];this.h=[];this.f=[];this.f[0]=128;for(var a=1;64>a;++a)this.f[a]=0;this.g=this.b=0;this.reset()};ek.prototype.reset=function(){this.a[0]=1732584193;this.a[1]=4023233417;this.a[2]=2562383102;this.a[3]=271733878;this.a[4]=3285377520;this.g=this.b=0};
var fk=function(a,b,c){c=void 0===c?0:c;var d=a.h;if("string"===typeof b)for(var e=0;16>e;e++)d[e]=b.charCodeAt(c)<<24|b.charCodeAt(c+1)<<16|b.charCodeAt(c+2)<<8|b.charCodeAt(c+3),c+=4;else for(e=0;16>e;e++)d[e]=b[c]<<24|b[c+1]<<16|b[c+2]<<8|b[c+3],c+=4;for(b=16;80>b;b++)c=d[b-3]^d[b-8]^d[b-14]^d[b-16],d[b]=(c<<1|c>>>31)&4294967295;b=a.a[0];c=a.a[1];for(var e=a.a[2],f=a.a[3],g=a.a[4],l,r,y=0;80>y;y++)40>y?20>y?(l=f^c&(e^f),r=1518500249):(l=c^e^f,r=1859775393):60>y?(l=c&e|f&(c|e),r=2400959708):(l=
c^e^f,r=3395469782),l=(b<<5|b>>>27)+l+g+r+d[y]&4294967295,g=f,f=e,e=(c<<30|c>>>2)&4294967295,c=b,b=l;a.a[0]=a.a[0]+b&4294967295;a.a[1]=a.a[1]+c&4294967295;a.a[2]=a.a[2]+e&4294967295;a.a[3]=a.a[3]+f&4294967295;a.a[4]=a.a[4]+g&4294967295};
ek.prototype.update=function(a,b){b=void 0===b?a.length:b;for(var c=b-64,d=0,e=this.j,f=this.b;d<b;){if(0==f)for(;d<=c;)fk(this,a,d),d+=64;if("string"===typeof a)for(;d<b;){if(e[f]=a.charCodeAt(d),++f,++d,64==f){fk(this,e);f=0;break}}else for(;d<b;)if(e[f]=a[d],++f,++d,64==f){fk(this,e);f=0;break}}this.b=f;this.g+=b};
ek.prototype.digest=function(){var a=[],b=8*this.g;56>this.b?this.update(this.f,56-this.b):this.update(this.f,64-(this.b-56));for(var c=63;56<=c;c--)this.j[c]=b&255,b/=256;fk(this,this.j);for(c=b=0;5>c;c++)for(var d=24;0<=d;d-=8)a[b]=this.a[c]>>d&255,++b;return a};var gk=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)};var ik=function(){this.h=gk();this.f=new hk(null,null);this.b=new hk(null,null);this.j=[];this.g=this.a=0;Of(this)},kk=function(){jk||(jk=new ik);return jk},lk=function(a,b){b=b.toLowerCase();var c=new ek;c.update(b);c.update(a.h);return"r"+dk(c.digest())},mk=function(){var a=kk();return a.f.model?a.f:a.b.model?a.b:new hk(null,null)};ik.prototype.ea=function(){return"SinkUtils"};
ik.prototype.ta=function(){return[{recentLaunchedDevice:this.f,recentDiscoveredDevice:this.b},{receiverIdToken:this.h,fixedIpList:this.j.join(","),castControlPort:this.a,lastCloudSinkCheckTimeMillis:this.g}]};
ik.prototype.wa=function(){var a=Lf(this);a&&(this.f=a.recentLaunchedDevice||new hk(null,null),this.b=a.recentDiscoveredDevice||new hk(null,null));if(a=Mf(this))this.h=a.receiverIdToken||gk(),this.j=a.fixedIpList&&a.fixedIpList.split(",")||[],this.a=a.castControlPort||0,this.g=a.lastCloudSinkCheckTimeMillis||0};var jk=null,hk=function(a,b){this.model=a;this.ip=b};var nk=function(a,b){this.jb=this.Nb=this.Ob=this.Ba=this.ib=null;this.bb=new Zj(lk(kk(),b),a);this.hb={};this.ge={};this.Kc=!1};nk.prototype.getId=function(){return this.bb.id};var ok=function(a,b){a.Kc=b;return a};
nk.prototype.update=function(a){if(this.getId()!=a.getId())return!1;var b=!1;this.bb.friendlyName!=a.bb.friendlyName&&(this.bb.friendlyName=a.bb.friendlyName,b=!0);this.Ob!=a.Ob&&(this.Ob=a.Ob,b=!0);this.Nb!=a.Nb&&(this.Nb=a.Nb,b=!0);this.ib!=a.ib&&(this.ib=a.ib,b=!0);this.Ba!=a.Ba&&(this.Ba=a.Ba,b=!0);return b};nk.prototype.Ea=function(){return this.ib};nk.prototype.va=function(){return this.Ba};
var pk=function(a,b){return a.hb[b]||"unknown"},qk=function(a){var b=new nk(a.bb.friendlyName,"");b.bb.id=a.bb.id;b.ib=a.ib;b.Ba=a.Ba;b.Ob=a.Ob;b.Nb=a.Nb;b.jb=a.jb;b.hb=a.hb;b.ge=a.ge;b.Kc=a.Kc;return b};var sk=function(a,b,c,d,e,f){a=lk(kk(),a);this.b=new Zj(a,b,rk(d));this.jb=c||null;this.a=d||null;this.ib=e||null;this.Ba=f||null;this.hb={};this.Xb=!1},tk=function(a){if(!a.jb||!a.Ea())return null;var b=new sk(a.bb.id,a.bb.friendlyName,a.jb,void 0,a.Ea(),kk().a||8009);b.b.id=a.bb.id;b.Xb=!0;return b},uk=function(a,b){if(b=a.update(b.b.friendlyName,b.Ea(),b.va(),b.a))a.Xb=!1;return b};
sk.prototype.update=function(a,b,c,d){var e=!1;this.b.friendlyName!=a&&(this.b.friendlyName=a,e=!0);null!=b&&this.ib!=b&&(this.ib=b,e=!0);null!=c&&this.Ba!=c&&(this.Ba=c,e=!0);null!=d&&this.a!=d&&(this.a=d,e=!0);return e};var rk=function(a){return a&1?"cast":a&32?"cast_audio_group":"cast_audio"};sk.prototype.getId=function(){return this.b.id};
var vk=function(a){var b=new sk("",a.friendlyName,a.modelName,a.capabilities,a.ip,a.port);b.b.id=a.id;b.Xb=a.discoveredByDial;b.hb=a.appStatusMap;for(var c in b.hb)"unavailable"==b.hb[c]&&(b.hb[c]="unavailable_rescan");return b};sk.prototype.Ea=function(){return this.ib};sk.prototype.va=function(){return this.Ba};var wk=function(a,b){return a.hb[b]||"unknown"};var xk={Io:0,yo:1},yk={kr:0,mj:1,iq:2},zk={DIAL:0,No:1,Oo:2,vn:3},Ak={xp:0,TIMEOUT:1,FAILED:2},Bk={ug:0,Fm:1,mn:2,Rn:3,en:4,gp:5,pn:6,Tp:7},Ck={Di:0,SUCCESS:1},Dk=function(a){cb("MediaRouter.Cast.Session.Ended",a,yk)},Ek=function(a){cb("MediaRouter.Cast.Channel.ConnectResult",a,Ck)},Fk=function(a){cb("MediaRouter.Cast.Discovery.Type",a,zk)},Gk=function(a){cb("MediaRouter.Cast.Session.Fail",a,Ak)};var Hk=function(a,b,c,d,e){for(var f=[],g=4;g<arguments.length;++g)f[g-4]=arguments[g];var l=this;this.j=a;this.m=b;this.h=c;this.b=d;this.g=f;this.a=!1;this.f=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];return l.lk.apply(l,[].concat(ma(b)))}};h=Hk.prototype;h.addListener=function(){this.a||(this.a=!0,this.b.addListener.apply(this.b,[].concat([this.f],ma(this.g))))};h.removeListener=function(){this.a&&(this.b.removeListener(this.f),this.a=!1)};
h.Ne=function(a){for(var b=0;b<arguments.length;++b);return!0};h.lk=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];var d=this;Je(this.j);if(!this.Ne.apply(this,[].concat(ma(b))))return!1;Ue(this.h).then(function(a){return a.handleEvent.apply(a,[].concat([d.b],ma(b)))});return this.ef()};h.ea=function(){return"mr.EventListener."+this.m};h.ta=function(){return[this.a]};h.wa=function(){Lf(this)&&this.addListener()};h.ef=function(){};var Ik={serviceType:"_googlecast._tcp.local"},Jk=null,Kk=function(){Jk||(Jk=new Hk(7,"CastMdnsEventListener","mr.cast.SinkDiscoveryService",chrome.mdns.onServiceList,Ik));return Jk},Lk=null,Mk=function(){Lk||(Lk="ChromeOS"==se()?new Hk(9,"CastNetworkListChangedEventListener","mr.cast.SinkDiscoveryService",chrome.networkingPrivate.onNetworkListChanged):new Hk(8,"CastNetworksChangedEventListener","mr.cast.SinkDiscoveryService",chrome.networkingPrivate.onNetworksChanged));return Lk},Nk=null,Ok=null,
Pk=function(){Nk||(Nk=new Hk(2,"CastChannelMessageListener","mr.cast.ChannelService",chrome.cast.channel.onMessage));Ok||(Ok=new Hk(1,"CastChannelErrorListener","mr.cast.ChannelService",chrome.cast.channel.onError));return[Nk,Ok]};var Qk=function(a){return Promise.all(a.map(function(a){return a.then(function(a){return{ic:!0,value:a}},function(a){return{ic:!1,reason:a}})}))};var Rk=function(a,b){this.f=b;this.T=a;this.T.j=this.b.bind(this);this.a=new ti;this.u=new ti;this.g=new ti;this.H=null;this.s=this.B="";this.j=null;this.J=this.w=!1;this.G=[];this.l=Ja("mr.cast.SinkDiscoveryService");this.v=new Set;this.h={Vb:0,Zb:0};this.m=this.A=0};la(Rk,Qe);Rk.prototype.init=function(){Of(this);this.w&&(Sk(this),Tk(this));$e("mr.cast.SinkDiscoveryService",this)};var Sk=function(a){u(a.l,"Start listening to network changes");Mk().addListener()};
Rk.prototype.start=function(){var a=Date.now(),b=Kk();if(b.a){if(6E4>a-this.H)return;u(this.l,"Forcing mdns discovery");chrome.mdns.forceDiscovery(ra);b=Kk();b.removeListener()}else u(this.l,"Adding mdns listener");b.addListener();this.H=a};Rk.prototype.stop=function(){u(this.l,"Stopping...");Kk().removeListener()};
Rk.prototype.handleEvent=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];if(a==chrome.mdns.onServiceList)this.K.apply(this,[].concat(ma(c)));else if(a==chrome.networkingPrivate.onNetworksChanged||a==chrome.networkingPrivate.onNetworkListChanged)Tk(this);else throw Error("Unhandled event");};
var Uk=function(a,b){if(-1==b.serviceName.indexOf("._googlecast."))return null;var c={};b.serviceData.forEach(function(a){0==a.search(/[a-z]{2}=.+/)&&(c[a.substring(0,2)]=a.substring(3))});var d=c.id;if(!d)return t(a.l,"Missing ID"),null;var e=Number(b.serviceHostPort.substring(b.serviceHostPort.indexOf(":")+1));if(isNaN(e)||0>e||65535<e)return t(a.l,"Missing or invalid port"),null;var f=c.fn;if(!f||!b.ipAddress)return t(a.l,"Missing friendly name or IP address"),null;a=Number(c.ca);return new sk(d,
f,c.md||"",isNaN(a)?0:a,b.ipAddress,e)},$k=function(a,b){u(a.l,"addSinks returned "+b.length+" sinks");v(a.l,function(){return"....the list is: "+JSON.stringify(b)});var c=new Set(a.a.Fa());b.forEach(function(b){var d=b.sink_id,f=b.extra_data.cast_media_sink,g=kk().a||8009;b=new sk(d,b.name,f.model_name,f.capabilities,f.ip_address.address.join("."),g);(d=a.a.get(b.getId()))?uk(d,b)&&Vk(a.f,d):Wk(a,b);c.delete(b.getId())});c.forEach(function(b){Xk(a,b)});a.h={Vb:a.a.aa(),Zb:Yk(a)};Zk(a)};
Rk.prototype.K=function(a){var b=this;u(this.l,"Registering "+a.length+" devices");0!=this.m&&(clearTimeout(this.m),this.m=0);a=al(this,a).map(function(a){return bl(b,a,!0)});Qk(a).then(function(){b.h={Vb:b.a.aa(),Zb:Yk(b)};Zk(b)})};var Zk=function(a){0!=a.m||36E5>Date.now()-a.A||(a.m=setTimeout(function(){var b=a.h;db("MediaRouter.Cast.Discovery.KnownDevicesCount",b.Zb);db("MediaRouter.Cast.Discovery.ConnectedDevicesCount",b.Vb);a.A=Date.now();a.m=0},5E3))};Rk.prototype.Rg=function(){return this.h};
var Yk=function(a){var b=a.v.size;ei(a.a.Oa(!1),function(c){a.v.has(c.getId())||b++});return b},bl=function(a,b,c){if(a.g.La(b.getId()))return Promise.resolve();a.g.set(b.getId(),b);return cl(a,b).then(function(d){d?(d=a.a.get(b.getId()),c&&(d?d.Xb&&Fk(3):Fk(1)),Wk(a,b)):(u(a.l,"Inaccessible sink: "+b.getId()),Xk(a,b.getId()));a.g.remove(b.getId())})},dl=function(a,b){return void 0!=a.G.find(function(a){return a.ipAddress==b.ipAddress})},al=function(a,b){var c=[];a.v.clear();b.forEach(function(b){if(!dl(a,
b)&&(b=Uk(a,b))){var d=b.getId();a.v.add(d);if(a.g.La(d)){var f=a.g.get(d);if(f.Ea()==b.Ea()&&f.va()==b.va()){u(a.l,"Sink has pending connection "+d);return}t(a.l,"Pending sink changed ip "+d);a.g.remove(d)}(d=a.a.get(d))?uk(d,b)&&Vk(a.f,d):c.push(b)}});return c},el=function(a,b){var c=a.a.get(b.getId()),d=null,e=b.Ea(),f=b.va();null!=e&&null!=f&&(d=a.u.get(e+":"+f));if(c&&!d){var g=b.Ea(),l=b.va();g&&l&&a.u.remove(g+":"+l)}d&&!c&&a.a.remove(d.getId());a.a.set(b.getId(),b);null!=e&&null!=f&&a.u.set(e+
":"+f,b)},Wk=function(a,b){u(a.l,"Adding sink "+b.getId());el(a,b);a.w||(a.w=!0,Sk(a));a=a.f;a.b.onSinkAvailabilityUpdated(a,1);Vk(a,b);fl(a.g,b);kk().b=new hk(b.jb,b.Ea())},Xk=function(a,b){var c=a.a.get(b);if(c){u(a.l,"Removing sink "+b);a.a.remove(b);b=c.Ea();var d=c.va();null!=b&&null!=d&&a.u.remove(b+":"+d);a.f.T(c)}},gl=function(a){var b=a.a.R();a.a.clear();a.u.clear();b.forEach(a.f.T,a.f)},cl=function(a,b){v(a.l,"Checking access to "+b.getId());return hl(a.T,b).then(function(a){if(b.Xb){var c=
4;a.audioOnly||(c|=1);b.a=c;b.b.iconType=rk(b.a)}return!0},function(){return!1})},il=function(a){u(a.l,"Pruning inactive sinks.");ei(a.a.Oa(!1),function(b){a.g.set(b.getId(),b);cl(a,b).then(function(c){c||Xk(a,b.getId());a.g.remove(b.getId())})})};Rk.prototype.b=function(a){return this.a.get(a,null)};var jl=function(a,b){var c=[];ei(a.a.Oa(!1),function(a){Yj(wk(a,b))&&c.push(a)});return c};Rk.prototype.ea=function(){return"cast.SinkDiscoveryService"};
Rk.prototype.ta=function(){var a=this,b={};ei(this.a.Oa(!0),function(c){var d=a.a.get(c);d={id:d.getId(),ip:d.Ea(),port:d.va(),friendlyName:d.b.friendlyName,modelName:d.jb,capabilities:d.a,discoveredByDial:d.Xb,appStatusMap:d.hb};b[c]=d});return[new kl(b,this.s,this.h),new ll(this.w,this.A)]};
Rk.prototype.wa=function(){var a=Lf(this);if(a&&3==a.version){this.s=a.networkIds;this.h=a.deviceCounts;a=a.sinkMap;this.J=0<Object.keys(a).length;for(var b in a){var c=vk(a[b]);this.b(c.getId())||el(this,c)}il(this)}if(b=Mf(this))this.w=b.hasSavedSinks,this.A=b.lastSinkCountMetricRecordTime||0};
var ml=function(a,b){a.J=0<Object.keys(b).length;for(var c in b){var d=vk(b[c]);a.b(d.getId())||bl(a,d,!1)}},Tk=function(a){u(a.l,"Fetching networks state");a.j&&Wf(a.j);chrome.networkingPrivate.getNetworks({networkType:"All",visible:!0,configured:!0},function(b){for(var c=[],d=0;d<b.length;d++)"Connected"==b[d].ConnectionState&&c.push(b[d].GUID);nl(a,c.sort().join(","))})},nl=function(a,b){u(a.l,function(){return"Update current network "+ol(b)});b!=a.B&&(a.j&&(Nf.delete(a.j.ea()),a.j=null),b?(a.s&&
b!=a.s?gl(a):il(a),a.B=b,a.s=b,a.j=new pl(a,a.B)):a.B="")},ol=function(a){for(var b=0,c=0;c<a.length;c++)b+=a.charCodeAt(c);return b},kl=function(a,b,c){this.sinkMap=a;this.networkIds=b;this.deviceCounts=c;this.version=3},ll=function(a,b){this.hasSavedSinks=a;this.lastSinkCountMetricRecordTime=b},pl=function(a,b){this.a=a;this.b=b;Of(this)};pl.prototype.ea=function(){return"cast.NetworkSink."+this.b};
pl.prototype.ta=function(){var a=this,b=null,c=this.a.ta();c&&(this.a.J||0<this.a.a.aa())&&(b=c[0]);u(this.a.l,function(){return"Saving sink data for network "+ol(a.b)});return[null,b]};pl.prototype.wa=function(){var a=this;u(this.a.l,function(){return"Restoring sink data for network "+ol(a.b)});var b=Mf(this);b&&3==b.version&&ml(this.a,b.sinkMap)};var ql={STOP_MEDIA:"STOP",MEDIA_SET_VOLUME:"SET_VOLUME",MEDIA_GET_STATUS:"GET_STATUS"};var rl=function(){this.type="GET_STATUS";this.requestId=0};var sl=function(a,b,c){this.type="APPLICATION_BROADCAST";this.requestId=0;this.appIds=a;this.namespace=b;this.message=c};var tl=function(a){this.type="LAUNCH";this.requestId=0;this.appId=a;this.language=null};var ul=function(a){this.type="STOP";this.requestId=0;this.sessionId=a||null};var vl=function(a,b){this.requestId=a;this.b=b;this.fi=null};vl.prototype.a=function(){};var wl=function(){this.a=new ti},xl=function(a,b){a.a.set(b.requestId,b);b.fi=setTimeout(function(){a.a.remove(b.requestId);b.a()},b.b)},yl=function(a,b){var c=a.a.get(b);if(!c)return null;clearTimeout(c.fi);a.a.remove(b);return c};var zl=function(a,b){this.b=a;this.f=b;this.a=new wl;this.g=new Nj("cast.RequestIdGenerator")};zl.prototype.init=function(){Of(this.g)};var Bl=function(a,b,c,d){var e=Oj(a.g);b.requestId=e;b=new eb;c=new Al(e,b,m(c)&&0<c?c:6E5,d);xl(a.a,c);return c};
zl.prototype.sendRequest=function(a,b,c,d,e,f){var g=this;if(!Xj.hasOwnProperty(c))return Promise.reject(Error("Custom namespace is not supported"));var l=Bl(this,a,k(d)?d:3E3,e),r=l.qa;Cl(this.b,b,c,a,e||this.f,f).then(null,function(){yl(g.a,l.requestId);r.reject(Dl)});return r.a};zl.prototype.sendMessage=function(a,b,c,d,e,f){var g=this,l=Bl(this,a,k(d)?d:3E3,e),r=l.qa;Cl(this.b,b,c,a,e||this.f,f).then(function(){yl(g.a,l.requestId);r.resolve(!0)},function(){yl(g.a,l.requestId);r.reject(Dl)});return r.a};
var El=function(a,b,c){var d=new tl(b.appId);d.language=b.language?b.language:chrome.i18n.getUILanguage?chrome.i18n.getUILanguage():chrome.runtime.getManifest().default_locale;return a.sendRequest(d,c,Sj,b.requestSessionTimeout)},Fl=Error("Timeout"),Dl=Error("Failed to send message"),Al=function(a,b,c,d){vl.call(this,a,c);this.qa=b;this.sourceId=d};la(Al,vl);Al.prototype.a=function(){this.qa.reject(Fl)};var Hl=function(a){this.a=new ti;a&&Gl(this,a)},Il=function(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+(a[za]||(a[za]=++Ba)):b.substr(0,1)+a};Hl.prototype.aa=function(){return this.a.aa()};Hl.prototype.add=function(a){this.a.set(Il(a),a)};var Gl=function(a,b){b=zi(b);for(var c=b.length,d=0;d<c;d++)a.add(b[d])};h=Hl.prototype;h.removeAll=function(a){a=zi(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};h.remove=function(a){return this.a.remove(Il(a))};h.clear=function(){this.a.clear()};
h.kb=function(){return this.a.kb()};h.contains=function(a){return this.a.La(Il(a))};h.R=function(){return this.a.R()};h.clone=function(){return new Hl(this)};h.equals=function(a){return this.aa()==yi(a)&&Jl(this,a)};var Jl=function(a,b){var c=yi(b);if(a.aa()>c)return!1;!(b instanceof Hl)&&5<c&&(b=new Hl(b));return Ei(a,function(a){var c=b;return c.contains&&"function"==typeof c.contains?c.contains(a):c.Oc&&"function"==typeof c.Oc?c.Oc(a):wa(c)||pa(c)?Ob(c,a):oc(c,a)})};Hl.prototype.Oa=function(){return this.a.Oa(!1)};var Kl=function(a,b){this.type="cast_app";this.originId=window["castApp.eventPage.Message.OriginID"]||void 0;this.subtype=a;this.devices=b;this.logRecord=this.deviceJustSetUp=void 0};p("castApp.eventPage.Message",Kl);var Ll=function(a,b,c){this.ipAddress=a;this.appId=b;this.sessionId=c};Kl.DeviceData=Ll;Kl.DeviceJustSetUp=function(a,b,c,d){this.ipAddress=a;this.name=b;this.udn=c;this.modelName=d};Kl.DeviceCapabilities=function(){};
Kl.LogRecord=function(a,b,c,d){this.levelValue=a;this.msg=b;this.loggerName=c;this.time=d};var Nl=function(a,b){this.f=a;this.g=b;this.b=new ti;this.a=new Hl;this.j=0;this.u=new ti("serviceCheck",this.xk.bind(this),"startDeviceMonitor",this.yk.bind(this),"releaseDeviceMonitor",this.wk.bind(this),"deviceJustSetUp",this.tk.bind(this),"logRecord",this.uk.bind(this));chrome.runtime.onMessage.addListener(this.m.bind(this));chrome.runtime.onMessageExternal.addListener(this.h.bind(this));Ml(this,"serviceReady")};Nl.prototype.l=Ja("castApp.eventPage.Service");
var Ql=function(a){if(Ol(a)){var b=new Hl;ei(a.f.a.Oa(!1),function(a){var c=a.Ea();b.add(c);this.b.La(c)||this.g.sendRequest(new rl,a,Sj)}.bind(a));var c=!1;a.b.Fa().forEach(function(a){b.contains(a)||(this.b.remove(a),c=!0)}.bind(a));c&&Pl(a)}},Ol=function(a){if(0===a.a.aa())return!1;var b=Fa();3E4<b-a.j&&(a.j=b,chrome.tabs.query({url:["chrome://cast/*","chrome-extension://"+chrome.runtime.id+"/cast_setup/*"]},function(a){0===a.length?(u(this.l,"No tabs found. Clearing device monitor clients."),
this.a.clear()):u(this.l,function(){return"Tab check found active tabs: "+a.map(function(a){return a.id})})}.bind(a)));b=a.a.aa();u(a.l,"Monitor client count: "+b);return 0<b};Nl.prototype.m=function(a,b,c){if("object"!==typeof a||"cast_app"!==a.type)return!1;var d=this.u.get(a.subtype);if(!d)return!1;if(!a.originId)return Cb("Missing origin ID in the incoming message."),!1;try{var e=d(a,b,c);e&&c(e)}catch(f){this.l.error("Error while handling request",f)}return!1};
var Ml=function(a,b,c){var d=new Kl(b,c);v(a.l,function(){return"Sending message: "+JSON.stringify(d)});chrome.runtime.sendMessage(d)};h=Nl.prototype;h.xk=function(){Ml(this,"serviceReady")};h.yk=function(a){this.a.contains(a.originId)?u(this.l,"Client: "+a.originId+"already registered, dispatching current device list."):(u(this.l,"Registering monitor client: "+a.originId),this.a.add(a.originId));Pl(this);Rl(this)};h.wk=function(a){u(this.l,"Unregistering monitor client: "+a.originId);this.a.remove(a.originId)};
h.tk=function(a){a=a.deviceJustSetUp;var b=a.udn.replace(/-/g,"").toLowerCase(),c;a.capabilities&&(c=(a.capabilities.audioOutSupported?4:0)|(a.capabilities.videoOutSupported?1:0));c=new sk(b,a.name,a.modelName,c,a.ipAddress,kk().a||8009);bl(this.f,c,!0)};h.uk=function(a){a=a.logRecord;Ma({level:Ra(a.levelValue),F:a.loggerName,time:a.time,message:a.msg})};
var Pl=function(a){var b=a.b.R();Ml(a,"devices",b)},Rl=function(a){v(a.f.l,"Executing forceDiscovery.");chrome.mdns.forceDiscovery(ra);a.f.a.R().forEach(function(a){this.g.sendRequest(new rl,a,Sj)}.bind(a))};Nl.prototype.h=function(a,b,c){switch(a.type){case "handshake":c(new Pj("handshake"));break;case "launch":b=b.tab&&m(b.tab.id)?b.tab.id:null,null===b||"setup"!==a.entryPoint&&"offers"!==a.entryPoint&&"devices"!==a.entryPoint||chrome.tabs.update(b,{url:"chrome://cast#"+a.entryPoint})}};chrome.cast.Lb={CUSTOM_CONTROLLER_SCOPED:"custom_controller_scoped",TAB_AND_ORIGIN_SCOPED:"tab_and_origin_scoped",ORIGIN_SCOPED:"origin_scoped",PAGE_SCOPED:"page_scoped"};p("chrome.cast.AutoJoinPolicy",chrome.cast.Lb);chrome.cast.ce={CREATE_SESSION:"create_session",CAST_THIS_TAB:"cast_this_tab"};p("chrome.cast.DefaultActionPolicy",chrome.cast.ce);chrome.cast.Ub={VIDEO_OUT:"video_out",AUDIO_OUT:"audio_out",VIDEO_IN:"video_in",AUDIO_IN:"audio_in",MULTIZONE_GROUP:"multizone_group"};
p("chrome.cast.Capability",chrome.cast.Ub);chrome.cast.Mb={CANCEL:"cancel",TIMEOUT:"timeout",API_NOT_INITIALIZED:"api_not_initialized",INVALID_PARAMETER:"invalid_parameter",EXTENSION_NOT_COMPATIBLE:"extension_not_compatible",EXTENSION_MISSING:"extension_missing",RECEIVER_UNAVAILABLE:"receiver_unavailable",SESSION_ERROR:"session_error",CHANNEL_ERROR:"channel_error",LOAD_MEDIA_FAILED:"load_media_failed"};p("chrome.cast.ErrorCode",chrome.cast.Mb);chrome.cast.oj={AVAILABLE:"available",UNAVAILABLE:"unavailable"};
p("chrome.cast.ReceiverAvailability",chrome.cast.oj);chrome.cast.Ej={CHROME:"chrome",IOS:"ios",ANDROID:"android"};p("chrome.cast.SenderPlatform",chrome.cast.Ej);chrome.cast.fe={CAST:"cast",DIAL:"dial",HANGOUT:"hangout",CUSTOM:"custom"};p("chrome.cast.ReceiverType",chrome.cast.fe);chrome.cast.xi={RUNNING:"running",STOPPED:"stopped",ERROR:"error"};p("chrome.cast.DialAppState",chrome.cast.xi);chrome.cast.ud={CAST:"cast",STOP:"stop"};p("chrome.cast.ReceiverAction",chrome.cast.ud);
chrome.cast.qg={CONNECTED:"connected",DISCONNECTED:"disconnected",STOPPED:"stopped"};p("chrome.cast.SessionStatus",chrome.cast.qg);chrome.cast.vg={ATTENUATION:"attenuation",FIXED:"fixed",MASTER:"master"};p("chrome.cast.VolumeControlType",chrome.cast.vg);chrome.cast.VERSION=[1,2];p("chrome.cast.VERSION",chrome.cast.VERSION);chrome.cast.gm=!0;p("chrome.cast.usingPresentationApi",chrome.cast.gm);chrome.cast.Error=function(a,b,c){this.code=a;this.description=b||null;this.details=c||null};p("chrome.cast.Error",chrome.cast.Error);chrome.cast.Dj=function(a){this.platform=a;this.packageId=this.url=null};p("chrome.cast.SenderApplication",chrome.cast.Dj);chrome.cast.Image=function(a){this.url=a;this.width=this.height=null};p("chrome.cast.Image",chrome.cast.Image);
chrome.cast.Volume=function(a,b){this.level=k(a)?a:null;this.muted=k(b)?b:null};p("chrome.cast.Volume",chrome.cast.Volume);chrome.cast.oi=function(a,b,c,d,e){this.sessionRequest=a;this.sessionListener=b;this.receiverListener=c;this.autoJoinPolicy=d||chrome.cast.Lb.TAB_AND_ORIGIN_SCOPED;this.defaultActionPolicy=e||chrome.cast.ce.CREATE_SESSION;this.customDialLaunchCallback=null;this.invisibleSender=!1;this.additionalSessionRequests=[]};p("chrome.cast.ApiConfig",chrome.cast.oi);chrome.cast.zi=function(a,b){this.appName=a;this.launchParameter=b||null};p("chrome.cast.DialRequest",chrome.cast.zi);
chrome.cast.gg=function(a,b,c){this.receiver=a;this.appState=b;this.extraData=c||null};p("chrome.cast.DialLaunchData",chrome.cast.gg);chrome.cast.yi=function(a,b){this.doLaunch=a;this.launchParameter=b||null};p("chrome.cast.DialLaunchResponse",chrome.cast.yi);chrome.cast.pg=function(a,b,c){this.appId=a;this.capabilities=va(b)?b:[chrome.cast.Ub.VIDEO_OUT,chrome.cast.Ub.AUDIO_OUT];this.requestSessionTimeout=c||chrome.cast.timeout.requestSession;this.dialRequest=this.language=null};
p("chrome.cast.SessionRequest",chrome.cast.pg);
chrome.cast.Se=function(a,b,c,d){this.label=a;a=b;qb.test(a)&&(-1!=a.indexOf("&")&&(a=a.replace(kb,"&amp;")),-1!=a.indexOf("<")&&(a=a.replace(lb,"&lt;")),-1!=a.indexOf(">")&&(a=a.replace(mb,"&gt;")),-1!=a.indexOf('"')&&(a=a.replace(nb,"&quot;")),-1!=a.indexOf("'")&&(a=a.replace(ob,"&#39;")),-1!=a.indexOf("\x00")&&(a=a.replace(pb,"&#0;")));this.friendlyName=a;this.capabilities=c||[];this.volume=d||null;this.receiverType=chrome.cast.fe.CAST;this.displayStatus=this.isActiveInput=null};
p("chrome.cast.Receiver",chrome.cast.Se);chrome.cast.pj=function(a,b){this.statusText=a;this.appImages=b;this.showStop=null};p("chrome.cast.ReceiverDisplayStatus",chrome.cast.pj);chrome.cast.tg=function(){this.requestSession=6E4;this.sendCustomMessage=this.setReceiverVolume=this.stopSession=this.leaveSession=3E3};p("chrome.cast.Timeout",chrome.cast.tg);chrome.cast.timeout=new chrome.cast.tg;p("chrome.cast.timeout",chrome.cast.timeout);chrome.cast.ag="auto-join";chrome.cast.mg="cast-session_";chrome.cast.media.fc={PAUSE:"pause",SEEK:"seek",STREAM_VOLUME:"stream_volume",STREAM_MUTE:"stream_mute"};p("chrome.cast.media.MediaCommand",chrome.cast.media.fc);chrome.cast.media.wb={GENERIC:0,MOVIE:1,TV_SHOW:2,MUSIC_TRACK:3,PHOTO:4};p("chrome.cast.media.MetadataType",chrome.cast.media.wb);chrome.cast.media.td={IDLE:"IDLE",PLAYING:"PLAYING",PAUSED:"PAUSED",BUFFERING:"BUFFERING"};p("chrome.cast.media.PlayerState",chrome.cast.media.td);
chrome.cast.media.Te={OFF:"REPEAT_OFF",ALL:"REPEAT_ALL",SINGLE:"REPEAT_SINGLE",ALL_AND_SHUFFLE:"REPEAT_ALL_AND_SHUFFLE"};p("chrome.cast.media.RepeatMode",chrome.cast.media.Te);chrome.cast.media.qj={PLAYBACK_START:"PLAYBACK_START",PLAYBACK_PAUSE:"PLAYBACK_PAUSE"};p("chrome.cast.media.ResumeState",chrome.cast.media.qj);chrome.cast.media.rg={BUFFERED:"BUFFERED",LIVE:"LIVE",OTHER:"OTHER"};p("chrome.cast.media.StreamType",chrome.cast.media.rg);
chrome.cast.media.Li={CANCELLED:"CANCELLED",INTERRUPTED:"INTERRUPTED",FINISHED:"FINISHED",ERROR:"ERROR"};p("chrome.cast.media.IdleReason",chrome.cast.media.Li);chrome.cast.media.Qj={TEXT:"TEXT",AUDIO:"AUDIO",VIDEO:"VIDEO"};p("chrome.cast.media.TrackType",chrome.cast.media.Qj);chrome.cast.media.Nj={SUBTITLES:"SUBTITLES",CAPTIONS:"CAPTIONS",DESCRIPTIONS:"DESCRIPTIONS",CHAPTERS:"CHAPTERS",METADATA:"METADATA"};p("chrome.cast.media.TextTrackType",chrome.cast.media.Nj);
chrome.cast.media.Jj={NONE:"NONE",OUTLINE:"OUTLINE",DROP_SHADOW:"DROP_SHADOW",RAISED:"RAISED",DEPRESSED:"DEPRESSED"};p("chrome.cast.media.TextTrackEdgeType",chrome.cast.media.Jj);chrome.cast.media.Oj={NONE:"NONE",NORMAL:"NORMAL",ROUNDED_CORNERS:"ROUNDED_CORNERS"};p("chrome.cast.media.TextTrackWindowType",chrome.cast.media.Oj);
chrome.cast.media.Kj={SANS_SERIF:"SANS_SERIF",MONOSPACED_SANS_SERIF:"MONOSPACED_SANS_SERIF",SERIF:"SERIF",MONOSPACED_SERIF:"MONOSPACED_SERIF",CASUAL:"CASUAL",CURSIVE:"CURSIVE",SMALL_CAPITALS:"SMALL_CAPITALS"};p("chrome.cast.media.TextTrackFontGenericFamily",chrome.cast.media.Kj);chrome.cast.media.Lj={NORMAL:"NORMAL",BOLD:"BOLD",BOLD_ITALIC:"BOLD_ITALIC",ITALIC:"ITALIC"};p("chrome.cast.media.TextTrackFontStyle",chrome.cast.media.Lj);chrome.cast.media.Ii=function(){this.customData=null};p("chrome.cast.media.GetStatusRequest",chrome.cast.media.Ii);chrome.cast.media.aj=function(){this.customData=null};p("chrome.cast.media.PauseRequest",chrome.cast.media.aj);chrome.cast.media.cj=function(){this.customData=null};p("chrome.cast.media.PlayRequest",chrome.cast.media.cj);chrome.cast.media.Cj=function(){this.customData=this.resumeState=this.currentTime=null};p("chrome.cast.media.SeekRequest",chrome.cast.media.Cj);
chrome.cast.media.Fj=function(){this.customData=null};p("chrome.cast.media.StopRequest",chrome.cast.media.Fj);chrome.cast.media.Tj=function(a){this.volume=a;this.customData=null};p("chrome.cast.media.VolumeRequest",chrome.cast.media.Tj);chrome.cast.media.Oi=function(a){this.type="LOAD";this.requestId=0;this.sessionId=null;this.media=a;this.activeTrackIds=null;this.autoplay=!0;this.customData=this.currentTime=null};p("chrome.cast.media.LoadRequest",chrome.cast.media.Oi);
chrome.cast.media.gq=function(a){this.type="PRECACHE";this.requestId=0;this.data=a};chrome.cast.media.Ci=function(a,b){this.requestId=0;this.activeTrackIds=a||null;this.textTrackStyle=b||null};p("chrome.cast.media.EditTracksInfoRequest",chrome.cast.media.Ci);chrome.cast.media.Hi=function(){this.metadataType=this.type=chrome.cast.media.wb.GENERIC;this.releaseDate=this.releaseYear=this.images=this.subtitle=this.title=null};p("chrome.cast.media.GenericMediaMetadata",chrome.cast.media.Hi);
chrome.cast.media.Si=function(){this.metadataType=this.type=chrome.cast.media.wb.MOVIE;this.releaseDate=this.releaseYear=this.images=this.subtitle=this.studio=this.title=null};p("chrome.cast.media.MovieMediaMetadata",chrome.cast.media.Si);chrome.cast.media.Rj=function(){this.metadataType=this.type=chrome.cast.media.wb.TV_SHOW;this.originalAirdate=this.releaseYear=this.images=this.episode=this.episodeNumber=this.season=this.seasonNumber=this.episodeTitle=this.title=this.seriesTitle=null};
p("chrome.cast.media.TvShowMediaMetadata",chrome.cast.media.Rj);chrome.cast.media.Ti=function(){this.metadataType=this.type=chrome.cast.media.wb.MUSIC_TRACK;this.releaseDate=this.releaseYear=this.images=this.discNumber=this.trackNumber=this.artistName=this.songName=this.composer=this.artist=this.albumArtist=this.title=this.albumName=null};p("chrome.cast.media.MusicTrackMediaMetadata",chrome.cast.media.Ti);
chrome.cast.media.bj=function(){this.metadataType=this.type=chrome.cast.media.wb.PHOTO;this.creationDateTime=this.height=this.width=this.longitude=this.latitude=this.images=this.location=this.artist=this.title=null};p("chrome.cast.media.PhotoMediaMetadata",chrome.cast.media.bj);chrome.cast.media.Ri=function(a,b){this.contentId=a;this.streamType=chrome.cast.media.rg.BUFFERED;this.contentType=b;this.customData=this.textTrackStyle=this.tracks=this.duration=this.metadata=null};
p("chrome.cast.media.MediaInfo",chrome.cast.media.Ri);chrome.cast.media.fj=function(a){this.itemId=null;this.media=a;this.autoplay=!0;this.startTime=0;this.playbackDuration=null;this.preloadTime=0;this.customData=this.activeTrackIds=null};p("chrome.cast.media.QueueItem",chrome.cast.media.fj);chrome.cast.media.vi="CC1AD845";p("chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID",chrome.cast.media.vi);chrome.cast.media.timeout={};chrome.cast.media.timeout.load=0;p("chrome.cast.media.timeout.load",chrome.cast.media.timeout.load);
chrome.cast.media.timeout.za=0;p("chrome.cast.media.timeout.getStatus",chrome.cast.media.timeout.za);chrome.cast.media.timeout.play=0;p("chrome.cast.media.timeout.play",chrome.cast.media.timeout.play);chrome.cast.media.timeout.pause=0;p("chrome.cast.media.timeout.pause",chrome.cast.media.timeout.pause);chrome.cast.media.timeout.seek=0;p("chrome.cast.media.timeout.seek",chrome.cast.media.timeout.seek);chrome.cast.media.timeout.stop=0;p("chrome.cast.media.timeout.stop",chrome.cast.media.timeout.stop);
chrome.cast.media.timeout.Kb=0;p("chrome.cast.media.timeout.setVolume",chrome.cast.media.timeout.Kb);chrome.cast.media.timeout.gf=0;p("chrome.cast.media.timeout.editTracksInfo",chrome.cast.media.timeout.gf);chrome.cast.media.timeout.ql=0;p("chrome.cast.media.timeout.queue",chrome.cast.media.timeout.ql);chrome.cast.media.Pj=function(a,b){this.trackId=a;this.trackContentType=this.trackContentId=null;this.type=b;this.customData=this.subtype=this.language=this.name=null};p("chrome.cast.media.Track",chrome.cast.media.Pj);
chrome.cast.media.Mj=function(){this.customData=this.fontStyle=this.fontGenericFamily=this.fontFamily=this.fontScale=this.windowRoundedCornerRadius=this.windowColor=this.windowType=this.edgeColor=this.edgeType=this.backgroundColor=this.foregroundColor=null};p("chrome.cast.media.TextTrackStyle",chrome.cast.media.Mj);chrome.cast.media.hj=function(a){this.type="QUEUE_LOAD";this.sessionId=this.requestId=null;this.items=a;this.startIndex=0;this.repeatMode=chrome.cast.media.Te.OFF;this.customData=null};
p("chrome.cast.media.QueueLoadRequest",chrome.cast.media.hj);chrome.cast.media.ej=function(a){this.type="QUEUE_INSERT";this.sessionId=this.requestId=null;this.items=a;this.customData=this.insertBefore=null};p("chrome.cast.media.QueueInsertItemsRequest",chrome.cast.media.ej);chrome.cast.media.lj=function(a){this.type="QUEUE_UPDATE";this.sessionId=this.requestId=null;this.items=a;this.customData=null};p("chrome.cast.media.QueueUpdateItemsRequest",chrome.cast.media.lj);
chrome.cast.media.gj=function(){this.type="QUEUE_UPDATE";this.customData=this.jump=this.currentItemId=this.sessionId=this.requestId=null};p("chrome.cast.media.QueueJumpRequest",chrome.cast.media.gj);chrome.cast.media.kj=function(){this.type="QUEUE_UPDATE";this.customData=this.repeatMode=this.sessionId=this.requestId=null};p("chrome.cast.media.QueueSetPropertiesRequest",chrome.cast.media.kj);
chrome.cast.media.ij=function(a){this.type="QUEUE_REMOVE";this.sessionId=this.requestId=null;this.itemIds=a;this.customData=null};p("chrome.cast.media.QueueRemoveItemsRequest",chrome.cast.media.ij);chrome.cast.media.jj=function(a){this.type="QUEUE_REORDER";this.sessionId=this.requestId=null;this.itemIds=a;this.customData=this.insertBefore=null};p("chrome.cast.media.QueueReorderItemsRequest",chrome.cast.media.jj);chrome.cast.media.I=function(a,b){this.sessionId=a;this.mediaSessionId=b;this.media=null;this.playbackRate=1;this.playerState=chrome.cast.media.td.IDLE;this.currentTime=0;this.supportedMediaCommands=[];this.volume=new chrome.cast.Volume;this.items=this.preloadedItemId=this.loadingItemId=this.currentItemId=this.customData=this.activeTrackIds=this.idleReason=null;this.repeatMode=chrome.cast.media.Te.OFF};p("chrome.cast.media.Media",chrome.cast.media.I);chrome.cast.media.I.prototype.za=function(){};
chrome.cast.media.I.prototype.getStatus=chrome.cast.media.I.prototype.za;chrome.cast.media.I.prototype.play=function(){};chrome.cast.media.I.prototype.play=chrome.cast.media.I.prototype.play;chrome.cast.media.I.prototype.il=function(){};chrome.cast.media.I.prototype.playWithContext=chrome.cast.media.I.prototype.il;chrome.cast.media.I.prototype.pause=function(){};chrome.cast.media.I.prototype.pause=chrome.cast.media.I.prototype.pause;chrome.cast.media.I.prototype.hl=function(){};
chrome.cast.media.I.prototype.pauseWithContext=chrome.cast.media.I.prototype.hl;chrome.cast.media.I.prototype.seek=function(){};chrome.cast.media.I.prototype.seek=chrome.cast.media.I.prototype.seek;chrome.cast.media.I.prototype.stop=function(){};chrome.cast.media.I.prototype.stop=chrome.cast.media.I.prototype.stop;chrome.cast.media.I.prototype.Kb=function(){};chrome.cast.media.I.prototype.setVolume=chrome.cast.media.I.prototype.Kb;chrome.cast.media.I.prototype.gf=function(){};
chrome.cast.media.I.prototype.editTracksInfo=chrome.cast.media.I.prototype.gf;chrome.cast.media.I.prototype.sl=function(){};chrome.cast.media.I.prototype.queueInsertItems=chrome.cast.media.I.prototype.sl;chrome.cast.media.I.prototype.rl=function(){};chrome.cast.media.I.prototype.queueAppendItem=chrome.cast.media.I.prototype.rl;chrome.cast.media.I.prototype.Cl=function(){};chrome.cast.media.I.prototype.queueUpdateItems=chrome.cast.media.I.prototype.Cl;chrome.cast.media.I.prototype.xl=function(){};
chrome.cast.media.I.prototype.queuePrev=chrome.cast.media.I.prototype.xl;chrome.cast.media.I.prototype.wl=function(){};chrome.cast.media.I.prototype.queueNext=chrome.cast.media.I.prototype.wl;chrome.cast.media.I.prototype.tl=function(a){Sl(this,a)};chrome.cast.media.I.prototype.queueJumpToItem=chrome.cast.media.I.prototype.tl;chrome.cast.media.I.prototype.Bl=function(){};chrome.cast.media.I.prototype.queueSetRepeatMode=chrome.cast.media.I.prototype.Bl;chrome.cast.media.I.prototype.zl=function(){};
chrome.cast.media.I.prototype.queueRemoveItems=chrome.cast.media.I.prototype.zl;chrome.cast.media.I.prototype.yl=function(a){Sl(this,a)};chrome.cast.media.I.prototype.queueRemoveItem=chrome.cast.media.I.prototype.yl;chrome.cast.media.I.prototype.Al=function(){};chrome.cast.media.I.prototype.queueReorderItems=chrome.cast.media.I.prototype.Al;chrome.cast.media.I.prototype.vl=function(a,b,c,d){a=Sl(this,a);0>a||(0>b?d&&d(new chrome.cast.Error(chrome.cast.Mb.INVALID_PARAMETER)):a==b&&c&&c())};
chrome.cast.media.I.prototype.queueMoveItemToNewIndex=chrome.cast.media.I.prototype.vl;chrome.cast.media.I.prototype.dm=function(a){return-1<this.supportedMediaCommands.indexOf(a)};chrome.cast.media.I.prototype.supportsCommand=chrome.cast.media.I.prototype.dm;chrome.cast.media.I.prototype.nk=function(){return this.currentTime};chrome.cast.media.I.prototype.getEstimatedTime=chrome.cast.media.I.prototype.nk;chrome.cast.media.I.prototype.We=function(){};
chrome.cast.media.I.prototype.addUpdateListener=chrome.cast.media.I.prototype.We;chrome.cast.media.I.prototype.Xe=function(){};chrome.cast.media.I.prototype.addUpdateListenerWithContext=chrome.cast.media.I.prototype.Xe;chrome.cast.media.I.prototype.Nf=function(){};chrome.cast.media.I.prototype.removeUpdateListener=chrome.cast.media.I.prototype.Nf;chrome.cast.media.I.prototype.Of=function(){};chrome.cast.media.I.prototype.removeUpdateListenerWithContext=chrome.cast.media.I.prototype.Of;
var Sl=function(a,b){return Lb(a.items,function(a){return a.itemId==b})};var Tl=function(a,b,c){this.sessionId=a;this.namespaceName=b;this.message=c};var Ul=function(a){this.a=a;this.l=Ja("mr.cast.ReceiverStatusQuerier")},Vl=function(a,b){return Jc(new Hc(n(a.b,a,b),3500,5),2).start().then(null,function(c){u(a.l,"Failed to get receiver status from "+b.getId());throw c;})};Ul.prototype.b=function(a){u(this.l,"Query receiver status: "+a.getId());return this.a.sendRequest(new rl,a,Sj)};var Wl=function(a,b){this.type="SET_VOLUME";this.requestId=0;this.volume=a;this.expectedVolume=b||null};chrome.cast.L=function(a,b,c,d,e){this.sessionId=a;this.appId=b;this.displayName=c;this.statusText=null;this.appImages=d;this.receiver=e;this.senderApps=[];this.namespaces=[];this.media=[];this.status=chrome.cast.qg.CONNECTED;this.transportId=""};p("chrome.cast.Session",chrome.cast.L);chrome.cast.L.prototype.Yl=function(a,b,c){this.Xh(null,a,b,c)};chrome.cast.L.prototype.setReceiverVolumeLevel=chrome.cast.L.prototype.Yl;
chrome.cast.L.prototype.Xh=function(a,b,c,d){b=new Wl(new chrome.cast.Volume(b,null),this.receiver.volume);a.setReceiverVolume(this.sessionId,b,c,d)};chrome.cast.L.prototype.setReceiverVolumeLevelWithContext=chrome.cast.L.prototype.Xh;chrome.cast.L.prototype.Xl=function(a,b,c){this.Wh(0,a,b,c)};chrome.cast.L.prototype.setReceiverMuted=chrome.cast.L.prototype.Xl;
chrome.cast.L.prototype.Wh=function(a,b,c,d){a=new Wl(new chrome.cast.Volume(null,b),this.receiver.volume);null.setReceiverVolume(this.sessionId,a,c,d)};chrome.cast.L.prototype.setReceiverMutedWithContext=chrome.cast.L.prototype.Wh;chrome.cast.L.prototype.leave=function(a,b){null.leaveSession(this.sessionId,a,b)};chrome.cast.L.prototype.leave=chrome.cast.L.prototype.leave;chrome.cast.L.prototype.stop=function(){};chrome.cast.L.prototype.stop=chrome.cast.L.prototype.stop;
chrome.cast.L.prototype.am=function(){};chrome.cast.L.prototype.stopWithContext=chrome.cast.L.prototype.am;chrome.cast.L.prototype.sendMessage=function(){};chrome.cast.L.prototype.sendMessage=chrome.cast.L.prototype.sendMessage;chrome.cast.L.prototype.Rl=function(){};chrome.cast.L.prototype.sendMessageWithContext=chrome.cast.L.prototype.Rl;chrome.cast.L.prototype.We=function(){};chrome.cast.L.prototype.addUpdateListener=chrome.cast.L.prototype.We;chrome.cast.L.prototype.Xe=function(){};
chrome.cast.L.prototype.addUpdateListenerWithContext=chrome.cast.L.prototype.Xe;chrome.cast.L.prototype.Nf=function(){};chrome.cast.L.prototype.removeUpdateListener=chrome.cast.L.prototype.Nf;chrome.cast.L.prototype.Of=function(){};chrome.cast.L.prototype.removeUpdateListenerWithContext=chrome.cast.L.prototype.Of;chrome.cast.L.prototype.Yj=function(){};chrome.cast.L.prototype.addMessageListener=chrome.cast.L.prototype.Yj;chrome.cast.L.prototype.Zj=function(){};
chrome.cast.L.prototype.addMessageListenerWithContext=chrome.cast.L.prototype.Zj;chrome.cast.L.prototype.Wj=function(){};chrome.cast.L.prototype.addMediaListener=chrome.cast.L.prototype.Wj;chrome.cast.L.prototype.Xj=function(){};chrome.cast.L.prototype.addMediaListenerWithContext=chrome.cast.L.prototype.Xj;chrome.cast.L.prototype.Jl=function(){};chrome.cast.L.prototype.removeMediaListener=chrome.cast.L.prototype.Jl;chrome.cast.L.prototype.Kl=function(){};
chrome.cast.L.prototype.removeMediaListenerWithContext=chrome.cast.L.prototype.Kl;chrome.cast.L.prototype.Ll=function(){};chrome.cast.L.prototype.removeMessageListener=chrome.cast.L.prototype.Ll;chrome.cast.L.prototype.Ml=function(){};chrome.cast.L.prototype.removeMessageListenerWithContext=chrome.cast.L.prototype.Ml;chrome.cast.L.prototype.Ck=function(a){a.sessionId=this.sessionId};chrome.cast.L.prototype.loadMedia=chrome.cast.L.prototype.Ck;chrome.cast.L.prototype.ul=function(a){a.sessionId=this.sessionId};
chrome.cast.L.prototype.queueLoad=chrome.cast.L.prototype.ul;var Zl=function(a,b){if(!b.applications||1!=b.applications.length)return null;var c=b.applications[0];a=Xl(a);a=new chrome.cast.L(c.sessionId,c.appId,c.displayName,c.appImages,a);a.senderApps=c.senderApps;a.namespaces=c.namespaces||[];a.transportId=c.transportId;a.statusText=c.statusText;if(!a.sessionId||!(a.namespaces&&0!=a.namespaces.length||Yl(a)))return null;a.receiver.volume=b.volume;"boolean"==typeof b.isActiveInput&&(a.receiver.isActiveInput=b.isActiveInput);return a},$l=function(a){var b=
[];if(!a)return b;a&1&&b.push(chrome.cast.Ub.VIDEO_OUT);a&2&&b.push(chrome.cast.Ub.VIDEO_IN);a&4&&b.push(chrome.cast.Ub.AUDIO_OUT);a&8&&b.push(chrome.cast.Ub.AUDIO_IN);a&32&&b.push(chrome.cast.Ub.MULTIZONE_GROUP);return b},Xl=function(a){return new chrome.cast.Se(a.getId(),a.b.friendlyName,$l(a.a))},am=function(a,b){if(a.statusText!=b.statusText)return!0;var c=a.namespaces||[],d=b.namespaces||[];if(c.length!=d.length)return!0;for(var e={index:0};e.index<c.length;e={index:e.index},e.index++)if(!d.some(function(a){return function(b){return b.name==
c[a.index].name}}(e)))return!0;return a.receiver.volume.level!==b.receiver.volume.level||a.receiver.volume.muted!==b.receiver.volume.muted?!0:!1},bm=function(a){va(a)?a.forEach(bm):ya(a)&&Object.keys(a).forEach(function(b){null===a[b]?delete a[b]:(ya(a[b])||va(a[b]))&&bm(a[b])})},cm=function(a){return a.namespaces.some(function(a){return a.name==Uj})},dm=["MultizoneLeader","MultizoneFollower"],Yl=function(a){return null!==a&&"MultizoneLeader"==a.appId},em=function(a){return"E8C28D3C"==a||"00000000-0000-0000-0000-000000000000"==
a};var fm=function(a,b,c){this.F=Ja("mr.MediaRouteController."+a);this.g=new mojo.Binding(mojo.MediaController,this,b);this.f=c;this.a=new mojo.MediaStatus({title:"",description:"",duration:new mojo.TimeDelta({microseconds:0}),current_time:new mojo.TimeDelta({microseconds:0})});this.h=!1;this.g.setConnectionErrorHandler(this.m.bind(this));this.f.ptr.setConnectionErrorHandler(this.m.bind(this))};fm.prototype.m=function(){this.F.error("Encountered Mojo connection error.");this.sa();this.j()};
fm.prototype.sa=function(){this.h||(this.h=!0,this.g&&(this.g.close(),this.g=null),this.f&&(this.f.ptr.reset(),this.f=null))};var gm=function(a){if(a.f)a.f.onMediaStatusUpdated(a.a)};fm.prototype.j=function(){};fm.prototype.play=function(){};fm.prototype.play=fm.prototype.play;fm.prototype.pause=function(){};fm.prototype.pause=fm.prototype.pause;fm.prototype.Fc=function(){};fm.prototype.setMute=fm.prototype.Fc;fm.prototype.Kb=function(){};fm.prototype.setVolume=fm.prototype.Kb;fm.prototype.seek=function(){};
fm.prototype.seek=fm.prototype.seek;var hm=function(a){var b=new URL(a);a={};a.scheme=b.protocol.replace(":","");a.host=b.hostname;b=b.port?Number.parseInt(b.port,10):0;switch(a.scheme){case "http":a.port=b||80;break;case "https":a.port=b||443;break;default:throw Error("Scheme must be http or https");}a.suborigin="";return new mojo.Origin(a)},im=function(a){return new mojo.TimeDelta({microseconds:Math.floor(1E6*a)})};var jm=function(a,b,c,d){this.type=a;this.mediaSessionId=b;this.requestId=0;this.sessionId=c;this.currentTime=d},lm=function(a,b,c,d){fm.call(this,"CastRouteController",a,b);this.session=c;this.b=d;km(this)};la(lm,fm);
var km=function(a){var b=mm(a);b&&nm(a,b);a.a.description=a.session.displayName.substring(0,256);a.session.statusText&&a.session.statusText!==a.session.displayName&&(a.a.title=a.session.statusText.substring(0,256));a.a.volume=null===a.session.receiver.volume.level?0:a.session.receiver.volume.level;a.a.is_muted=!!a.session.receiver.volume.muted;a.a.can_mute=a.session.receiver.volume.controlType!==chrome.cast.vg.FIXED;a.a.can_set_volume=a.a.can_mute;gm(a)};
lm.prototype.j=function(){var a=this.b;om(a.a,this.session.sessionId);pm(a.f)};lm.prototype.play=function(){var a=mm(this);this.a.can_play_pause&&a&&this.a.play_state===mojo.MediaStatus.PlayState.PAUSED&&qm(this.b,this.session,new jm("PLAY",a.mediaSessionId,this.session.sessionId))};lm.prototype.play=lm.prototype.play;
lm.prototype.pause=function(){var a=mm(this);this.a.can_play_pause&&a&&this.a.play_state!==mojo.MediaStatus.PlayState.PAUSED&&qm(this.b,this.session,new jm("PAUSE",a.mediaSessionId,this.session.sessionId))};lm.prototype.pause=lm.prototype.pause;lm.prototype.seek=function(a){var b=mm(this);a=a?a.microseconds/1E6:0;var c;if(c=this.a.can_seek&&b&&0<=a)c=this.a.duration,c=a<=(c?c.microseconds/1E6:0);c&&qm(this.b,this.session,new jm("SEEK",b.mediaSessionId,this.session.sessionId,a))};
lm.prototype.seek=lm.prototype.seek;lm.prototype.Fc=function(a){this.a.can_mute&&a!==this.a.is_muted&&rm(this.b,this.session,new chrome.cast.Volume(null,a))};lm.prototype.setMute=lm.prototype.Fc;lm.prototype.Kb=function(a){this.a.can_set_volume&&0<=a&&1>=a&&rm(this.b,this.session,new chrome.cast.Volume(a))};lm.prototype.setVolume=lm.prototype.Kb;
var mm=function(a){return a.session.media.find(function(a){return!a.idleReason})||null},nm=function(a,b){var c=b.media&&(b.media.metadata||b.media.a);c&&c.title?a.a.title=c.title.substring(0,256):a.a.title="";a.a.can_play_pause=b.supportedMediaCommands.includes(chrome.cast.media.fc.PAUSE);a.a.can_seek=b.supportedMediaCommands.includes(chrome.cast.media.fc.SEEK);c=b.playerState;a.a.play_state=c===chrome.cast.media.td.PLAYING?mojo.MediaStatus.PlayState.PLAYING:c===chrome.cast.media.td.PAUSED?mojo.MediaStatus.PlayState.PAUSED:
mojo.MediaStatus.PlayState.BUFFERING;a.a.current_time=b.currentTime?im(b.currentTime):im(0);a.a.duration=b.media&&b.media.duration?im(b.media.duration):im(0)};var sm=function(a){this.b=a;this.l=Ja("mr.cast.SessionLauncher")},tm=function(a,b,c){cb("MediaRouter.Cast.Session.Type",0,xk);return El(a.b,b,c).then(a.a.bind(a,c),function(a){a&&Fl==a?Gk(1):Gk(0);throw a;})};sm.prototype.a=function(a,b){v(this.l,"Got launch result from "+a.getId());if("LAUNCH_ERROR"==b.type)throw Gk(2),Error(b.reason);a=Zl(a,b.status);u(this.l,"Launched session: "+a.sessionId);return a};var um=function(a,b,c){this.type=a;this.message=b;this.sequenceNumber=k(c)?c:-1;this.timeoutMillis=0;this.clientId=""};var vm=function(a,b){this.g=a;this.a=b;this.f=[];this.b=new wl},xm=function(a,b){return(a=wm(a.a,b))?a.routeId:null};vm.prototype.listen=function(a,b){this.f[a]=b};var zm=function(a,b,c,d){v(ym,"Sending to "+c);v(ym,JSON.stringify(d));d.clientId=c;a=a.g;a.b.Qb(a,b,d)},Am=function(a,b,c){var d=wm(a.a,b);d&&d.a?zm(a,d.routeId,b,c):a.connect(b).then(function(d){d?(d=xm(a,b))?zm(a,d,b,c):t(ym,"No route for "+b):t(ym,"No connected client "+b)},null)};
vm.prototype.connect=function(a){var b=wm(this.a,a);if(null!=b&&b.a)return Promise.resolve(!0);b=xm(this,a);if(!b)return t(ym,"No route for client "+a),Promise.resolve(!1);if(a=this.b.a.get(b,null))return a.qa.a;a=new eb;xl(this.b,new Bm(b,a));return a.a};var ym=Ja("mr.cast.ApiMessenger"),Bm=function(a,b){vl.call(this,a,3E4);this.qa=b};la(Bm,vl);Bm.prototype.a=function(){this.qa.resolve(!1)};var Cm=function(a,b){this.qb=this.g=this.b="";this.Ba=null;this.h=this.a="";this.f=!1;var c;a instanceof Cm?(this.f=k(b)?b:a.f,Dm(this,a.b),this.g=a.g,Em(this,a.qb),Fm(this,a.va()),Gm(this,a.a),Hm(this,a.j.clone()),Im(this,a.h)):a&&(c=String(a).match(kj))?(this.f=!!b,Dm(this,c[1]||"",!0),this.g=Jm(c[2]||""),Em(this,c[3]||"",!0),Fm(this,c[4]),Gm(this,c[5]||"",!0),Hm(this,c[6]||"",!0),Im(this,c[7]||"",!0)):(this.f=!!b,this.j=new Km(null,0,this.f))};
Cm.prototype.toString=function(){var a=[],b=this.b;b&&a.push(Lm(b,Mm,!0),":");var c=this.qb;if(c||"file"==b)a.push("//"),(b=this.g)&&a.push(Lm(b,Mm,!0),"@"),a.push(encodeURIComponent(String(c)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c=this.va(),null!=c&&a.push(":",String(c));if(c=this.a)this.qb&&"/"!=c.charAt(0)&&a.push("/"),a.push(Lm(c,"/"==c.charAt(0)?Nm:Om,!0));(c=this.j.toString())&&a.push("?",c);(c=this.h)&&a.push("#",Lm(c,Pm));return a.join("")};
Cm.prototype.resolve=function(a){var b=this.clone(),c=!!a.b;c?Dm(b,a.b):c=!!a.g;c?b.g=a.g:c=!!a.qb;c?Em(b,a.qb):c=null!=a.Ba;var d=a.a;if(c)Fm(b,a.va());else if(c=!!a.a){if("/"!=d.charAt(0))if(this.qb&&!this.a)d="/"+d;else{var e=b.a.lastIndexOf("/");-1!=e&&(d=b.a.substr(0,e+1)+d)}e=d;if(".."==e||"."==e)d="";else if(-1!=e.indexOf("./")||-1!=e.indexOf("/.")){for(var d=0==e.lastIndexOf("/",0),e=e.split("/"),f=[],g=0;g<e.length;){var l=e[g++];"."==l?d&&g==e.length&&f.push(""):".."==l?((1<f.length||1==
f.length&&""!=f[0])&&f.pop(),d&&g==e.length&&f.push("")):(f.push(l),d=!0)}d=f.join("/")}else d=e}c?Gm(b,d):c=""!==a.j.toString();c?Hm(b,a.j.clone()):c=!!a.h;c&&Im(b,a.h);return b};Cm.prototype.clone=function(){return new Cm(this)};var Dm=function(a,b,c){a.b=c?Jm(b,!0):b;a.b&&(a.b=a.b.replace(/:$/,""))},Em=function(a,b,c){a.qb=c?Jm(b,!0):b};Cm.prototype.va=function(){return this.Ba};
var Fm=function(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.Ba=b}else a.Ba=null},Gm=function(a,b,c){a.a=c?Jm(b,!0):b},Hm=function(a,b,c){b instanceof Km?(a.j=b,Qm(a.j,a.f)):(c||(b=Lm(b,Rm)),a.j=new Km(b,0,a.f))},Im=function(a,b,c){a.h=c?Jm(b):b},Jm=function(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""},Lm=function(a,b,c){return pa(a)?(a=encodeURI(a).replace(b,Sm),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null},Sm=function(a){a=
a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)},Mm=/[#\/\?@]/g,Om=/[\#\?:]/g,Nm=/[\#\?]/g,Rm=/[\#\?@]/g,Pm=/#/g,Km=function(a,b,c){this.b=this.a=null;this.f=a||null;this.g=!!c},Tm=function(a){a.a||(a.a=new ti,a.b=0,a.f&&lj(a.f,function(b,c){a.add(decodeURIComponent(b.replace(/\+/g," ")),c)}))},Vm=function(a){var b=Ai(a);if("undefined"==typeof b)throw Error("Keys are undefined");var c=new Km(null,0,void 0);a=zi(a);for(var d=0;d<b.length;d++){var e=b[d],f=a[d];va(f)?Um(c,e,f):
c.add(e,f)}return c};h=Km.prototype;h.aa=function(){Tm(this);return this.b};h.add=function(a,b){Tm(this);this.f=null;a=Wm(this,a);var c=this.a.get(a);c||this.a.set(a,c=[]);c.push(b);this.b+=1;return this};h.remove=function(a){Tm(this);a=Wm(this,a);return this.a.La(a)?(this.f=null,this.b-=this.a.get(a).length,this.a.remove(a)):!1};h.clear=function(){this.a=this.f=null;this.b=0};h.kb=function(){Tm(this);return 0==this.b};h.La=function(a){Tm(this);a=Wm(this,a);return this.a.La(a)};
h.Oc=function(a){var b=this.R();return Ob(b,a)};h.forEach=function(a,b){Tm(this);this.a.forEach(function(c,d){w(c,function(c){a.call(b,c,d,this)},this)},this)};h.Fa=function(){Tm(this);for(var a=this.a.R(),b=this.a.Fa(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};h.R=function(a){Tm(this);var b=[];if(pa(a))this.La(a)&&(b=Yb(b,this.a.get(Wm(this,a))));else{a=this.a.R();for(var c=0;c<a.length;c++)b=Yb(b,a[c])}return b};
h.set=function(a,b){Tm(this);this.f=null;a=Wm(this,a);this.La(a)&&(this.b-=this.a.get(a).length);this.a.set(a,[b]);this.b+=1;return this};h.get=function(a,b){a=a?this.R(a):[];return 0<a.length?String(a[0]):b};var Um=function(a,b,c){a.remove(b);0<c.length&&(a.f=null,a.a.set(Wm(a,b),x(c)),a.b+=c.length)};
Km.prototype.toString=function(){if(this.f)return this.f;if(!this.a)return"";for(var a=[],b=this.a.Fa(),c=0;c<b.length;c++)for(var d=b[c],e=encodeURIComponent(String(d)),d=this.R(d),f=0;f<d.length;f++){var g=e;""!==d[f]&&(g+="="+encodeURIComponent(String(d[f])));a.push(g)}return this.f=a.join("&")};Km.prototype.clone=function(){var a=new Km;a.f=this.f;this.a&&(a.a=this.a.clone(),a.b=this.b);return a};
var Wm=function(a,b){b=String(b);a.g&&(b=b.toLowerCase());return b},Qm=function(a,b){b&&!a.g&&(Tm(a),a.f=null,a.a.forEach(function(a,b){var c=b.toLowerCase();b!=c&&(this.remove(b),Um(this,c,a))},a));a.g=b};Km.prototype.extend=function(a){for(var b=0;b<arguments.length;b++)Ci(arguments[b],function(a,b){this.add(b,a)},this)};var Xm=function(a,b,c,d,e,f,g,l,r,y){this.j=a;this.a=b||null;this.b=c||null;this.f=d||null;this.g=k(e)?e:null;this.w=f||null;this.s=g||null;this.u=l||!1;this.m=r||null;this.h=y||null},Ym=function(a,b){return(a=a.match(b+"=([^/]*)"))?a[1]:null},$m=function(a){a=a.match(/__castAppId__=([^/]*)/g);return null==a?[]:Gb(Hb(a,function(a){a=Ym(a,"__castAppId__");if(!a)return null;a=a.match(Zm);if(!a||0==a.length)return null;var b=[];3==a.length&&a[2]&&(b=a[2].split(","));return{appId:a[1],capabilities:b}}),
function(a){return null!=a})},an=function(a){return Ym(a,"__castClientId__")},bn=function(a){return Hb(a.j,function(a){return a.appId})},cn=function(a){return a.b?a.b:chrome.cast.Lb.TAB_AND_ORIGIN_SCOPED};
Xm.prototype.toString=function(){var a=new Cm;Dm(a,"https");Em(a,"google.com");Gm(a,"/cast");var b=[];w(this.j,function(a){var c="__castAppId__="+a.appId;a.capabilities&&0<a.capabilities.length&&(c=c+"("+a.capabilities.join(","),c+=")");b.push(c)});this.a&&b.push("__castClientId__="+this.a);this.b&&b.push("__castAutoJoinPolicy__="+this.b);this.f&&b.push("__castDefaultActionPolicy__="+this.f);null!=this.g&&b.push("__castLaunchTimeout__="+this.g);this.w&&b.push("__dialAppName__="+this.w);this.s&&b.push("__dialPostData__="+
this.s);this.u&&b.push("__castInvisibleSender__=true");this.m&&(b.push("__castBroadcastNamespace__="+this.m),b.push("__castBroadcastId__="+Math.random()));this.h&&b.push("__castBroadcastMessage__="+encodeURIComponent(JSON.stringify(this.h)));Im(a,b.join("/"));return a.toString()};
var en=function(a,b){a=bn(a);var c=dn(b);return Jb(a,function(a){return Ob(c,a)})},fn=function(a){a=new Cm(a);if("https"!=a.b||"google.com"!=a.qb||"/cast"!=a.a)return null;var b=a.h;a=$m(b);if(!a||0==a.length)return null;var c=an(b),d=Ym(b,"__castAutoJoinPolicy__"),e=Ym(b,"__castDefaultActionPolicy__");var f=Ym(b,"__castLaunchTimeout__");null==f?f=null:(f=Number(f),f=!isNaN(f)&&0<=f?f:null);var g=Ym(b,"__dialAppName__"),l=Ym(b,"__dialPostData__"),r=Ym(b,"__castInvisibleSender__"),r=null===r?null:
"true"==r,y=Ym(b,"__castBroadcastNamespace__"),b=(b=Ym(b,"__castBroadcastMessage__"))?JSON.parse(decodeURIComponent(b)):null;return new Xm(a,c,d,e,f,g,l,r,y,b)},dn=function(a){return(a=fn(a))?bn(a):null},gn=function(a){return(a=fn(a))?a.a:null},Zm=/(^\w+)(?:\(([\w,\ ]*)\))?$/;var hn=function(a,b,c,d,e,f){this.g=a;this.h=b;this.j=c;this.a=d;this.m=e;this.f=f;this.b=new vm(f,c);this.v=new Ul(this.g);this.A=new sm(this.g)};hn.prototype.init=function(){this.j.init();this.b.listen("v2_message",this.s.bind(this));this.b.listen("app_message",this.u.bind(this));this.b.listen("leave_session",this.w.bind(this))};
var ln=function(a,b,c,d){jn(a.a,b).slice().forEach(function(b){b!=d&&kn(a,b,c)})},kn=function(a,b,c){c.clientId=b;Am(a.b,b,c)},mn=function(a,b,c,d){c={receiver:Xl(c),action:d};kn(a,b,new um("receiver_action",c))};
hn.prototype.s=function(a){var b=a.message,c=b.sessionId;if(c){var d=nn(this.a,c);if(d)if(c=on(this.a,c))if(c=this.h.b(c))switch(b.type){case "STOP":pn(this,a,c);break;case "LOAD":case "PAUSE":case "PLAY":case "SEEK":case "STOP_MEDIA":case "MEDIA_SET_VOLUME":case "MEDIA_GET_STATUS":case "EDIT_TRACKS_INFO":case "QUEUE_LOAD":case "QUEUE_INSERT":case "QUEUE_UPDATE":case "QUEUE_REMOVE":case "QUEUE_REORDER":case "PRECACHE":qn(this,a,c,d);break;case "SET_VOLUME":rn(this,a,c);break;default:t(sn,"Unknown request")}else tn(this,
a,chrome.cast.Mb.INVALID_PARAMETER,"No receiver");else tn(this,a,chrome.cast.Mb.INVALID_PARAMETER,"No sink ID");else tn(this,a,chrome.cast.Mb.INVALID_PARAMETER,"Unknown session ID")}else tn(this,a,chrome.cast.Mb.INVALID_PARAMETER,"No session ID")};
var tn=function(a,b,c,d){c=new chrome.cast.Error(c,d);un(a,b,c)},un=function(a,b,c){Am(a.b,b.clientId,new um("error",c,b.sequenceNumber))},pn=function(a,b,c){var d=b.message;bb("MediaRouter.Cast.Session.End");var e=d.sessionId,f=vn(a.a,e);f&&(f.g=!0);f=function(){wn(a,e,b)};a.g.sendRequest(d,c,Sj,b.timeoutMillis,b.clientId).then(f,f)},qn=function(a,b,c,d){var e=b.message,f=e.type;f in ql&&(e.type=ql[f]);a.g.sendRequest(e,c,Uj,b.timeoutMillis,b.clientId,d.transportId).then(function(c){xn(a,d,c);Am(a.b,
b.clientId,new um("v2_message",c,b.sequenceNumber))},function(c){un(a,b,c)})},rn=function(a,b,c){var d=b.message;delete d.sessionId;a.g.sendRequest(d,c,Sj,b.timeoutMillis,b.clientId).then(function(){Am(a.b,b.clientId,new um("v2_message",null,b.sequenceNumber))},function(c){un(a,b,c)})};
hn.prototype.u=function(a){var b=this,c=a.message,d=c.sessionId;if(d){var e=on(this.a,d);e?(e=this.h.b(e))?(d=nn(this.a,d),Mb(d.namespaces,function(a){return a.name==c.namespaceName})?Cl(this.m,e,c.namespaceName,c.message,a.clientId,d.transportId).then(function(){Am(b.b,a.clientId,new um("app_message",null,a.sequenceNumber))},function(){tn(b,a,chrome.cast.Mb.CHANNEL_ERROR,"Channel to receiver not available")}):tn(this,a,chrome.cast.Mb.INVALID_PARAMETER,"Invalid namespace")):t(sn,"No receiver from sinkId"):
t(sn,"No sinkId from sessionId")}else t(sn,"No sessionId")};
hn.prototype.w=function(a){var b=this;u(sn,"Leave session");var c=vn(this.a,a.message);if(c){var d=a.clientId,e=wm(this.j,d);if(e){var f=[],g=[],l=e.tabId,r=e.origin,y=e.autoJoinPolicy;c.b.forEach(function(a){var c=wm(b.j,a);y==chrome.cast.Lb.TAB_AND_ORIGIN_SCOPED&&l==c.tabId&&r==c.origin||y==chrome.cast.Lb.ORIGIN_SCOPED&&r==c.origin?(c.b=!0,f.push(a)):g.push(a)});Am(this.b,d,new um("leave_session",null,a.sequenceNumber));f.forEach(function(a){(a=wm(b.j,a))&&yn(b.f,a.routeId,!0,!0)});c.b=g}else t(sn,
"No client record")}else t(sn,"No session")};
var zn=function(a,b,c){cm(b)&&a.g.sendRequest(new rl,c,Uj,void 0,void 0,b.transportId).catch(ra)},fl=function(a,b,c){var d=b.getId();u(sn,"Query status for "+d);Vl(a.v,b).then(function(e){An(a,d,e);c&&(e=Bn(a.a,d))&&zn(a,e,b)},ra)},Cn=function(a,b){if("*"==b.destinationId)return!0;b=b.destinationId;if(b==a.m.h||null!=wm(a.j,b))return!0;u(sn,"Invalid destination "+b);return!1},Hn=function(a,b,c){v(sn,function(){return"Cast message: "+JSON.stringify(c)});if(Cn(a,c))if(c.namespace_==Tj||c.namespace_==
Vj)(b=Dn(a.a,b))&&b.a.forEach(function(b){var d=a.f,e=d.f.get(b);e&&e.Pc&&d.b.we(d,b,c)});else{var d=JSON.parse(c.data),e=En(a,d),e=e?e.sourceId:void 0;switch(d.type){case "RECEIVER_STATUS":An(a,b,d);break;case "MEDIA_STATUS":Fn(a,b,c,e)}}else Gn(a.m,b,c.destinationId,c.sourceId,!1)},En=function(a,b){a=yl(a.g.a,b.requestId);if(!a)return null;var c=a.qa;switch(b.type){case "LAUNCH_ERROR":case "INVALID_REQUEST":case "LOAD_CANCELLED":case "LOAD_FAILED":case "INVALID_PLAYER_STATE":delete b.requestId;
c.reject(new chrome.cast.Error(chrome.cast.Mb.SESSION_ERROR,b.reason||b.type,b));break;default:c.resolve(b)}return a},In=function(a,b,c){v(sn,function(){return"App message: "+JSON.stringify(c)});if(b=Bn(a.a,b)){var d;"*"==c.destinationId?d=jn(a.a,b.sessionId):d=[c.destinationId];var e=new Tl(b.sessionId,c.namespace_,c.data);d.forEach(function(b){Am(a.b,b,new um("app_message",e))})}else t(sn,"No session for incoming app message")},Jn=function(a,b){a.forEach(function(a){a.sessionId=b;var c=a.supportedMediaCommands,
e=[];c&1&&e.push(chrome.cast.media.fc.PAUSE);c&2&&e.push(chrome.cast.media.fc.SEEK);c&4&&e.push(chrome.cast.media.fc.STREAM_VOLUME);c&8&&e.push(chrome.cast.media.fc.STREAM_MUTE);a.supportedMediaCommands=e});return a},xn=function(a,b,c){b=b.sessionId;c.sessionId=b;c=Jn(c.status,b);Kn(a.a,b,c);(a=vn(a.a,b))&&a.controller&&(a=a.controller,(c=mm(a))?nm(a,c):(a.a.title="",a.a.can_play_pause=!1,a.a.can_seek=!1),gm(a))},Ln=function(a,b){if(b=Bn(a.a,b)){b=b.sessionId;var c=vn(a.a,b);c&&c.g||wn(a,b)}},wn=
function(a,b,c){c&&kn(a,c.clientId,c);(c=vn(a.a,b))&&c.a.slice().forEach(function(b){yn(a.f,b,!0)});Mn(a.a,b);pm(a.f)},An=function(a,b,c){v(sn,"Receiver status for "+b);var d=c.status;if(d)if(c=a.h.b(b)){var d=Zl(c,d),e=Dn(a.a,b);e?d?d.sessionId==e.session.sessionId?(b=e.session,am(b,d)&&(v(sn,"Updating session "+d.sessionId),b.statusText=d.statusText,b.namespaces=d.namespaces,b.receiver.volume=d.receiver.volume,Nn(a.f,e),ln(a,b.sessionId,new um("update_session",b)),e.controller&&km(e.controller))):
(Ln(a,b),Dk(1),On(a.f,null,c,null,d)):(Ln(a,b),Dk(1)):d&&On(a.f,null,c,null,d)}else bb("MediaRouter.Cast.Error.Sink.Missing.From.Discovery.Service"),t(sn,"Got message from receiver "+b+", but sink is no longer available.")},Fn=function(a,b,c,d){if(b=Bn(a.a,b))if(c=JSON.parse(c.data))xn(a,b,c),ln(a,c.sessionId,new um("v2_message",c),d)},Pn=function(a,b){var c=$l(b.a);return(b=Mb(a.j,function(a){return Kb(a.capabilities,function(a){return Ob(c,a)})}))?b.appId:bn(a)[0]},Qn=function(a,b,c){var d=fn(b);
if(!d)return Promise.reject(Error("Invalid source "+b));var e=Pn(d,c),f=new Sa("MediaRouter.Cast.Session.Launch");return tm(a.A,new chrome.cast.pg(e,void 0,null==d.g?chrome.cast.timeout.requestSession:d.g),c).then(function(a){u(sn,"Launched session "+a.sessionId+" for appId "+e);f.a("Success");return a},function(a){sn.error("Failed to session for appId "+e);f.a("Failure");throw a;})};
hn.prototype.createMediaRouteController=function(a,b,c){a=Rn(this.a,a);if(!a)return Error("Session not found for the route");var d=a.session;if(a.controller)return Error("Controller already exists for the route");var e=Sn(this,d.sessionId);if(!e)return Error("Sink not found for the route");a.controller=new lm(b,c,d,this);zn(this,d,e);pm(this.f);return null};
var qm=function(a,b,c){var d=Sn(a,b.sessionId);d&&a.g.sendRequest(c,d,Uj,0,"",b.transportId).catch(function(a){t(sn,"Failed to send a media control request: "+a)})},rm=function(a,b,c){c=new Wl(c);(b=Sn(a,b.sessionId))&&a.g.sendRequest(c,b,Sj).catch(function(a){t(sn,"Failed to send a volume control request: "+a)})},Sn=function(a,b){return(b=on(a.a,b))?a.h.b(b):null},sn=Ja("mr.cast.ApiHandler");var Tn=function(a,b){if(!chrome.runtime.lastError)return null;a=a+" failed, chrome.runtime.lastError: "+(chrome.runtime.lastError.message||"Unknown error");b&&v(b,a);return Error(a)};var Un=function(){this.b=new ti;this.f=new ti;this.a=new ti},Zn=function(a,b,c){c=void 0===c?!1:c;var d=b.getId(),e=b.Ea()+":"+b.va(),f=a.b.get(d);if(f){if(a.a.get(d)==e)return v(Vn,"Using pending creation to "+d),f;u(Vn,"Device "+d+" IP changed from "+a.a.get(b.getId())+" to "+e);Wn(a,b)}b=Xn(a,b,c?15E3:1E4).then(function(b){Yn(a,d);Ek(1);return b},function(b){e==a.a.get(d)&&Yn(a,d);Ek(0);return Promise.reject(b)});a.b.set(d,b);a.a.set(d,e);return b},Wn=function(a,b){b=b.getId();v(Vn,"Aborting connection to device "+
b);var c=a.f.get(b);c&&c.abort();Yn(a,b)},Yn=function(a,b){a.b.remove(b);a.f.remove(b);a.a.remove(b)},Xn=function(a,b,c){var d=new Hc(function(){return $n(b,c)},1E3,3);a.f.set(b.getId(),d);return Jc(d,1.5).start().then(null,function(a){u(Vn,"Failed to create channel to "+b.getId());return Promise.reject(a)})},$n=function(a,b){var c=ao++;u(Vn,"Connecting to (id "+c+") "+a.getId());var d=new Sa("MediaRouter.Cast.Mdns.Channel.Open");return bo(a,b).then(function(a){u(Vn,function(){return"Channel opened (id "+
c+"): "+JSON.stringify(a)});d.a("Success");return a},function(a){u(Vn,"Channel did not open (id "+c+").");d.a("Failure");return Promise.reject(a)})},bo=function(a,b){var c={ipAddress:a.Ea(),port:a.va(),auth:"ssl_verified",timeout:1E4,livenessTimeout:b,pingInterval:5E3,capabilities:0};u(Vn,function(){return"Opening channel to "+JSON.stringify(c)});var d=new eb;chrome.cast.channel.open(c,function(a){a?"open"==a.readyState?d.resolve(a):(Tn("chrome.cast.channel.open",Vn),chrome.cast.channel.close(a,function(){Tn("chrome.cast.channel.close",
Vn)}),d.reject(Error(a.errorState))):(a=Tn("chrome.cast.channel.open",Vn),d.reject(a))});return d.a},Vn=Ja("mr.cast.ChannelFactory"),ao=0;var co=function(a,b,c,d){return{namespace_:a,data:pa(b)?b:JSON.stringify(b),sourceId:c,destinationId:d}};var eo=function(a){this.type="CLOSE";this.reasonCode=a};var fo=Gc("Firefox"),go=sg()||Gc("iPod"),ho=Gc("iPad"),io=Gc("Android")&&!(Mc()||Gc("Firefox")||Gc("Opera")||Gc("Silk")),jo=Mc(),ko=Gc("Safari")&&!(Mc()||Gc("Coast")||Gc("Opera")||Gc("Edge")||Gc("Silk")||Gc("Android"))&&!tg();var lo=function(a){return(a=a.exec(Dc))?a[1]:""},mo=function(){if(fo)return lo(/Firefox\/([0-9.]+)/);if(Ag||Bg||zg)return Tg;if(jo)return tg()?lo(/CriOS\/([0-9.]+)/):lo(/Chrome\/([0-9.]+)/);if(ko&&!tg())return lo(/Version\/([0-9.]+)/);if(go||ho){var a=/Version\/(\S+).*Mobile\/(\S+)/.exec(Dc);if(a)return a[1]+"."+a[2]}else if(io)return(a=lo(/Android\s+([0-9.]+)/))?a:lo(/Version\/([0-9.]+)/);return""}();var oo=function(a){this.type="CONNECT";this.origin={};this.userAgent=Dc;var b=this.userAgent.indexOf("(")+1,b=this.userAgent.substr(b,this.userAgent.indexOf(")",b)-1-b+1);this.senderInfo={sdkType:2,version:chrome.runtime.getManifest().version,browserVersion:mo,platform:no(),systemVersion:b,connectionType:1};this.connType=a?0:2},no=function(){switch(se()){case "ChromeOS":return 5;case "Windows":return 3;case "Mac":return 4;case "Linux":return 6}return 0};var po=function(){this.a=new ti};po.prototype.init=function(){Of(this)};var qo=function(a,b,c,d,e){if(!a.a.La([b.channelId,c,d].join("#"))){var f=co(Rj,new oo(e),c,d);chrome.cast.channel.send(b,f,a.b.bind(a));a.a.set([b.channelId,c,d].join("#"),e)}};po.prototype.b=function(){Tn("chrome.cast.channel.send",ro)};
var so=function(a,b){a.a.Fa().forEach(function(c){c.split("#")[0]==b.channelId.toString()&&a.a.remove(c)})},to=function(a,b,c){a.a.forEach(function(d,e){var f=e.split("#");f[0]==b.channelId.toString()&&(qo(a,c,f[1],f[2],d),a.a.remove(e))})};po.prototype.ea=function(){return"cast.VirtualConnectionManager"};po.prototype.ta=function(){var a=xi(this.a);return[new uo(a)]};po.prototype.wa=function(){var a=Lf(this);if(a)for(var b in a.a)this.a.set(b,a.a[b])};sa(po);
var ro=Ja("mr.cast.VirtualConnectionManager"),uo=function(a){this.a=a};var vo=function(a,b){this.g=b;this.h=a;this.b=new ti;this.a=new ti;this.f=po.na();this.m=new Un;this.j=null};la(vo,Qe);vo.prototype.handleEvent=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];a==chrome.cast.channel.onMessage?this.w.apply(this,[].concat(ma(c))):a==chrome.cast.channel.onError&&this.u.apply(this,[].concat(ma(c)))};vo.prototype.init=function(){this.f.init();Of(this);$e("mr.cast.ChannelService",this);Pk().forEach(function(a){return a.addListener()})};
var Cl=function(a,b,c,d,e,f){var g=e||a.h,l=f||"receiver-0";return hl(a,b).then(function(b){return wo(a,b,c,d,g,l)})},xo=function(a,b,c,d,e){hl(a,b).then(function(b){return qo(a.f,b,c,d,e)})},Gn=function(a,b,c,d,e){if(b=a.b.get(b))a=a.f,a.a.La([b.channelId,c,d].join("#"))&&(a.a.remove([b.channelId,c,d].join("#")),c=co(Rj,new eo(e?5:0),c,d),chrome.cast.channel.send(b,c,a.b.bind(a)))};
vo.prototype.w=function(a,b){var c=this.a.get(a.channelId);if(c){var d=this.j(c);if(d){if(Xj.hasOwnProperty(b.namespace_)){var e=JSON.parse(b.data);switch(e.type){case "CLOSE":this.f.a.remove([a.channelId,b.destinationId,b.sourceId].join("#"));return;case "RPC":break;default:v(yo,function(){return"Got message "+(e.type||e.responseType)+" "+("from "+d.getId())})}}else v(yo,"Got message in "+b.namespace_+" from "+d.getId());zo(this.g,d,b)}else t(yo,"Got message for unknown receiver (receiverId="+c+
").")}else t(yo,"Got message for unknown channel (channelId="+a.channelId+").")};var Ao=function(a,b){chrome.cast.channel.close(b,function(){chrome.runtime.lastError||v(yo,"Channel close success")});var c=a.a.get(b.channelId);c&&(a.a.remove(b.channelId),a.b.remove(c))};vo.prototype.u=function(a,b){t(yo,function(){return"Channel error: "+JSON.stringify(a)+(b?", "+JSON.stringify(b):"")});b&&Bo(b);Co(this,a)};
var Bo=function(a){switch(a.errorState){case "unknown":var b=0;break;case "authentication_error":b=1;break;case "connect_error":b=2;break;case "connect_timeout":b=6;break;case "ping_timeout":b=7;break;default:return}if(-8192<=a.nssErrorCode&&-7192>a.nssErrorCode||2==a.challengeReplyErrorType||8==a.challengeReplyErrorType||9==a.challengeReplyErrorType||11==a.challengeReplyErrorType||-200>=a.netReturnValue&&-300<a.netReturnValue||30==a.eventType||31==a.eventType||32==a.eventType)b=3;if(26==a.eventType||
-201==a.netReturnValue||-8181==a.nssErrorCode||-8162==a.nssErrorCode||-8161==a.nssErrorCode)b=4;-138==a.netReturnValue&&(b=5);if(-8182==a.nssErrorCode||10==a.eventType||12==a.eventType)b=1;t(yo,"Channel error code: "+b);cb("MediaRouter.Cast.Channel.Error",b,Bk)},Co=function(a,b){var c=a.a.get(b.channelId);Ao(a,b);if(c){var d=a.j(c);d&&hl(a,d,!0).then(function(c){u(yo,"Re-connected to receiver: "+d.getId());to(a.f,b,c);fl(a.g.g,d,!0)},function(){u(yo,"Failed to re-connect to receiver: "+d.getId());
so(a.f,b);var c=a.g.a,f=d.getId();u(c.l,"Channel error for sink "+f);Xk(c,f);Dk(2)})}},hl=function(a,b,c){c=void 0===c?!1:c;var d=b.getId(),e=a.b.get(d);return e&&"open"==e.readyState?Promise.resolve(e):Zn(a.m,b,c).then(function(b){if(a.a.La(b.channelId))return b;a.b.get(d)&&(t(yo,"Duplicate channel to a receiver "+d),Ao(a,a.b.get(d)));u(yo,"Connected to: "+d);a.b.set(d,b);a.a.set(b.channelId,d);return b},null)},wo=function(a,b,c,d,e,f){qo(a.f,b,e,f,0==f.indexOf("receiver-0"));bm(d);var g=co(c,d,
e,f);"object"===typeof d&&"RPC"==d.type||v(yo,function(){return"Channel is sending message: "+JSON.stringify(g)});return new Promise(function(c,d){chrome.cast.channel.send(b,g,function(b){b?b.errorState?(d(Error("Failed to send message")),Co(a,b)):c(!0):(b=Tn("chrome.cast.channel.send",yo),d(b))})})};vo.prototype.ea=function(){return"cast.ChannelService"};vo.prototype.ta=function(){return[new Do(xi(this.b),xi(this.a))]};vo.prototype.wa=function(){var a=Lf(this);a&&(si(this.b,a.b),si(this.a,a.a))};
var yo=Ja("mr.cast.ChannelService"),Do=function(a,b){this.b=a;this.a=b};var Eo=function(){this.requestId=0;this.type="GET_APP_AVAILABILITY";this.appId=[]};var Fo=function(a,b){this.g=a;this.b=b;this.f=new Hl;this.a=new ti};Fo.prototype.init=function(){Of(this)};var Go=function(a,b){var c=a.a.get(b);c&&(c.Lf--,0<c.Lf||(ei(a.b.a.Oa(!1),function(a){switch(wk(a,b)){case "available":a.hb[b]="available_rescan";break;case "unavailable":a.hb[b]="unavailable_rescan"}}),a.a.remove(b)))};h=Fo.prototype;
h.lh=function(a){var b=this;ei(this.a.Oa(!0),function(c){a:{switch(wk(a,c)){case "unknown":case "available_rescan":case "unavailable_rescan":var d=!0;break a}d=!1}if(d){var e=a.getId()+":"+c;b.f.contains(e)||(b.f.add(e),d=function(){b.f.remove(e)},Jc(new Hc(b.ik.bind(b,a,c),5500,3),2).start().then(b.gi.bind(b,a,c),function(){b.l.error("Failed to get app availability response for "+a.getId()+", appId "+c+" after 3 attempts.");b.gi(a,c,"unknown")}).then(d,d))}})};
h.gi=function(a,b,c){c!=wk(a,b)&&(u(this.l,b+" on "+a.getId()+" is "+c),a.hb[b]=c,Vk(this.b.f,a))};
h.ik=function(a,b){var c=this,d=new Eo;d.appId=[b];var e=new Sa("MediaRouter.Cast.App.Availability");return this.g.sendRequest(d,a,Sj,5E3).then(function(a){e.a("Success");v(c.l,function(){return"App availability response "+JSON.stringify(a)});for(var b in a.availability){if("APP_AVAILABLE"==a.availability[b])return"available";if("APP_UNAVAILABLE"==a.availability[b])return"unavailable"}return"unknown"},function(d){e.a("Failure");c.l.error("checkAppAvailability_ failed for "+a.getId()+", appId "+b);
throw d;})};h.ea=function(){return"cast.AppDiscoveryService"};h.ta=function(){return[new Ho(xi(this.a))]};h.wa=function(){var a=Lf(this);a&&si(this.a,a.a)};h.l=Ja("mr.cast.AppDiscoveryService");var Ho=function(a){this.a=a};var Io=function(a,b,c){var d=Error.call(this);this.message=d.message;"stack"in d&&(this.stack=d.stack);this.name="RouteRequestError";this.message=b||"";if(c)this.stack=c;else if(Error.captureStackTrace)Error.captureStackTrace(this,Io);else if(b=Error().stack)this.stack=b;this.errorCode=a};la(Io,Error);var Jo=function(a,b){this.sinks=a;this.origins=b||null},Ko=new Jo([]);var Lo=function(a,b,c,d){a=Mj(c,"cast",b.getId(),a,d,"",null);a.supportsMediaRouteController=!0;return a};var Mo=function(a,b,c,d,e,f){this.routeId=a;this.clientId=b;this.appIds=c;this.autoJoinPolicy=d;this.origin=e;this.tabId=f;this.b=this.a=!1},No=function(){this.a=[]};No.prototype.init=function(){Of(this)};No.prototype.aa=function(){return this.a.length};var wm=function(a,b){return Mb(a.a,function(a){return a.clientId==b})},Oo=function(a,b){return Mb(a.a,function(a){return a.routeId==b})},Po=function(a,b){a.a=Gb(a.a,function(a){return a.clientId!=b})};No.prototype.ea=function(){return"cast.ClientRecords"};
No.prototype.ta=function(){return[new Qo(this.a)]};No.prototype.wa=function(){var a=Lf(this);a&&(this.a=a.a)};var Qo=function(a){this.a=a};var Ro=function(a){this.a=a},So=function(){var a=[];kk().j.forEach(function(b){var c="Receiver-"+b.replace(/\./g,"_"),d=kk().a||8009;a.push({serviceName:c+"._googlecast._tcp.local",serviceHostPort:c+":"+d,ipAddress:b,serviceData:["id=mdns:"+c,"ve=02","ca=5","st=1","fn="+c,"md=Chromecast"]})});return a};Ro.prototype.init=function(){var a=So(),b=this.a;b.K(a);b.G=a};var To=chrome.i18n.getMessage("4528089202128275824");chrome.i18n.getMessage("2810417817914017289");chrome.i18n.getMessage("3413021810593924462");chrome.i18n.getMessage("7603034707785674700");chrome.i18n.getMessage("8009014317872238527");chrome.i18n.getMessage("8636962961150071298");chrome.i18n.getMessage("1802762746589457177");var Uo=function(a,b){this.b=[];this.a=[];this.sinkId=a;this.session=b;this.j=this.f=null;this.offTheRecord=this.g=!1;this.controller=null},Vo=function(){this.l=Ja("mr.cast.SessionRecords");this.a=[]};Vo.prototype.init=function(){Of(this)};
var Mn=function(a,b){u(a.l,"Removing session "+b);om(a,b);a.a=Gb(a.a,function(a){return a.session.sessionId!=b})},jn=function(a,b){return(a=vn(a,b))?a.b:[]},Bn=function(a,b){return(a=Dn(a,b))?a.session:null},Wo=function(a,b){return Mb(a.a,function(a){return Ob(a.b,b)})},Rn=function(a,b){return Mb(a.a,function(a){return Ob(a.a,b)})},Xo=function(a,b){return Mb(a.a,function(a){return null!=Mb(a.a,function(a){return Kj(a).a==b})})},Dn=function(a,b){return Mb(a.a,function(a){return a.sinkId==b||a.f==b})},
vn=function(a,b){return Mb(a.a,function(a){return a.session.sessionId==b})},on=function(a,b){return(a=vn(a,b))?a.sinkId:null},nn=function(a,b){return(a=vn(a,b))?a.session:null},Kn=function(a,b,c){var d=nn(a,b);d&&(a=Gb(c,function(a){return a.playerState!=chrome.cast.media.td.IDLE}),a.forEach(function(a){if(!a.media){var b=Mb(d.media,function(b){return b.mediaSessionId==a.mediaSessionId});b&&(a.media=b.media)}}),d.media=a)};Vo.prototype.ea=function(){return"cast.SessionRecords"};Vo.prototype.ta=function(){return[new Yo(this.a)]};
Vo.prototype.wa=function(){var a=Lf(this);if(a)for(var b=0;b<a.a.length;b++){var c=a.a[b],d=new Uo(c.sinkId,c.session);d.b=c.b;d.a=c.a;d.g=c.g;d.j=c.j;d.f=c.f;this.a.push(d)}};var om=function(a,b){(a=vn(a,b))&&a.controller&&(a.controller.sa(),a.controller=null)},Zo=function(a){return 0<a.a.filter(function(a){return a.controller}).length},Yo=function(a){this.a=a};var $o=function(a){this.w="sender-"+vb();this.f=new ti;this.m=null;Of(this);this.b=a;this.h=new No;this.j=new Vo;this.u=new vo(this.w,this);this.a=new Rk(this.u,this);this.G=new Ro(this.a);this.v=new zl(this.u,this.w);this.A=new Fo(this.v,this.a);this.g=new hn(this.v,this.a,this.h,this.j,this.u,this);this.B=new Nl(this.a,this.v);this.H=this.a.start.bind(this.a);this.s=new Map;this.J=!0};h=$o.prototype;h.getName=function(){return"cast"};
h.Ha=function(){this.v.init();this.j.init();this.g.init();this.u.init();this.a.init();this.G.init();this.A.init()};h.mc=function(){var a=this.f.R(),b=[].concat(ma(this.s.values())).map(function(a){return a.Mf.Eb()});return a.concat(b)};h.Ad=function(a){var b=this;if(null!=ap(a))return new Jo([]);var c=new Hl;bp(a).forEach(function(a){jl(b.a,a).map(function(a){return a.b}).forEach(function(a){c.add(a)})});return new Jo(c.R(),-1!=a.indexOf("0F5096E8")?Oe:null)};
h.startObservingMediaSinks=function(a){var b=this,c=ap(a);c?(u(this.l,"Received broadcast request "+a),ei(this.a.a.Oa(!1),function(a){b.v.sendMessage(c,a,Wj).catch(function(a){b.l.error("Broadcast failed "+a.message)})})):(bp(a).forEach(function(a){var c=b.A,d=c.a.get(a);d?d.Lf++:c.a.set(a,{Lf:1});u(c.l,"Scanning sinks for app availability");ei(c.b.a.Oa(!1),c.lh,c)}),this.J&&this.b.qf()&&this.a.start())};
h.stopObservingMediaSinks=function(a){var b=this;null!=ap(a)||bp(a).forEach(function(a){Go(b.A,a)})};h.startObservingMediaRoutes=function(){};h.stopObservingMediaRoutes=function(){};h.hd=function(a){u(this.l,"Enables discovery: "+a);(this.J=a)?this.b.Kf(this.H):this.a.stop()};h.Gd=function(a){return(a=this.a.b(a))?a.b:null};
var cp=function(a,b,c){a.l.error("Error launching.",c);yn(a,b.id,!1,!0,"error");c=new he(To,"warning");c.routeId=b.id;a.b.oc(c)},gp=function(a,b,c,d,e,f,g,l){kk().f=new hk(c.jb,c.Ea());var r=Lo(b,c,d,!0);r.forDisplay=!1;r.offTheRecord=e;a.f.set(r.id,r);a.b.rc(a,r);pm(a);(e=fn(b))&&e.a&&dp(a,e,r.id,g,l);Me(b)||Ne(b)?(r.pb={tabId:l,sessionId:"",Le:c.Ea()||"",Me:c.jb||""},Ne(b)&&(r.isOffscreenPresentation=!0),a.b.sf(a,r,d,function(e){return pe(ep(a,b,c,d,f,g,l,e))}).a.then(function(){fp(a,r)},function(b){cp(a,
r,b)})):ep(a,b,c,d,f,g,l,r).then(null,function(b){cp(a,r,b)});return Promise.resolve(r)},ep=function(a,b,c,d,e,f,g,l){return Qn(a.g,hp(b,c,e),c).then(function(e){On(a,b,c,d,e,f,g,l);return l})};
$o.prototype.createRoute=function(a,b,c,d,e,f,g){var l=this,r=this.a.b(b);if(!r)return oe(Error("No sink with ID "+b));var y=an(a);if(y){setTimeout(function(){mn(l.g,y,r,chrome.cast.ud.CAST)},0);var z=function(){return gp(l,a,r,c,d,e,f,g)},I=wm(this.h,y);if(I)return pe(this.terminateRoute(I.routeId).then(z,z));if(f&&g&&(b=ip(this,a,f,g,d,e,b)))return b}return pe(gp(this,a,r,c,d,e,f,g))};
var yn=function(a,b,c,d,e){d=void 0===d?!1:d;e=void 0===e?"closed":e;u(a.l,"Remove route "+b);var f=Oo(a.h,b);if(f){c=c||f.b;var g=f.clientId;u(a.l,"Remove client "+g);for(var l=a.j,r=0;r<l.a.length;r++)Vb(l.a[r].b,g);Po(a.h,g)}if(g=Rn(a.j,b))Vb(g.a,b),jp(a,g.a);if(l=a.f.get(b))if(l.Pc&&g&&(Gn(a.u,l.sinkId,f?f.clientId:a.w,g.session.transportId,c),l.forDisplay&&f&&(a.m={Nc:f,Sh:g})),a.f.remove(b),a.b.Zc(a,l),pm(a),d)a.b.onPresentationConnectionClosed(b,e,"Remove route");else a.b.onPresentationConnectionStateChanged(b,
"terminated")},Nn=function(a,b){b.a.forEach(function(c){if(c=a.f.get(c)){var d=b.session;c.pb&&c.forDisplay?fp(a,c):(c.description=d.statusText||d.displayName,a.b.ac(a,c))}})},kp=function(a,b){Jb(b,function(b){b=a.f.get(b,null);if(!b||!b.mediaSource)return!1;var c=fn(b.mediaSource),c=c?c.u:!1;return b.isLocal&&!c})&&w(b,function(b){if(b=a.f.get(b,null))b.isLocal=!0})},jp=function(a,b){var c=[],d=[],e=null;b.forEach(function(b){if(b=a.f.get(b)){b.forDisplay=!1;var f=fn(b.mediaSource);f&&Mb(bn(f),em)||
(b.Pc?(f=f?cn(f):null,e||f==chrome.cast.Lb.CUSTOM_CONTROLLER_SCOPED||(c.push(b),e=b.sinkId)):e&&e!=b.sinkId?c.push(b):d.push(b))}});w(0<c.length?c:d,function(a){a.forDisplay=!0})},dp=function(a,b,c,d,e){var f=b.a;if(f&&!wm(a.h,f)){u(a.l,"Add client "+f);var g=bn(b);a.h.a.push(new Mo(c,f,g,cn(b),d||null,k(e)?e:null))}},fp=function(a,b){if(a=Rn(a.j,b.id))a=a.session,a.statusText=b.description||a.statusText},On=function(a,b,c,d,e,f,g,l){var r=Dn(a.j,c.getId());if(!r){var y=a.j,r=c.getId();u(y.l,"Adding new session: "+
r+", "+e.sessionId);var z=vn(y,e.sessionId);z?(Yl(e)?(z.j=e,z.f=r):Yl(z.session)&&(z.j=z.session,z.f=z.sinkId,z.session=e,z.sinkId=r),r=z):(r=new Uo(r,e),y.a.push(r))}var I=null!=b;if(!I&&em(e.appId))return null;null==b?(z=new Xm([{appId:e.appId,capabilities:e.capabilities}]),b=z.toString()):z=fn(b);if(y=l){if(!a.f.get(y.id))return t(a.l,"Route "+y.id+" not added"),y}else y=Lo(b,c,d||e.sessionId,I),a.f.set(y.id,y);d=y.id;u(a.l,"Add route "+d);b=null;z&&(b=z.a,dp(a,z,d,f,g));Ob(r.a,d)||r.a.push(d);
y.Pc&&xo(a.u,c,b||a.w,e.transportId,!(z&&z.u));r.offTheRecord=y.offTheRecord;f=r.a;kp(a,f);jp(a,f);f=y;g=e.sessionId;d=e.appId;("0F5096E8"==d||"85CDB22F"==d)&&g&&f.pb&&(f.pb.sessionId=g);!cm(e)||null!==e&&Ob(dm,e.appId)||(f.customControllerPath="cast_route_details.html?"+["sessionId="+g,"appId="+d].join("&"));f.description=e.statusText||e.displayName;l?a.b.ac(a,y):a.b.rc(a,y);pm(a);if(l=b)Ob(r.b,b)?l=!1:(r.b.push(b),l=!0);l&&(a=a.g,Am(a.b,b,new um("new_session",e)),zn(a,e,c));return y};
$o.prototype.terminateRoute=function(a){var b=this,c=this.f.get(a);if(!c)return Promise.reject(new Io(3,"Route in Cast provider not found for routeId  "+a));var d=Rn(this.j,a);if(!d)return yn(this,a,!0),Promise.resolve();var e=d.session.sessionId,f=this.a.b(c.sinkId);if(!f)return wn(this.g,e),Promise.resolve();(a=Oo(this.h,a))&&mn(this.g,a.clientId,f,chrome.cast.ud.STOP);Dk(0);return new Promise(function(a){var c=function(){Ln(b.g,f.getId());a()};b.v.sendRequest(new ul(e),f,Sj).then(c,c)})};
var lp=function(a,b){var c=null;fi(a.f.Oa(!1),function(d){if(!d.Pc)return!1;var e=a.a.b(d.sinkId);if(!e||!en(b,hp(d.mediaSource,e)))return!1;c=d;return!0});if(!c||!c.mediaSource)return null;var d=gn(c.mediaSource);if(!d)return null;var e=wm(a.h,d);return e?(d=Wo(a.j,d))?{Nc:e,Sh:d}:null:null},ip=function(a,b,c,d,e,f,g){var l=null;fi(a.f.Oa(!1),function(a){var b=a.pb;return b&&null!=b.tabId&&b.tabId==d&&Ke(a.mediaSource)?(l=a,!0):!1});if(!l)return null;var r=function(){return a.createRoute(b,g||l.sinkId,
"",e,f,c,null==d?void 0:d)};return pe(a.terminateRoute(l.id).then(r,r))};h=$o.prototype;h.connectRouteByRouteId=function(a,b,c,d,e){if(!fn(a))return oe(Error("Unsupported presentation URL"));b=Kj(b);b=vn(this.j,b.a);if(!b)return oe(Error("No matching route"));var f=this.a.b(b.sinkId);return f?(a=On(this,a,f,c,b.session,d,e))?ne(a):oe(Error("Failed to create route")):oe(Error("No sink"))};
h.joinRoute=function(a,b,c,d,e,f){var g=fn(a);if(!g)return oe(Error("Unsupported presentation URL"));if(b==chrome.cast.ag){a:{var l=lp(this,g);if(!l){if(!this.m||this.m.Nc.origin!=e||this.m.Nc.tabId!=f){l=null;break a}l=this.m}switch(cn(g)){case chrome.cast.Lb.PAGE_SCOPED:l=null;break a;case chrome.cast.Lb.ORIGIN_SCOPED:if(e!=l.Nc.origin){l=null;break a}break;case chrome.cast.Lb.TAB_AND_ORIGIN_SCOPED:if(e!=l.Nc.origin||f!=l.Nc.tabId){l=null;break a}}l=vn(this.j,l.Sh.session.sessionId)}if(!l&&(g.f?
g.f:chrome.cast.ce.CREATE_SESSION)!=chrome.cast.ce.CAST_THIS_TAB&&(d=ip(this,a,e,f,c,d)))return d}else l=mp(this,b);if(!l)return oe(Error("No matching route"));if(l.offTheRecord!=c)return oe(Error("Off the record mismatch"));d=this.a.b(l.sinkId);if(!d)return oe(Error("No sink"));a=On(this,a,d,b,l.session,e,f);a.offTheRecord=c;return ne(a)};h.detachRoute=function(a){yn(this,a,!1,!0)};
h.Sc=function(a){var b=this.a.b(a);if(!b)throw Error("Cannot mirror with no sink.");var c=new qf,b=b.a;b&1||(c.shouldCaptureVideo=!1);b&4||(c.shouldCaptureAudio=!1);c.shouldCaptureAudio&&!c.shouldCaptureVideo&&(c.minLatencyMillis=c.maxLatencyMillis,c.animatedLatencyMillis=c.maxLatencyMillis);c.senderSideLetterboxing=!0;rf(c);Object.freeze(c);u(this.l,function(){return"Settings for "+a+": "+pf(c)});if(!c.shouldCaptureAudio&&!c.shouldCaptureVideo)throw Error("Cannot start mirroring without video or audio capture");
return c};h.jc=function(){return"cast_streaming"};
h.sendRouteMessage=function(a,b,c){var d=this,e=this.s.get(a);if(e)return"string"!==typeof b?Promise.reject("String-typed message required"):e.Mf.kl(b);if(!c)return new Promise(function(a,c){"string"!==typeof b&&c(Error("Cannot send non-string messages via ApiHandler."));c=d.g.b;v(ym,"Received: "+b);var e=JSON.parse(b),f=e.clientId;"client_connect"==e.type?(v(ym,"App "+f),(e=wm(c.a,f))?(e.a=!0,(c=yl(c.b,e.routeId))&&c.qa.resolve(!0)):t(ym,"Client not found "+f)):xm(c,f)?(c=c.f[e.type])&&c(e):t(ym,
"No route for "+f);a()});var f=Rn(this.j,a);if(!f)return Promise.reject(Error("Not managing the route "+a));var g=this.a.b(f.sinkId);if(!g)return Promise.reject(Error("Sink no longer accessible"));var l=(a=Oo(this.h,a))?a.clientId:this.w;return new Promise(function(a){Cl(d.u,g,c.namespace,b,l,f.session.transportId).then(a,a)})};h.sendRouteBinaryMessage=function(a,b){var c=this.s.get(a);return c?c.Mf.Ql(b):Promise.reject(Error("Route "+a+" does not support sending binary data."))};
h.vd=function(a,b){var c=this.a.b(b);if(!c)return!1;a=hp(a,c);return(a=dn(a))&&0!=a.length?Jb(a,function(a){return Yj(wk(c,a))}):!1};h.Lc=function(a,b,c){var d=bp(a);return d&&0!=d.length?b==chrome.cast.ag?!0:c&&c.mediaSource?(a=dn(c.mediaSource),Jb(a,function(a){return Ob(d,a)})):void 0==b||mp(this,b)?!0:!1:!1};
var hp=function(a,b,c){return Me(a)||Ne(a)?(a={appId:0==(b.a&1)?"85CDB22F":"0F5096E8",capabilities:$l(b.a)},(new Xm([a],void 0,void 0,void 0,c)).toString()):a},bp=function(a){var b=[];if(Me(a)||Ne(a)){var c=se();Le(a)&&"ChromeOS"!=c&&"Windows"!=c||b.push("85CDB22F");b.push("0F5096E8")}else(a=dn(a))&&(b=Yb(b,a));return b},ap=function(a){var b=fn(a);if(!b)return null;a=bp(a);var c=b.m||"",b=b.h;return c&&b?new sl(a,c,JSON.stringify(b)):null},mp=function(a,b){return 0==b.indexOf(chrome.cast.mg)?vn(a.j,
b.substr(chrome.cast.mg.length)):Xo(a.j,b)},zo=function(a,b,c){var d=a.B;if(Ol(d)&&Xj.hasOwnProperty(c.namespace_)){var e=b.Ea();if(e){var f=JSON.parse(c.data);if("RECEIVER_STATUS"===f.type){var g=f.status&&f.status.applications&&f.status.applications[0],l=f=null;g&&(g.appId&&(f=g.appId),g.sessionId&&(l=g.sessionId));g=d.b.get(e);d.b.set(e,new Ll(e,f,l));g&&g.appId===f||Pl(d)}}}a=a.g;b=b.getId();Xj.hasOwnProperty(c.namespace_)?Hn(a,b,c):In(a,b,c)};
$o.prototype.T=function(a){if(0==this.a.a.aa())this.b.onSinkAvailabilityUpdated(this,0);var b=this.g;a=a.getId();(a=Dn(b.a,a))&&a.session&&wn(b,a.session.sessionId);Ql(this.B);this.b.Gb()};var Vk=function(a,b){a.A.lh(b);Ql(a.B);a.b.Gb()};h=$o.prototype;h.ea=function(){return"cast.Provider"};h.ta=function(){return[new np(this.w,xi(this.f),this.m)]};h.wa=function(){var a=Lf(this);a&&(this.w=a.f,si(this.f,a.b),this.m=a.a)};h.searchSinks=function(){return Ga()};
h.createMediaRouteController=function(a,b,c){return(a=this.g.createMediaRouteController(a,b,c))?Promise.reject(a):Promise.resolve()};h.provideSinks=function(a){$k(this.a,a)};
var pm=function(a){var b=Zo(a.g.a)||a.mc().some(function(a){return a.isLocal});a.b.fd(a.ea(),b)},qp=function(a){var b=op(),c=a.Eb();if(b.s.has(c.id))throw Error("Cannot re-register for same route ID: "+c.id);u(b.l,"Registering remoter with route: "+c.id);a=new pp(a);b.s.set(c.id,a);b.b.rc(b,c);pm(b);a.a=function(a){return b.b.Qb(b,c.id,a)};return a},rp=function(a){var b=op();a=a.Eb();var c=b.s.get(a.id);c&&(u(b.l,"Unregistering remoter with route: "+a.id),c.a=null,b.s.delete(a.id),b.b.Zc(b,a),pm(b))};
$o.prototype.l=Ja("mr.CastProvider");var pp=function(a){this.Mf=a;this.a=null},sp=function(a,b){a.a&&a.a(b)},np=function(a,b,c){this.f=a;this.b=b;this.a=c};var tp=function(a,b){this.routeId=a;this.message=b},up=function(a){return"string"!=typeof a.message};var vp=function(a,b){this.input=a;this.domain=b};var wp=function(a){this.s=a;this.g=this.j=null},xp=function(a){if(null==a.g)if(null==a.j||Date.now()-a.j>=a.s)a.h();else{var b=Math.max(a.j+a.s-Date.now(),5);a.g=setTimeout(a.h.bind(a),b)}};wp.prototype.h=function(){null!=this.g&&(clearTimeout(this.g),this.g=null);this.w();this.j=Date.now()};wp.prototype.w=function(){};var yp=function(a,b){wp.call(this,20);this.a=new Map;this.b=new Set;this.u=null;this.m=this.f=0;this.v=!1;this.B=a;this.A=b;this.l=Ja("mr.RouteMessageSender")};la(yp,wp);yp.prototype.init=function(a){this.u=a;Of(this)};yp.prototype.stopListeningForRouteMessages=function(a){this.b.delete(a)};
yp.prototype.send=function(a,b){var c=this.a.get(a);c||(c=[],this.a.set(a,c));b=new tp(a,b);c.push(b);50<c.length&&1==c.length%50&&t(this.l,function(){return"Message queue length is excessively large "+("("+c.length+") for route "+a)});this.f+=up(b)?0:b.message.length;up(b)&&this.m++;zp(this);this.b.has(a)&&xp(this)};
var Ap=function(a,b){if(0!=b.length){b=ka(b);for(var c=b.next();!c.done;c=b.next())c=c.value,a.f-=up(c)?0:c.message.length,up(c)&&a.m--}},zp=function(a){var b=0<a.m||a.f>a.A;b!=a.v&&(a.v=b,a.B.fd(a.ea(),b))};yp.prototype.w=function(){if(this.u){for(var a=ka(this.b),b=a.next();!b.done;b=a.next()){var b=b.value,c=this.a.get(b);c&&0!=c.length&&(this.u(b,c),Ap(this,c),this.a.set(b,[]))}zp(this)}else this.l.error("sendMessagesCallback not set. Messages not delivered.")};yp.prototype.ea=function(){return"mr.RouteMessageSender"};
yp.prototype.ta=function(){var a=[].concat(ma(this.a.entries())).map(function(a){return[a[0],a[1].map(function(a){return a.message})]});return[new Bp(a,Array.from(this.b),this.f)]};yp.prototype.wa=function(){var a=Lf(this);if(a){this.a=new Map;for(var b={},c=ka(a.b),d=c.next();!d.done;b={routeId:b.routeId},d=c.next())d=d.value,b.routeId=d[0],d=d[1].map(function(a){return function(b){return new tp(a.routeId,b)}}(b)),this.a.set(b.routeId,d);this.b=new Set(a.a);this.f=a.f}};
var Bp=function(a,b,c){this.b=a;this.a=b;this.f=c};var Cp=function(){this.a=[]};Cp.prototype.listen=function(a,b,c){this.a.push({type:a,Ma:b,target:c})};Cp.prototype.w=function(a,b,c){var d=this.a.findIndex(function(d){return d.type==a&&d.Ma==b&&d.target==c});-1!=d&&this.a.splice(d,1)};Cp.prototype.dispatchEvent=function(a){this.a.forEach(function(b){b.type==a.type&&Promise.resolve().then(function(){return b.Ma.call(b.target,a)})})};var Dp=function(a,b,c){this.m=null!=c?a.bind(c):a;this.h=b;this.j=this.u.bind(this);this.g=[];this.a=!1;this.b=null};Dp.prototype.f=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];this.g=[].concat(ma(b));null==this.b?Ep(this):this.a=!0};var Ep=function(a){a.b=setTimeout(a.j,a.h);a.m.apply(a,[].concat(ma(a.g)))};Dp.prototype.u=function(){this.b=null;this.a&&(this.a=!1,Ep(this))};var Fp=/^([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/,Gp=[4278190080,4293918720,4294901760],Hp=[167772160,2886729728,3232235520],Ip=function(a){var b=document.createElement("a");b.href=a;return b};var Kp=function(a,b,c,d){b="["+b+"]: "+c+" "+d.responseURL+" => "+d.status+" ("+d.statusText+")";Jp(d)?u(a,b):v(a,b)},Jp=function(a){return 200<=a.status&&299>=a.status},Lp=function(a){a=(new DOMParser).parseFromString(a,"text/xml");return a.getElementsByTagNameNS("http://www.w3.org/1999/xhtml","parsererror").length?null:a};var Mp=function(){this.name="unknown";this.state="error";this.a=null;this.allowStop=!0;this.resource=null;this.extraData={}},Np=function(){var a=Error.call(this);this.message=a.message;"stack"in a&&(this.stack=a.stack)};la(Np,Error);var Pp=function(a,b){void 0===b&&(Op||(Op=new yc(10,2E3,1)),b=Op);this.b=a;this.a=b;this.l=Ja("mr.dial.Client")};
Pp.prototype.launchApp=function(a,b){var c=this;return this.a.send(Qp(this,a),"POST",b,{timeoutMillis:15E3}).then(function(a){return Rp(c,"launchApp","POST",a)})};
var Sp=function(a,b){return a.a.send(Qp(a,b),"DELETE").then(function(b){return Rp(a,"stopApp","DELETE",b)})},Tp=function(a,b){return a.a.send(Qp(a,b),"GET",void 0,{nh:3}).then(function(c){Kp(a.l,"GetAppInfo","GET",c);if(!Jp(c)){if(404==c.status)throw new Np;throw Error("Response error: "+c.status);}c=Lp(c.responseText);if(!c)throw u(a.l,"Invalid or empty response"),Error("Invalid or empty response");var d=c.getElementsByTagName("service");if(!d||1!=d.length)throw u(a.l,"Invalid GET response (invalid service)"),
Error("Invalid GET response (invalid service)");c=new Mp;for(var e=0,f=d[0].childNodes.length;e<f;e++){var g=d[0].childNodes[e];if("state"==g.nodeName){a:switch(g.textContent){case "running":g="running";break a;case "stopped":g="stopped";break a;default:g="error"}c.state=g}else"name"==g.nodeName?c.name=g.textContent:"link"==g.nodeName?c.resource=g.getAttribute("href"):"options"==g.nodeName?c.allowStop="false"!=g.getAttribute("allowStop"):c.extraData[g.nodeName]=g.innerHTML}if("unknown"==c.name)throw u(a.l,
"GET response missing name value"),Error("GET response missing name value");if(c.name!=b)throw u(a.l,"GET app name mismatch"),Error("GET app name mismatch");if("error"==c.state)throw u(a.l,"GET response missing state value"),Error("GET response missing state value");if((d=/installable=(.+)/.exec(c.state))&&d[1])c.state="installable",c.a=d[1];else if("running"!=c.state&&"stopped"!=c.state)throw u(a.l,"GET response has invalid state value"),Error("GET response has invalid state value");return c})},
Qp=function(a,b){a=a.b.Ob;"/"!=a.charAt(a.length-1)&&(a+="/");return a+b},Rp=function(a,b,c,d){return new Promise(function(e,f){Kp(a.l,b,c,d);Jp(d)?e():f(Error(d.statusText))})},Op=null;var Up=function(a,b){this.appName=a;this.launchParameter=void 0===b?"":b},Wp=function(a){if(a.startsWith("urn:dial-multiscreen-org:dial:application:")){var b=a.indexOf("?"),c=a.substring(42,0<b?b:void 0);a=c&&0<c.length?new Up(c,0<b?a.substring(b+1):void 0):null}else a=Vp(a);return a},Vp=function(a){var b=a&&(new URL(a)).hash;if(!b)return null;a=(a=Xp.exec(b))?a[1]:null;if(!a)return null;a=decodeURIComponent(a);if(b=(b=Yp.exec(b))?b[1]:void 0)try{b=ck(b)}catch(c){return t(Zp,"Invalid base64 encoded postData:"+
b),null}return new Up(a,b)},Zp=Ja("mr.dial.MediaSource"),Xp=/__dialAppName__=([A-Za-z0-9-._~!$&'()*+,;=%]+)/,Yp=/__dialPostData__=([A-Za-z0-9]+={0,2})/;var $p=function(a,b){this.vb=a;this.appName=b};var aq=function(a){this.a=new Map;this.b=a};aq.prototype.init=function(){Of(this)};aq.prototype.clear=function(){this.a.clear()};aq.prototype.add=function(a){if(!this.a.get(a.vb.id)){this.a.set(a.vb.id,a);var b=this.b;bq(b);b.g.rc(b,a.vb)}};var cq=function(a,b){a=ka(a.a);for(var c=a.next();!c.done;c=a.next())if(c=ka(c.value),c.next(),c=c.next().value,c.vb.sinkId==b)return c;return null},eq=function(a,b){var c=a.a.get(b);c&&(a.a.delete(b),dq(a.b,c))},fq=function(a){return Array.from(a.a.values(),function(a){return a.vb})};
aq.prototype.ea=function(){return"dial.ActivityRecords"};aq.prototype.ta=function(){return[Array.from(this.a)]};aq.prototype.wa=function(){var a=Lf(this);a&&(this.a=new Map(a))};var gq={En:0,yq:1,vp:2,Dn:3},hq={ERROR:0,Np:1,EMPTY:2},iq=function(a){cb("MediaRouter.Dial.Create.Route",a,gq)};var jq=function(){this.a=this.modelName=this.deviceType=this.expireTimeMillis=this.fetchTimeMillis=this.appUrl=this.ipAddress=this.friendlyName=this.deviceLabel=this.uniqueId=null},kq=function(a){if(a.deviceLabel)if(a.uniqueId)if(a.friendlyName)if(a.ipAddress)if(a.appUrl)if(a.fetchTimeMillis)if(a.expireTimeMillis){var b=a.ipAddress;a=Ip(a.appUrl);b="http:"==a.protocol&&a.hostname==b?null:"Invalid appUrl"}else b="Missing expireTimeMillis";else b="Missing fetchTimeMillis";else b="Missing appUrl";else b=
"Missing ipAddress";else b="Missing friendlyName";else b="Missing uniqueId";else b="Missing deviceLabel";return b};jq.prototype.toString=function(){return JSON.stringify(this,function(a,b){return"string"===typeof b&&b.startsWith("uuid:")?"***":b})};
var lq=function(a){var b=new jq;b.uniqueId=a.uniqueId;b.deviceLabel=a.deviceLabel;b.friendlyName=a.friendlyName;b.ipAddress=a.ipAddress;b.appUrl=a.appUrl;b.fetchTimeMillis=a.fetchTimeMillis;b.expireTimeMillis=a.expireTimeMillis;b.deviceType=a.deviceType;b.modelName=a.modelName;b.a=a.configId;return b},nq=function(a){void 0===a&&(mq||(mq=new yc(10,3E3,2)),a=mq);this.a=new Map;this.b=new Map;this.f=new Map;this.g=a;this.l=Ja("mr.dial.DeviceDescriptionService");Of(this)};nq.prototype.ea=function(){return"mr.dial.DeviceDescriptionService"};
nq.prototype.ta=function(){return[Array.from(this.a)]};nq.prototype.wa=function(){var a=Lf(this);if(a)for(var a=ka(a),b=a.next();!b.done;b=a.next()){var c=ka(b.value),b=c.next().value,c=c.next().value;null!=kq(lq(c))?this.l.error("Dropping invalid description "+(b+" loaded from storage.")):this.a.set(b,lq(c))}};
var pq=function(a,b){var c;if(c=a.a.get(b.deviceLabel)){if(c.a!=b.configId||Date.now()>=c.expireTimeMillis)v(a.l,"Removing invalid entry "+c.toString()),a.a.delete(b.deviceLabel),c=null}else c=null;return c?(bb("MediaRouter.Dial.Device.Description.Cached"),Promise.resolve(c)):oq(a,b)},oq=function(a,b){if(!qq(b.deviceDescriptionUrl))return Promise.reject(Error("Invalid device description URL: "+b.deviceDescriptionUrl));var c=a.b.get(b.deviceLabel);if(c&&c.deviceDescriptionUrl==b.deviceDescriptionUrl)return c.qa.a;
var d=new eb,c={deviceDescriptionUrl:b.deviceDescriptionUrl,qa:d};a.b.set(b.deviceLabel,c);chrome.dial.fetchDeviceDescription(b.deviceLabel,function(c){a.b.delete(b.deviceLabel);c?((c=rq(a,b,c.deviceDescription,c.appUrl))?(u(a.l,"Got device description for "+c.deviceLabel),v(a.l,"... device description was: "+c.toString()),null!=c.a&&(v(a.l,"Caching device description for "+c.deviceLabel),a.a.set(b.deviceLabel,c))):(cb("MediaRouter.Dial.Device.Description.Failure",1,hq),u(a.l,"Invalid device description"),
c=null),c?d.resolve(c):d.reject(Error("Failed to process device description"))):d.reject(Tn("chrome.dial.fetchDeviceDescription"))});return d.a},rq=function(a,b,c,d){var e=Lp(c);if(!e)return null;var f=new jq;f.fetchTimeMillis=Date.now();f.expireTimeMillis=f.fetchTimeMillis+18E5;f.deviceLabel=b.deviceLabel;f.a=b.configId;b=Ip(b.deviceDescriptionUrl);f.ipAddress=b.hostname;f.deviceType=sq(e,"deviceType");f.modelName=sq(e,"modelName");f.friendlyName=sq(e,"friendlyName");f.uniqueId=sq(e,"UDN");!f.friendlyName&&
f.modelName&&(f.friendlyName=f.modelName,f.uniqueId&&(f.friendlyName+="["+f.uniqueId.slice(-4)+"]"),t(a.l,"Fixed device description: created friendlyName from modelName."));f.appUrl=d;d=kq(f);v(a.l,function(){return"Device description: "+tq(e)});return d?(t(a.l,function(){return"Device description failed to validate: "+f},d),null):f},sq=function(a,b){return(a=a.getElementsByTagName(b))&&0!=a.length?a[0].textContent:null},tq=function(a){var b=function(a){for(var b=0,c=a.length;b<c;b++)a[b].textContent=
"***"};b(a.getElementsByTagName("UDN"));b(a.getElementsByTagName("serialNumber"));return(new XMLSerializer).serializeToString(a)},uq=function(a,b){var c=a.f.get(b);if(c)return c.a;c=new eb;a.f.set(b,c);a.g.send(b,"GET").then(function(d){a.f.delete(b);Kp(a.l,"checkAccess","GET",d);c.resolve(Jp(d))},function(){a.l.error("Timed out checking access to device description URL.");c.resolve(!1)});return c.a},qq=function(a){a=Ip(a);var b;if(b="http:"==a.protocol)a:{b:if((a=a.hostname.match(Fp))&&5==a.length){b=
[];for(var c=0;4>c;c++)if(b[c]=Number.parseInt(a[c+1],10),0>b[c]||255<b[c]){a=null;break b}a=b}else a=null;if(a)for(a=(a[0]<<24|a[1]<<16|a[2]<<8|a[0])>>>0,b=0;3>b;b++)if((a&Gp[b])>>>0==Hp[b]){b=!0;break a}b=!1}return b},mq=null;var vq=null,wq=null,xq=function(){vq||(vq=new Hk(3,"dial.DialOnDeviceListEventListener","mr.dial.SinkDiscoveryService",chrome.dial.onDeviceList));wq||(wq=new Hk(4,"dial.DialOnErrorEventListener","mr.dial.SinkDiscoveryService",chrome.dial.onError));return[vq,wq]};var yq=function(a,b){b=void 0===b?new nq:b;this.f=a;this.m=b;this.l=Ja("mr.dial.SinkDiscoveryService");this.a=new Map;this.h=this.j=!1;this.b={Vb:0,Zb:0};this.g=0};la(yq,Qe);yq.prototype.init=function(){Of(this);$e("mr.dial.SinkDiscoveryService",this)};yq.prototype.start=function(){this.j||(u(this.l,"Starting..."),this.j=!0,xq().forEach(function(a){return a.addListener()}),zq(this))};yq.prototype.stop=function(){u(this.l,"Stopping...");this.j=!1;xq().forEach(function(a){return a.removeListener()})};
var zq=function(a){a.j?chrome.dial.discoverNow(function(b){u(a.l,"chrome.dial.discoverNow = "+b)}):u(a.l,"Not started. Ignoring discover().")},Dq=function(a,b){u(a.l,"addSinks returned "+b.length+" sinks");v(a.l,function(){return"....the list is: "+JSON.stringify(b)});var c=new Set(a.a.keys());b.forEach(function(b){var d=Aq(b.sink_id),e=b.extra_data.dial_media_sink,f=Bq.test(e.model_name);b=new nk(b.name,d);b.ib=e.ip_address.address.join(".");b.Ob=e.app_url.url;b.jb=e.model_name;e=ok(b,!f);Cq(a,e);
c.delete(e.getId())});var d=[];c.forEach(function(b){var c=a.a.get(b);d.push(c);a.a.delete(b)});0<d.length&&a.f.nc(d);var e=a.a.size;a.b={Vb:e,Zb:e}};
yq.prototype.u=function(a){var b=this;u(this.l,"onDeviceList returned "+a.length+" devices");v(this.l,function(){return"....the list is: "+JSON.stringify(a)});this.h=!1;var c=0,d=[],e=new Set;a.forEach(function(a){d.push(Eq(b,a).then(function(a){e.add(a.getId());Cq(b,a)},function(){c++}))});Qk(d).then(function(){b.h||Fq(b,e).then(function(){var a=b.a.size;Gq(b,a,a+c)})})};
var Gq=function(a,b,c){a.b={Vb:b,Zb:c};36E5>Date.now()-a.g||(b=a.b,db("MediaRouter.Dial.AvailableDevicesCount",b.Vb),db("MediaRouter.Dial.KnownDevicesCount",b.Zb),a.g=Date.now())},Cq=function(a,b){if(!a.h){v(a.l,"mayAddSink, id = "+b.getId());var c=a.a.get(b.getId());c?c.update(b)&&(v(a.l,"Updated sink "+c.getId()),a.f.Yc(c)):(v(a.l,function(){return"Adding new sink "+b.getId()+": "+("name = "+b.bb.friendlyName+(b.ib?", ip = "+b.ib:"")+(b.jb?", model = "+b.jb:"")+", apps = "+JSON.stringify(b.hb))}),
a.a.set(b.getId(),b),a.f.Hd(b))}},Fq=function(a,b){var c=[],d=[];a.a.forEach(function(e){b.has(e.getId())||d.push((e.Nb?uq(a.m,e.Nb):Promise.resolve(!1)).then(function(b){b||(a.a.delete(e.getId()),c.push(e))}))});return Qk(d).then(function(){0<c.length&&a.f.nc(c)})},Eq=function(a,b){return pq(a.m,b).then(function(a){var c=a.uniqueId?Aq(a.uniqueId):"",e=a.uniqueId?lk(kk(),c):b.deviceLabel,f=Bq.test(a.modelName),c=new nk(a.friendlyName,c);c.bb.id=e;c.ib=a.ipAddress;c.Ob=a.appUrl;c.Nb=b.deviceDescriptionUrl;
c.jb=a.modelName;return ok(c,!f)})},Aq=function(a){0==a.indexOf("uuid:")&&(a=a.substr(5));return a.replace(/-/g,"").toLowerCase()};
yq.prototype.w=function(a){switch(a.code){case "no_valid_network_interfaces":case "network_disconnected":t(this.l,"DIAL error: "+a.code+". Clear device list now.");a=Array.from(this.a.values());this.a.clear();this.f.nc(a);Gq(this,0,0);this.h=!0;break;case "no_listeners":case "socket_error":case "cellular_network":case "unknown":t(this.l,"DIAL error: "+a.code+". Keep device list.");break;default:t(this.l,"Unhandled DIAL error: "+a.code)}};
var Hq=function(a,b){return a.a.get(b)||null},Jq=function(a,b){var c=[];a.a.forEach(function(a){"available"==pk(a,b)&&c.push(a.bb)});return new Jo(c,Iq[b])};h=yq.prototype;h.Rg=function(){return this.b};h.handleEvent=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];if(a==chrome.dial.onDeviceList)this.u.apply(this,[].concat(ma(c)));else if(a==chrome.dial.onError)this.w.apply(this,[].concat(ma(c)));else throw Error("Unhandled event");};h.ea=function(){return"dial.DialSinkDiscoveryService"};
h.ta=function(){return[new Kq(Array.from(this.a),this.b),{deviceCountMetricsRecordTime:this.g}]};h.wa=function(){var a=Lf(this);if(a){for(var b=ka(a.sinks),c=b.next();!c.done;c=b.next())c=c.value,this.a.set(c[0],qk(c[1]));this.b=a.deviceCounts}if(a=Mf(this))this.g=a.deviceCountMetricsRecordTime};
var Iq={YouTube:"https://tv.youtube.com https://tv-green-qa.youtube.com https://tv-release-qa.youtube.com https://web-green-qa.youtube.com https://web-release-qa.youtube.com https://www.youtube.com".split(" "),Netflix:["https://www.netflix.com"],Pandora:["https://www.pandora.com"],Radio:["https://www.pandora.com"],Hulu:["https://www.hulu.com"],Vimeo:["https://www.vimeo.com"],Dailymotion:["https://www.dailymotion.com"],"com.dailymotion":["https://www.dailymotion.com"]},Bq=/Eureka Dongle|Chromecast Audio/i,
Kq=function(a,b){this.sinks=a;this.deviceCounts=b};var Lq=function(a,b){this.l=Ja("mr.dial.AppDiscoveryService");this.a=new Set;this.b=a;this.h=b;this.j=new Map;this.m=new Map;this.f=null;this.g=!1};Lq.prototype.init=function(){Of(this)};Lq.prototype.start=function(){u(this.l,"Starting periodic scanning.");this.g||(this.g=!0,Mq(this))};Lq.prototype.stop=function(){u(this.l,"Stopping periodic scanning.");this.g&&(this.g=!1,this.f&&(clearTimeout(this.f),this.f=null),this.j.clear())};
var Mq=function(a){u(a.l,"Start app status scan.");var b=[];Array.from(a.b.a.values()).forEach(function(c){b.push.apply(b,Nq(a,c))});Array.from(a.h.a.values()).forEach(function(c){b.push(Oq(a,c))});Qk(b).then(function(){a.g&&!a.f&&(v(a.l,"Scan complete; scheduling for next scan."),a.f=setTimeout(function(){v(a.l,"Start app status scan (timer-based)");a.f=null;Mq(a)},6E4))})},Nq=function(a,b){if(!b.Kc)return[];for(var c=[],d=ka(a.a),e=d.next();!e.done;e=d.next())c.push(a.u(e.value,b));return c};
Lq.prototype.u=function(a,b){var c=this;if("unknown"!=pk(b,a)&&36E5>Date.now()-(b.ge[a]||0)||!b.Kc)return Promise.resolve();v(this.l,"Querying "+b.getId()+" for "+a+" to update app status");return Pq(this,b,a).then(function(d){a:if("Netflix"==d.name)d=!d.extraData||"websocket"!=d.extraData.capabilities||"running"!=d.state&&"stopped"!=d.state?"unavailable":"available";else switch(d.state){case "running":case "stopped":d="available";break a;default:d="unavailable"}Qq(c,b,a,d)},function(d){d instanceof
Np?Qq(c,b,a,"unavailable"):(t(c.l,"Failed to process app availability; "+b.getId()+" does not support app availability"),ok(b,!1))})};
var Oq=function(a,b){var c=Hq(a.b,b.vb.sinkId);if(!c)return t(a.l,"Activity refers to nonexistent sink: "+b.vb.id),Promise.resolve();if(!c.Kc)return Promise.resolve();var d=b.appName;v(a.l,"Querying "+c.getId()+" for "+d+" to update activity");return Pq(a,c,d).then(function(b){"running"!=b.state&&Rq(a,c,d)},function(){return Rq(a,c,d)})},Sq=function(a,b){var c=a.m.get(b.getId());c||(c=new Pp(b),v(a.l,"Created DIAL client for "+b.getId()),a.m.set(b.getId(),c));return c},Pq=function(a,b,c){var d=Tq(b,
c),e=a.j.get(d);if(e)return e;e=Tp(Sq(a,b),c);a.j.set(d,e);b=function(){a.j.delete(d)};e.then(b,b);return e},Tq=function(a,b){return a.getId()+":"+b},Qq=function(a,b,c,d){v(a.l,"Got app status "+d+" from "+b.getId()+" for "+c);var e=pk(b,c);b.hb[c]=d;b.ge[c]=Date.now();d!=e&&a.b.f.Yc(b)},Rq=function(a,b,c){(b=cq(a.h,b.getId()))&&b.appName==c&&eq(a.h,b.vb.id)},Uq=function(a,b){return Array.from(a.b.a.values()).some(function(a){return"unknown"==pk(a,b)})};Lq.prototype.ea=function(){return"dial.AppDiscoveryService"};
Lq.prototype.ta=function(){return[Array.from(this.a)]};Lq.prototype.wa=function(){var a=Lf(this);this.a=new Set(a||[])};var Vq=function(a,b,c){this.g=a;this.a=b||new yq(this);this.b=new aq(this);this.f=c||new Lq(this.a,this.b);this.l=Ja("mr.DialProvider")};h=Vq.prototype;h.getName=function(){return"dial"};h.Ha=function(){this.b.init();this.a.init();this.f.init()};h.Ad=function(a){v(this.l,"GetAvailableSinks for "+a);return(a=Wp(a))?Jq(this.a,a.appName):Ko};
h.startObservingMediaSinks=function(a){var b=Wp(a);if(b){a=this.f;b=b.appName;if(!a.a.has(b)||Uq(a,b))a.a.add(b),0!=a.b.a.size&&(a.g?Array.from(a.b.a.values()).forEach(a.u.bind(a,b)):a.start());bq(this)}};h.stopObservingMediaSinks=function(a){if(a=Wp(a))this.f.a.delete(a.appName),Wq(this)};h.startObservingMediaRoutes=function(){bq(this)};h.stopObservingMediaRoutes=function(){Wq(this)};h.hd=function(a){a?(this.a.start(),bq(this)):this.a.stop()};
var Wq=function(a){(0==a.a.a.size||0==a.f.a.size&&0==a.b.a.size)&&a.f.stop()},bq=function(a){0<a.a.a.size&&(0<a.f.a.size||0<a.b.a.size)&&a.f.start()};h=Vq.prototype;h.Gd=function(a){return(a=Hq(this.a,a))?a.bb:null};h.mc=function(){return fq(this.b)};
h.createRoute=function(a,b,c,d){var e=this,f=Hq(this.a,b);if(!f)return iq(0),oe(Error("Unkown sink: "+b));kk().f=new hk(f.jb,f.Ea());var g=Wp(a);if(!g)return oe(Error("No app name set."));var l=g.appName,r=new Pp(f);return pe(Tp(r,l).then(function(a){if("running"==a.state)return Sp(r,l)}).then(function(){return r.launchApp(l,g.launchParameter)}).then(function(){return Xq(e,b,a,l,c,d)}).catch(function(a){iq(3);throw a;}))};h.joinRoute=function(){return oe(Error("Not supported"))};
h.connectRouteByRouteId=function(){return oe(Error("Not supported"))};h.detachRoute=function(){};var Xq=function(a,b,c,d,e,f){iq(1);b=Mj(e,a.getName(),b,c,!0,d,null);b.offTheRecord=f;a.b.add(new $p(b,d));return b};Vq.prototype.Hd=function(a){this.g.onSinkAvailabilityUpdated(this,1);bq(this);Nq(this.f,a);this.g.Gb();kk().b=new hk(a.jb,a.Ea())};
Vq.prototype.nc=function(a){var b=this;if(0==this.a.a.size)this.g.onSinkAvailabilityUpdated(this,0);Wq(this);a.forEach(function(a){var c=b.b;a=a.getId();if(a=cq(c,a))c.a.delete(a.vb.id),dq(c.b,a)});this.g.Gb()};Vq.prototype.Yc=function(){this.g.Gb()};var dq=function(a,b){b=b.vb;if(b.isLocal)a.g.onPresentationConnectionStateChanged(b.id,"terminated");Wq(a);a.g.Zc(a,b)};h=Vq.prototype;
h.terminateRoute=function(a){var b=this.b.a.get(a)||null;if(!b)return Promise.reject(new Io(3,"Route in DIAL provider not found for routeId "+a));eq(this.b,a);return(a=Hq(this.a,b.vb.sinkId))?Sp(new Pp(a),b.appName):Promise.reject(new Io(3,"Sink in DIAL provider not found for sinkId "+b.vb.sinkId))};h.Sc=function(){throw Error("Not implemented.");};h.jc=function(){return null};h.sendRouteMessage=function(){return Promise.reject(Error("DIAL sending messages is not supported"))};
h.sendRouteBinaryMessage=function(){return Promise.reject(Error("DIAL sending messages is not supported"))};h.vd=function(a,b){b=Hq(this.a,b);return!b||Me(a)?!1:(a=Wp(a))?"available"==pk(b,a.appName):!1};h.Lc=function(){return!1};h.searchSinks=function(){return Ga()};h.createMediaRouteController=function(){return Ga()};h.provideSinks=function(a){Dq(this.a,a)};var Yq=function(a,b){this.f=a;this.b=b;this.a=this.f.a;this.l=Ja("mr.cast.CastDialSinkDiscoveryCallbacks")},Zq=function(a,b){var c=a.a.b(b.getId());if(c)return c;(b=b.Ea())?(a=a.a,c=kk().a||8009,a=a.u.get(b+":"+c)):a=null;return a};Yq.prototype.Hd=function(a){Zq(this,a)?Fk(2):$q(this,a);this.b.Hd(a)};var $q=function(a,b){var c=tk(b);c&&cl(a.a,c).then(function(d){d?Zq(a,b)?Fk(2):(Wk(a.a,c),Fk(0)):bb("MediaRouter.Dial.Sink.Discovered.NonCast")},ra)};
Yq.prototype.nc=function(a){var b=this;w(a,function(a){var c=b.a.b(a.getId());c&&c.Xb&&Xk(b.a,a.getId())});this.b.nc(a)};Yq.prototype.Yc=function(a){var b=this.a.b(a.getId());b?b.Xb&&(b.update(a.bb.friendlyName,a.Ea(),b.va(),b.a)&&u(this.l,"Updated Cast sink with DIAL sink: "+a.getId()),Vk(this.a.f,b)):$q(this,a);this.b.Yc(a)};var ar=function(a,b){this.m=new yq(new Yq(b,this));this.f=new ti;this.b=a;this.h=this.j=0;this.g=new Hl;this.a=new Vq(this,this.m)};h=ar.prototype;h.ea=function(){return"cast.DialProviderWrapper"};h.ta=function(){return[new br(xi(this.f),this.j,this.h,this.g.R())]};h.wa=function(){var a=Lf(this);a&&(si(this.f,a.b),this.j=a.sequenceNumber,this.h=a.f,Gl(this.g,a.a))};h.getName=function(){return this.a.getName()};h.Ha=function(){this.a.Ha();Of(this)};h.mc=function(){return this.a.mc()};h.sh=function(){};
h.Ad=function(a){return this.a.Ad(a)};h.startObservingMediaSinks=function(a){this.a.startObservingMediaSinks(a)};h.stopObservingMediaSinks=function(a){this.a.stopObservingMediaSinks(a)};h.startObservingMediaRoutes=function(a){this.a.startObservingMediaRoutes(a)};h.stopObservingMediaRoutes=function(a){this.a.stopObservingMediaRoutes(a)};h.hd=function(a){this.a.hd(a)};h.Gd=function(a){return this.a.Gd(a)};
var dr=function(a,b,c,d,e){var f=Wp(b),g=Hq(a.m,c);if(!g)return Promise.reject(Error("Attempting custom launch with closed route"));var l=f.appName;if(!l)return Promise.reject(Error("No app name given"));var r=an(b);return r?Tp(new Pp(g),l).then(function(y){var z=Xq(a.a,c,b,l,e,d);y={routeId:z.id,sinkId:g.getId(),appName:l,zg:y,launchParameter:f.launchParameter,session:null,clientId:null};a.f.set(z.id,y);var I=cr(a,y.sinkId),H=new um("receiver_action",{receiver:I,action:chrome.cast.ud.CAST});H.clientId=
r;a.b.Qb(a,y.routeId,H);var H=chrome.cast.L,ha=String(a.h);a.h=(a.h+1)%9007199254740992;I=new H(ha,"",y.appName,[],I);y.session=I;y.clientId=r;I=new um("new_session",I);I.clientId=r;a.b.Qb(a,y.routeId,I);return z}):Promise.reject(Error("No client ID"))};ar.prototype.createRoute=function(a,b,c,d,e,f,g){return er.test(a)?pe(dr(this,a,b,d,c)):this.a.createRoute(a,b,c,d,e,f,g)};
ar.prototype.terminateRoute=function(a){var b=this.f.get(a);if(b&&b.session&&b.clientId){var c={receiver:cr(this,b.sinkId),action:chrome.cast.ud.STOP},c=new um("receiver_action",c);c.clientId=b.clientId;this.b.Qb(this,b.routeId,c);this.b.onPresentationConnectionStateChanged(b.routeId,"terminated")}return this.a.terminateRoute(a)};
ar.prototype.sendRouteMessage=function(a,b,c){var d=JSON.parse(b);switch(d.type){case "client_connect":return b=d.clientId,(a=this.f.get(a))?(c=cr(this,a.sinkId),c.receiverType=chrome.cast.fe.DIAL,c=new um("custom_dial_launch",new chrome.cast.gg(c,a.zg.state,a.zg.extraData)),c.clientId=b,b=this.j,this.j=(this.j+1)%9007199254740992,c.sequenceNumber=b,this.g.add(c.sequenceNumber),this.b.Qb(this,a.routeId,c),a=Promise.resolve()):a=Promise.reject(Error("Unknown route")),a;case "custom_dial_launch":if(this.g.contains(d.sequenceNumber))return this.g.remove(d.sequenceNumber),
b=d.message,(a=this.f.get(a))?b&&!b.doLaunch?a=Promise.resolve():(c=Hq(this.m,a.sinkId))?(c=new Pp(c),d=a.launchParameter,d=(b?b.launchParameter:null)||d,a=c.launchApp(a.appName,d)):a=Promise.reject(Error("Custom launch response for sink that no longer exists")):a=Promise.reject(Error("Unknown route")),a;break;case "v2_message":if("STOP"==d.message.type)return this.terminateRoute(a),Promise.resolve()}return this.a.sendRouteMessage(a,b,c)};
ar.prototype.sendRouteBinaryMessage=function(a){return Promise.reject(Error("Route "+a+" does not support sending binary data."))};var cr=function(a,b){a=Hq(a.m,b);b=new chrome.cast.Se(b,a.bb.friendlyName);b.ipAddress=a.Ea();b.receiverType=chrome.cast.fe.DIAL;return b};h=ar.prototype;h.Sc=function(a){return this.a.Sc(a)};h.jc=function(a){return this.a.jc(a)};h.vd=function(a,b){return this.a.vd(a,b)};h.Lc=function(a,b,c){return this.a.Lc(a,b,c)};
h.connectRouteByRouteId=function(a,b,c,d,e){return this.a.connectRouteByRouteId(a,b,c,d,e)};h.joinRoute=function(a,b,c,d,e,f){return this.a.joinRoute(a,b,c,d,e,f)};h.detachRoute=function(a){this.f.remove(a);this.a.detachRoute(a)};h.Gb=function(){this.b.Gb()};h.onSinkAvailabilityUpdated=function(a,b){this.b.onSinkAvailabilityUpdated(a,b)};h.rc=function(a,b){this.b.rc(this,b)};h.Zc=function(a,b){this.b.Zc(this,b)};h.ac=function(a,b){this.b.ac(this,b)};h.Qb=function(a,b,c){this.b.Qb(this,b,c)};
h.onPresentationConnectionStateChanged=function(a,b){this.b.onPresentationConnectionStateChanged(a,b)};h.onPresentationConnectionClosed=function(a,b,c){this.b.onPresentationConnectionClosed(a,b,c)};h.jf=function(a){return this.b.jf(a)};h.lf=function(){return this.b.lf()};h.oc=function(a){this.b.oc(a)};h.we=function(a,b,c){this.b.we(this,b,c)};h.vf=function(a){this.b.vf(a)};h.Hd=function(a){this.a.Hd(a)};h.nc=function(a){this.a.nc(a)};h.Yc=function(a){this.a.Yc(a)};h.sf=function(){};h.kh=function(){};
h.searchSinks=function(a,b){return this.a.searchSinks(a,b)};h.provideSinks=function(a){this.a.provideSinks(a)};h.createMediaRouteController=function(){return Ga()};h.Kf=function(a){this.b.Kf(a)};h.qf=function(){return this.b.qf()};h.fd=function(a,b){return this.b.fd(a,b)};var br=function(a,b,c,d){this.b=a;this.sequenceNumber=b;this.f=c;this.a=d},er=/__dialAppName__/;var fr=function(a){this.a=a;this.l=Ja("mr.ExternalMessageHandler")};
fr.prototype.onMessage=function(a,b,c){var d=this;u(this.l,"Received a message from "+b.id+" type: "+a.type);var e=chrome.runtime.id;"start"==a.type?(a=a.message,this.a.searchSinks("pseudo:cloud","urn:x-org.chromium.media:source:desktop",new vp(a.meetingName,a.domain)).then(function(a){var f="PresentationId"+b.id+gr++;d.a.createRoute("urn:x-org.chromium.media:source:desktop",a,f).then(function(a){c(new Nc(e,"route",a.id))}).catch(function(a){c(new Nc(e,"error",a))})},function(){c(new Nc(e,"error",
Error("Failed to find sink.")))})):"stop"==a.type?this.a.terminateRoute(a.message.routeId).then(function(){c(new Nc(e,"stopped"))}):(c(new Nc(e,"error",Error("Unhandled message type"))),this.l.error("Unhandled message type "+a.type))};var gr=0;var hr=function(a){if(0>=a)throw Error("invalid buffer size");this.a=[];this.b=[];this.f=a},ir=function(a,b){if(a.aa()>=a.f){if(a.kb())throw Error("Empty queue");0==a.a.length&&(a.a=a.b,a.a.reverse(),a.b=[]);a.a.pop()}a.b.push(b)};hr.prototype.aa=function(){return this.a.length+this.b.length};hr.prototype.kb=function(){return 0==this.aa()};hr.prototype.R=function(){var a=this.a.slice();a.reverse();a.push.apply(a,[].concat(ma(this.b)));return a};hr.prototype.clear=function(){this.a=[];this.b=[]};var jr=function(){this.a=new hr(1E3);this.b=Date.now()},lr=function(){null==kr&&(kr=new jr);return kr};jr.prototype.init=function(){Ka=1;var a=Ja("browser"),b=window.onerror;window.onerror=function(c,e,f,g,l){b&&b(c,e,f,g,l);a.error("Error: "+c+" ("+e+" @ Line: "+f+")",l)};La.push(this.g.bind(this));var c=window.localStorage["debug.logs"];c&&(Ka=Qa(c.toUpperCase()));window.localStorage["debug.console"]&&La.push(this.f.bind(this))};
jr.prototype.g=function(a){ir(this.a,nr(this,a,!1));a=a.Pb;a instanceof Error&&a.stack&&ir(this.a,a.stack)};jr.prototype.f=function(a){var b=[nr(this,a,!0)];a.Pb&&b.push(a.Pb);switch(a.level){case 3:console.error.apply(console,[].concat(ma(b)));break;case 2:console.warn.apply(console,[].concat(ma(b)));break;case 1:console.log.apply(console,[].concat(ma(b)));break;default:console.debug.apply(console,[].concat(ma(b)))}};
var nr=function(a,b,c){var d=["["];if(c)d.push(("       "+((Date.now()-a.b)/1E3).toFixed(3)).slice(-7));else{a=new Date(b.time);var e=function(a){return 10>a?"0"+a:a};d.push(a.getFullYear().toString(),"-",e(a.getMonth()+1),"-",e(a.getDate())," ",e(a.getHours()),":",e(a.getMinutes()),":",e(a.getSeconds()),".",e(Math.floor(a.getMilliseconds()/10)))}d.push("][",Pa[b.level],"][",b.F,"] ",b.message);if(!c&&null!=b.Pb)if(d.push("\n"),b.Pb instanceof Error)d.push(b.Pb.message);else try{d.push(JSON.stringify(b.Pb))}catch(f){d.push(b.Pb.toString())}d.push("\n");
return d.join("")},or=function(){var a=lr();return 0==a.a.aa()?"NA":a.a.R().join("")},pr=function(){var a=lr();Of(a)};jr.prototype.ea=function(){return"LogManager"};jr.prototype.ta=function(){return[this.a.R()]};jr.prototype.wa=function(){var a=this.a.R();this.a.clear();for(var b=ka(Lf(this)||[]),c=b.next();!c.done;c=b.next())ir(this.a,c.value);a=ka(a);for(c=a.next();!c.done;c=a.next())ir(this.a,c.value)};var kr=null;var qr=function(a){this.a=a;this.l=Ja("mr.InternalMessageHandler")};
qr.prototype.onMessage=function(a,b,c){var d=this;if("retrieve_log_data"!=a.type)c(new Nc(chrome.runtime.id,"error",Error("Unhandled message type")));else{var e={logs:or(),device:mk()};b=[];var f=Sc(e.device.ip).then(function(a){a.a&&(e.device.version=a.a)});b.push(f);var g=this.a.w;g&&(a=rr(this,g,a.source).then(function(a){a&&(e.castStreamingLogs=a)},function(){d.l.error("Log upload failed for service: "+g)}),b.push(a));b.push(sr(this,e,"mr.cast.SinkDiscoveryService","castDeviceCounts"));b.push(sr(this,
e,"mr.dial.SinkDiscoveryService","dialDeviceCounts"));Qk(b).then(function(){c(e)})}};var sr=function(a,b,c,d){return Ue(c).then(function(a){a=a.Rg();b[d]=a.Zb+"."+a.Vb},function(){a.l.error("Failed to get device counts for "+d+".")})},rr=function(a,b,c){return tr(a.a,b).then(function(a){return a.tf(c)})};var ur=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];for(var d=a,c=ka(c),e=c.next();!e.done;e=c.next()){if(void 0==d||"object"!=typeof d)return;d=d[e.value]}return d};var vr=function(){Hk.call(this,5,"cloud.GcmEventListener","mr.cloud.discovery.CloudSinkDiscoveryService",chrome.gcm.onMessage);this.l=Ja("mr.CloudGcmEventListener")};la(vr,Hk);vr.prototype.Ne=function(a){a=ur(a,"data","notification");if(!a)return this.l.error("Notification json not found"),!1;try{var b=JSON.parse(a);return!!b&&Array.isArray(b.events)&&0<b.events.length}catch(c){return this.l.error("Invalid json: "+a),!1}};var xr=function(){wr||(wr=new vr);return wr},wr=null;var Cr=function(a,b){this.h=a;this.m=b;this.j=new eb;this.a=this.j.a;this.g=yr(a.id);this.b=new eb;this.f=!1;zr(this);Ar(this);Br(this,new sf("GET_TURN_CREDENTIALS"))};Cr.prototype.start=function(){var a=this;return this.a.then(function(b){if(b.b)return Promise.reject(Error("Presentation already started"));b.start();return a.b.a})};Cr.prototype.stop=function(){var a=this;this.f=!1;return this.a.then(function(b){b.stop();a.a=Promise.reject(Error("Peer connection has already been stopped"))})};
var zr=function(a){a.g.onMessage=function(b){if(b.type)switch(b.type){case "TURN_CREDENTIALS":a.j.resolve(new xf(a.h.id,b.data.credentials));break;case "ANSWER":a.a.then(function(a){Ff(a,b.data)});break;case "STOP":a.b.reject("Stop signal received");a.stop();break;default:throw Error("Unknown message type: "+b.type);}else a.a.then(function(a){var c={type:"PRESENTATION_CONNECTION_MESSAGE",data:b};"string"==typeof c?a.j.send(c):a.j.send(JSON.stringify(c))})}},Ar=function(a){a.a.then(function(b){Bf(b,
function(b){Br(a,new sf("OFFER",new uf(b,null,null,a.m)))});Cf(b,function(b){b=tf(b);"STOP"==b.type&&a.stop();Br(a,b)});yf(b,function(){a.f=!0;Br(a,new sf("SESSION_START_SUCCESS"));a.b.resolve(a.h)});Af(b,function(){Br(a,new sf("SESSION_END"))});zf(b,function(b){a.f||a.b.reject(b);Br(a,new sf("SESSION_FAILURE"))})})},Br=function(a,b){a.g.sendMessage(b,Dr)},Dr={channelType:"cloud"};var Er={ACCEPTED:0,tn:1,TIMEOUT:2},Fr={SUCCESS:0,Di:1},Gr={Sj:0,mj:1,rr:2,fo:3,eo:4,ap:5,TIMEOUT:6,Zp:7},Hr={bo:0,Oq:1},Ir={Hp:0,Mo:1,USER:2,Wn:3},Jr=function(a){cb("MediaRouter.Cloud.Knock.Result",a,Er)},Kr=function(a){cb("MediaRouter.Cloud.Session.Start",a,Fr)},Lr=function(a){cb("MediaRouter.Cloud.Session.Type",a,Hr)},Mr=function(a){cb("MediaRouter.Cloud.Device.UserRole",a,Ir)};var Nr=function(a,b,c,d,e,f){c=void 0===c?null:c;a||null==c&&(c="default");this.gh=a;this.Aa=b;this.qb=c;this.Xc=void 0===d?null:d;this.Bb=void 0===e?null:e;this.Ac=void 0===f?null:f};Nr.prototype.b=function(){var a="";this.Bb?a=this.Bb:this.Xc&&(a=this.Xc);return a};Nr.prototype.zb=function(){return this.gh};Nr.prototype.getId=function(){return this.Aa};Nr.prototype.merge=function(a){!this.Ac&&a.Ac&&(this.Ac=a.Ac);!this.Bb&&a.Bb&&(this.Bb=a.Bb);this.Bb&&a.Bb&&this.Ac&&(this.Bb=a.Bb)};var Or=function(a,b){this.a=a;this.b=b},Pr=new Or("https://www.googleapis.com/clouddevices/v1","AIzaSyAOZM8ZYeov685QMjXT3sC7XNizfrTEKjA"),Qr=new Or("https://www.googleapis.com/calendar/v3",""),Rr=new Or("https://www.googleapis.com/hangouts/v1",""),Sr=new Or("https://networktraversal.googleapis.com/v1alpha","AIzaSyAOZM8ZYeov685QMjXT3sC7XNizfrTEKjA");var Tr=function(a,b){this.b=a;this.f=b;this.l=Ja("mr.cloud.calendar.CalendarService")},Xr=function(a){return Ur(a,a.f.a).then(function(b){u(a.l,Vr(b.length)+" events discovered before filtering.");return Wr(a,b)},function(b){t(a.l,"Error getting Hangouts from calendar.",b);return[]})},Vr=function(a){return 20<a?"20+":a.toString()},Ur=function(a,b){var c=Date.now();return Yr(a,b,new Date(c),new Date(c+9E5)).then(function(b){return b.filter(a.a)})};
Tr.prototype.a=function(a){return!(!a.start||!a.end||a.start.date||a.end.date||!a.start.dateTime||!a.end.dateTime)};
var Yr=function(a,b,c,d){b=Zr(Qr.a,["calendars",b,"events"],{timeMin:c.toJSON(),timeMax:d.toJSON(),singleEvents:!0});v(a.l,"Retrieving Hangouts from Calendar: "+b);return $r(a.b,b,"GET").then(function(a){return a.items?a.items:[]})},Wr=function(a,b){var c=[];b.filter(function(a){return a.hangoutLink}).forEach(function(b){var d=new Cm(b.hangoutLink);if("meet.google.com"==d.qb)c.push(new Nr(!0,d.a.substring(1),void 0,void 0,b.summary));else if(d=d.a.substring(12).split("/"),2==d.length){var f=ka(d),
d=f.next().value,f=f.next().value;if(-1!=d.indexOf(".")){var g=f;var l=d}c.push(new Nr(!1,f+"@"+d,l,g,b.summary,void 0))}else t(a.l,"Invalid hangout link from calendar event: "+b.hangoutLink)});u(a.l,Vr(c.length)+" events discovered with Hangout links.");return c};var as=function(a){this.email=a;this.imageUrl=null},bs=function(a){this.type=a},cs=function(a,b,c){this.type="__cloud_webrtc_session_message__";this.sessionDescription=a;this.user=null!=b?b:null;this.flungUrl=null!=c?c:null};la(cs,bs);
var ds=function(a,b,c){this.name=a;this.parameters=b;this.minimalRole=null!=c?c:"user"},es={_settings:{type:"string"},_presentationRequest:{type:"string"},_optMediaConstraints:{type:"string"},_webrtcMessage:{type:"string"},_user:{type:"string"}},fs=new ds("_knockingStartWebrtcSession",es,"viewer"),gs=new ds("_startWebrtcSession",es),hs=new ds("_stopSession",{},"viewer");var is=function(a){this.a=a;this.id=a.id;this.l=Ja("mr.cloud.devices.CloudDevice")};is.prototype.isAvailable=function(){if(this.getState().appStatus){var a="online"==this.a.connectionStatus,b="available"==this.getState().appStatus,c=js(this,864E5);v(this.l,"Device id: "+this.id+", availability: GCM connected "+a+", app Available: "+b+", checked in: "+c);return a&&b&&c}a=js(this,9E5);u(this.l,"Availability for legacy receiver app: "+a);return a};
var js=function(a,b){a=a.a.lastUpdateTimeMs?Number(a.a.lastUpdateTimeMs):null;return!!(a&&a>Date.now()-b)};is.prototype.b=function(){return this.getState().settings.receiverName};is.prototype.getId=function(){return this.id};is.prototype.getState=function(){return this.a.state._cloudCast};var ks=function(a){this.h=a;this.b=this.f=this.a=null;this.j=this.g=!1;this.l=Ja("mr.cloud.devices.CloudDevicesService");Of(this)};ks.prototype.getDevice=function(a){a=Zr(Pr.a,["devices",a]);return $r(this.h,a,"GET").then(function(a){return new is(a)})};
var ls=function(a,b){var c=Zr(Pr.a,["devices"],b);return $r(a.h,c,"GET").then(function(c){var d=(c.devices||[]).filter(function(a){return null!=a.commandDefs&&null!=a.commandDefs._cloudCast}).map(function(a){return new is(a)});if(c=c.nextPageToken){var f=tc(b);f.token=c;return ls(a,f).then(function(a){return d.concat(a)})}return d})};ks.prototype.ea=function(){return"CloudDevicesService"};ks.prototype.ta=function(){return[new ms(this.a,this.b,this.f)]};
ks.prototype.wa=function(){var a=Lf(this);a&&(this.a=a.Bk,this.b=a.gcmRegistrationId,this.f=a.Ak)};
var ns=function(a){return new Promise(function(b,c){a.g?c(Error("Registering...")):(a.g=!0,a.b&&a.f&&a.f+864E5>=Date.now()?(a.g=!1,b(a.b)):chrome.gcm.register(["919648714761"],function(d){a.g=!1;d?(v(a.l,"Got GCM ID: "+d),a.b=d,a.f=Date.now(),a.a=null,b(d)):(t(a.l,"Error: "+chrome.runtime.lastError.message),a.b=null,a.f=null,a.a=null,c(Error(chrome.runtime.lastError.message)))}))})},os=function(a,b){if(a.j)Promise.resolve();else if(a.j=!0,b&&(!a.a||a.a+864E5<Date.now())){b={filters:["myDevices"],
gcmRegistrationId:b,gcmSenderId:"919648714761",expirationTimeMs:864E5};var c=Zr(Pr.a,["subscriptions","subscribe"],{});$r(a.h,c,"POST",b).then(function(){v(a.l,"Subscribed on: "+Date.now());a.a=Date.now();a.j=!1;return Promise.resolve()},function(b){a.j=!1;throw b;})}else Promise.resolve()},ms=function(a,b,c){this.Bk=a;this.gcmRegistrationId=b;this.Ak=c};var ps=function(a,b,c,d,e,f,g){var l=lk(kk(),a);this.xa=new Zj(l,b,f,g,e);this.deviceId=a;this.a=c;this.model=d},qs=function(a,b,c,d,e){ps.call(this,a,b,["cloud"],"Chrome Streaming Receiver",d);this.Ve=c;this.isAvailable=e};la(qs,ps);var rs=function(a){var b=a.qb,c;a.Xc&&a.b()!=a.Xc&&(c=a.Xc);ps.call(this,a.getId(),a.b(),["mesi"],"Hangout",b,a.zb()?"meeting":"hangout",c);this.zb=a.zb();this.zc=a.Ac||""};la(rs,ps);var ss=function(a){this.a=a;this.l=Ja("mr.cloud.messaging.GcmMessageHandler")};ss.prototype.onMessage=function(a){var b=this;a=JSON.parse(a.data.notification);var c=kk();a.events.forEach(function(a){if(a.deviceId){var d=lk(c,a.deviceId);switch(a.type){case "deviceCreated":ts(b,a);break;case "deviceUpdated":us(b,a,d);break;case "deviceDeleted":vs(b.a,{sinkId:d});break;default:v(b.l,function(){return"[unhandled event] "+JSON.stringify(a)})}}else b.l.error("Device ID not provided")})};
var ts=function(a,b){var c=ur(b,"statePatch","_cloudCast","settings","receiverName");"string"!=typeof c?a.l.error("Receiver name not a string: "+c):(b=new qs(b.deviceId,c,"owner","default",!0),a=a.a,a.a.a.set(b.xa.id,b),a.a.b=Date.now(),ws(a.f,[b.xa]))},us=function(a,b,c){b=ur(b,"statePatch","_cloudCast","appStatus");if("string"!=typeof b)a.l.error("App status not a string: "+b);else if(a=a.a,b="available"==b,c=a.a.pc(c))c.isAvailable=b,a.a.b=Date.now(),xs(a.f,[c.xa])};var ys=function(a,b,c){this.h=a;this.g=b;this.a=new Map;this.f=new Map;this.b=null;this.j=c};ys.prototype.ad=function(){var a=this.b+this.j;if(null==this.b||a<Date.now())this.b=Date.now(),zs(this);return Array.from(this.a.values())};ys.prototype.pc=function(a){return this.a.get(a)||null};
var zs=function(a){a.h().then(function(b){As(a,b)})},As=function(a,b){var c=new Map(a.a),d=new Map,e=new Map,f=[],g=[];b.forEach(function(a){var b=a.xa.id;d.set(b,a);e.set(b,a.deviceId);c.has(b)?c.has(b)&&JSON.stringify(c.get(b))!=JSON.stringify(a)&&g.push(a.xa):f.push(a.xa);c.delete(b)});b=[].concat(ma(c.values())).map(function(a){return a.xa});a.f.clear();a.f=e;a.a.clear();a.a=d;Bs(a,f,g,b)},Bs=function(a,b,c,d){0<b.length&&ws(a.g,b);0<c.length&&xs(a.g,c);0<d.length&&Cs(a.g,d)},Es=function(a){for(var b=
{},c=ka(a.a.entries()),d=c.next();!d.done;d=c.next()){var e=ka(d.value),d=e.next().value,e=e.next().value;b[d]=e}c={};d=ka(a.f.entries());for(e=d.next();!e.done;e=d.next()){var f=ka(e.value),e=f.next().value,f=f.next().value;c[e]=f}return new Ds(b,c,a.b)},Fs=function(a,b){for(var c in b.sinks){var d=b.sinks[c],e=null;"Hangout"==d.model?e=new rs(new Nr(d.zb,d.deviceId,d.xa.domain,d.xa.description,d.xa.friendlyName,d.zc)):"Chrome Streaming Receiver"==d.model&&(e=new qs(d.deviceId,d.xa.friendlyName,
d.Ve,d.xa.domain,d.isAvailable));a.a.set(c,e)}for(c in b.a)a.f.set(c,b.a[c]);b.b&&(a.b=b.b)},Ds=function(a,b,c){this.sinks=a;this.a=b;this.b=c};var Gs=function(a,b){this.b=a;this.f=b;this.a=new ys(this.Ek.bind(this),b,2E4);this.g=new ss(this);xr().addListener();Of(this);$e("mr.cloud.discovery.CloudSinkDiscoveryService",this)};la(Gs,Qe);h=Gs.prototype;h.ad=function(){var a=this;ns(this.b).then(function(b){os(a.b,b)},function(){});return this.a.ad().filter(function(a){return a.isAvailable})};h.pc=function(a){return this.a.pc(a)};
h.handleEvent=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];if(a==chrome.gcm.onMessage)this.g.onMessage.apply(this.g,[].concat(ma(c)));else throw Error("Unhandled event: expected chrome.gcm.onMessage");};
h.Ek=function(){return ls(this.b,{descriptionSubstring:"Chrome Streaming Receiver"}).then(function(a){return a.map(function(a){bb("MediaRouter.Cloud.CloudReceiver.Sink.Discovered");var b=a.isAvailable()&&!(a.a.invitations&&0!=a.a.invitations.length);return new qs(a.getId(),a.b(),a.a.personalizedInfo.maxRole,"default",b)})})};h.ea=function(){return"CloudSinkDiscoveryService"};h.ta=function(){return[{cache:Es(this.a)}]};h.wa=function(){var a=Lf(this);a&&Fs(this.a,a.cache)};
var vs=function(a,b){if(b=a.a.pc(b.sinkId))a.a.a.delete(b.xa.id),a.a.b=Date.now(),Cs(a.f,[b.xa])};var Js=function(a,b,c){if(!Hs){qh();var d=ph;d.b=lh;var e=Is;d.a||(d.a=[]);d.a.push(e);Hs=!0}this.f=a;this.g=b;this.a=new ys(this.j.bind(this),c,2E4);this.b=new Map;Of(this)},Is=function(a){Ma({F:a.f,level:Ra(a.b.value),time:a.j,message:a.getMessage(),Pb:a.a})};Js.prototype.ad=function(){return this.a.ad()};Js.prototype.pc=function(a){return this.a.pc(a)};
Js.prototype.j=function(){var a=this;u(this.l,"Fetching hangouts");return Qk([Ks(this.g),Xr(this.f)]).then(function(b){var c=Array.from(a.b.values());b.forEach(function(b){b.ic?c=c.concat(b.value):a.l.error("Error discovering Hangouts",b.reason)});var d=c.reduce(function(a,b){var c=a[b.getId()];c?c.merge(b):c=b;a[c.getId()]=c;return a},{});return Object.keys(d).map(function(a){a=d[a];bb("MediaRouter.Cloud.Hangout.Sink.Discovered");return new rs(a)})})};
var Ms=function(a,b){return Ue("mr.mirror.hangouts.MeetingsService").then(function(a){return a.rb(b)}).then(function(b){return Ls(a,b)},function(){return b.input.match(/^#/)?Promise.reject(Error("Failed to resolve meeting alias.")):Ls(a,b.input,b.domain)})},Ls=function(a,b,c){c=c||void 0;var d=!c;b=new Nr(d,d?b:b+"@"+c,c,b,void 0,void 0);a.b.set(b.getId(),b);b=new rs(b);a.a.a.set(b.xa.id,b);return b.xa};Js.prototype.ea=function(){return"HangoutSinkDiscoveryService"};
Js.prototype.ta=function(){for(var a={},b=ka(this.b.entries()),c=b.next();!c.done;c=b.next()){var d=ka(c.value),c=d.next().value,d=d.next().value;a[c]=d}return[{cache:Es(this.a),manualHangouts:a}]};Js.prototype.wa=function(){var a=Lf(this);if(a){Fs(this.a,a.cache);for(var b in a.manualHangouts){var c=a.manualHangouts[b];this.b.set(b,new Nr(c.gh,c.Aa,c.qb,c.Xc,c.Bb,c.Ac))}}};Js.prototype.l=Ja("mr.cloud.discovery.HangoutSinkDiscoveryService");var Hs=!1;var Ns=!Cg&&!Ag||Ag&&9<=Number(Vg)||Cg&&Ug("1.9.1");Ag&&Ug("9");var Os=function(a,b){this.width=a;this.height=b};h=Os.prototype;h.clone=function(){return new Os(this.width,this.height)};h.toString=function(){return"("+this.width+" x "+this.height+")"};h.bk=function(){return this.width*this.height};h.kb=function(){return!this.bk()};h.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};h.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
h.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};var Ps={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},Qs=function(a){a=a.document;a="CSS1Compat"==a.compatMode?a.documentElement:a.body;return new Os(a.clientWidth,a.clientHeight)},Rs=function(a){return a?a.parentWindow||a.defaultView:window},Ss=function(a,b){if("textContent"in a)a.textContent=b;else if(3==a.nodeType)a.data=
String(b);else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=String(b)}else{for(var c;c=a.firstChild;)a.removeChild(c);a.appendChild((9==a.nodeType?a:a.ownerDocument||a.document).createTextNode(String(b)))}},Ts=function(a){this.a=a||oa.document||document};
Ts.prototype.setProperties=function(a,b){jc(b,function(b,d){b&&b.lc&&(b=b.Uc());"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:Ps.hasOwnProperty(d)?a.setAttribute(Ps[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})};Ts.prototype.getChildren=function(a){return Ns&&void 0!=a.children?a.children:Gb(a.childNodes,function(a){return 1==a.nodeType})};Ts.prototype.isElement=function(a){return ya(a)&&1==a.nodeType};
Ts.prototype.contains=function(a,b){if(!a||!b)return!1;if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||!!(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a};var Us=function(a,b,c,d,e,f,g,l){this.a=null;this.s=!1;this.w=rc();this.b=[];this.m=a?encodeURIComponent(String(a)):null;this.v=null;!d&&b&&(this.v=b);this.J=c||null;this.f=!d;this.g=null!=e?e:null;this.h=f||null;this.G=!!g;this.A=l||null};q(Us,sh);var Vs;var Ws=Vc("https://apis.google.com/js/client.js");Ws instanceof Uc&&Ws.constructor===Uc&&Ws.b===Tc?Vs=Ws.a:(Cb("expected object of type Const, got '"+Ws+"'"),Vs="type_error:Const");var Xs=new ed;Xs.a=Vs;
Us.prototype.init=function(){var a=n(function(a){this.a=a;var b=qa("client.request",a),c=qa("auth",a);b&&c?this.B():a.load("client",n(this.B,this))},this),b=Ys("gapi");b?a(b.gapi):Zs(this,a);return this.w.a};
var Ys=function(a){for(var b=window,c=qa(a,b);!c&&b!=window.top&&$s(b.parent,a);)b=b.parent,c=qa(a,b);return c?b:null},$s=function(a,b){try{return!!a&&null!=a.location.href&&vg(a,b)}catch(c){return!1}},Zs=function(a,b){var c=Ys("gapi_onload");if(c){var d=c.gapi_onload;c.gapi_onload=function(){d();b(c.gapi)}}else{window.gapi_onload=function(){b(window.gapi)};var e=document.createElement("script");e.src=fd(Xs);a.A&&Ss(e,ii(a.A));document.getElementsByTagName("head")[0].appendChild(e)}};
Us.prototype.B=function(){for(var a=0;a<this.b.length;a++)this.b[a].qa.resolve(at(this,this.b[a].requestData));this.s=!0;this.w.resolve(this.a)};Us.prototype.sendRequest=function(a){if(this.s)return at(this,a);var b=rc();this.b.push({requestData:a,qa:b});return b.a};
var at=function(a,b){var c,d=qa("config.get",a.a);if(!a.f){var e=d("googleapis.config/auth/useFirstPartyAuth");var f=d("googleapis.config/auth/useOriginToken")}null!=a.g&&(c=d("client/cors"));try{var g=qa("config.update",a.a);a.f||(g("googleapis.config/auth/useFirstPartyAuth",!1),g("googleapis.config/auth/useOriginToken",!1));null!=a.g&&g("client/cors",a.g);var l=qa("client.request",a.a),r=bt(a);b.headers&&xc(r,b.headers);var y={headers:r,root:a.J,path:b.path,method:b.method,body:b.body},z=b.params||
{};a.m&&!a.h?xc(z,{key:a.m}):a.h&&xc(z,{key:null});qc(z)||(y.params=z);var I=Ni(l(y));b.callback&&I.then(function(a){b.callback.apply(null,[a.result,a])},function(a){b.callback.apply(null,[a.result,a])});return I}finally{g=qa("config.update",a.a),a.f||(g("googleapis.config/auth/useFirstPartyAuth",e),g("googleapis.config/auth/useOriginToken",f)),null!=a.g&&g("client/cors",c)}},bt=function(a){if(a.f){if(a.h)return{Authorization:"Bearer "+a.h};var b=qa("auth.getAuthHeaderValueForFirstParty",a.a);return{Authorization:a.G?
b([]):b(),"X-Goog-AuthUser":a.v}}return{}};var ct=function(a){this.a=a},Zr=function(a,b,c){var d="";b.forEach(function(a){d+="/"+encodeURIComponent(a)});a=new Cm(a+d);c&&(c=Vm(c),Hm(a,c));return a},$r=function(a,b,c,d){return a.a.getAuthToken().then(function(e){var f=dt(e);return et(f,b,c,d).catch(function(f){if("INVALID_ACCESS_ERROR"==f)return ft(a,e,b,c,d);throw f;})})},ft=function(a,b,c,d,e){return gt(b).then(function(){return $r(a,c,d,e)})},et=function(a,b,c,d){return new Promise(function(e,f){var g=ht(b,c,function(a){a&&!a.error?e(a):
a&&401==a.error.code?f("INVALID_ACCESS_ERROR"):f(a&&a.error?a.error.errors?a.error.errors[0]:a:Error(a))},d);a.sendRequest(g)})},dt=function(a){a=new Us(void 0,void 0,void 0,!1,!1,a);a.init();return a},ht=function(a,b,c,d){a={callback:c,method:b,path:a.toString()};d&&(a.body=d);return a};var kt=function(){this.b=!1;this.a=null;this.f=!1;this.l=Ja("mr.cloud.identity.IdentityService");Of(this);it(this);jt(this)},lt=function(a){return a.a?a.a.substr(a.a.indexOf("@")+1):""};kt.prototype.getAuthToken=function(){return chrome.identity?new Promise(function(a,b){chrome.identity.getAuthToken({interactive:!1},function(c){chrome.runtime.lastError?b(Error("Unable to get user auth token: "+chrome.runtime.lastError.message)):null==c?b(Error("User is not logged in (no token found)")):a(c)})}):Promise.reject(Error("chrome.identity permission required for auth."))};
var gt=function(a){return new Promise(function(b){chrome.identity.removeCachedAuthToken({token:a},function(){b()})})},jt=function(a){a.getAuthToken().then(function(b){chrome.identity.getProfileUserInfo(function(c){a.b=!!c.email||!!c.id;a.a=c.email||null;b&&!a.b&&(a.f=!0)})},function(b){v(a.l,"Unable to set sign in and email.",b)})},it=function(a){chrome.identity.onSignInChanged.addListener(function(b,c){Je(6);a.b=c;u(a.l,"Signed in change: "+a.b);a.b?jt(a):(a.a=null,a.f=!1)})},mt=function(a){return a.getAuthToken().then(function(b){var c=
window.gapi;if(!c)return a.l.error("gapi not loaded."),!1;u(a.l,"Setting gapi auth token");c.auth.setToken({access_token:b});return!0})};kt.prototype.ea=function(){return"IdentityService"};kt.prototype.ta=function(){return[null,{signedIn:this.b,userEmail:this.a,kioskAuth:this.f}]};kt.prototype.wa=function(){var a=Mf(this);a&&(a.signedIn&&(this.b=a.signedIn),a.userEmail&&(this.a=a.userEmail),a.kioskAuth&&(this.f=a.kioskAuth))};var nt="cloudview.test@gmail.com castouts.qa.nohangouts@gmail.com castouts.qa@gmail.com castouts-qa.com castouts-test.com google.com youtube.com nest.com waze.com netflix.com twitter.com yahoo.com salesforce.com whirlpool.com nytimes.com kohls.com squareup.com ivci.com".split(" ");var ot={bg:{1E3:{other:"0K"},1E4:{other:"00K"},1E5:{other:"000K"},1E6:{other:"0M"},1E7:{other:"00M"},1E8:{other:"000M"},1E9:{other:"0B"},1E10:{other:"00B"},1E11:{other:"000B"},1E12:{other:"0T"},1E13:{other:"00T"},1E14:{other:"000T"}},ri:{1E3:{other:"0 thousand"},1E4:{other:"00 thousand"},1E5:{other:"000 thousand"},1E6:{other:"0 million"},1E7:{other:"00 million"},1E8:{other:"000 million"},1E9:{other:"0 billion"},1E10:{other:"00 billion"},1E11:{other:"000 billion"},1E12:{other:"0 trillion"},1E13:{other:"00 trillion"},
1E14:{other:"000 trillion"}}},pt=ot,pt=ot;var qt={AED:[2,"dh","\u062f.\u0625.","DH"],ALL:[0,"Lek","Lek"],AUD:[2,"$","AU$"],BDT:[2,"\u09f3","Tk"],BGN:[2,"lev","lev"],BRL:[2,"R$","R$"],CAD:[2,"$","C$"],CDF:[2,"FrCD","CDF"],CHF:[2,"CHF","CHF"],CLP:[0,"$","CL$"],CNY:[2,"\u00a5","RMB\u00a5"],COP:[32,"$","COL$"],CRC:[0,"\u20a1","CR\u20a1"],CZK:[50,"K\u010d","K\u010d"],DKK:[50,"kr.","kr."],DOP:[2,"RD$","RD$"],EGP:[2,"\u00a3","LE"],ETB:[2,"Birr","Birr"],EUR:[2,"\u20ac","\u20ac"],GBP:[2,"\u00a3","GB\u00a3"],HKD:[2,"$","HK$"],HRK:[2,"kn","kn"],HUF:[34,
"Ft","Ft"],IDR:[0,"Rp","Rp"],ILS:[34,"\u20aa","IL\u20aa"],INR:[2,"\u20b9","Rs"],IRR:[0,"Rial","IRR"],ISK:[0,"kr","kr"],JMD:[2,"$","JA$"],JPY:[0,"\u00a5","JP\u00a5"],KRW:[0,"\u20a9","KR\u20a9"],LKR:[2,"Rs","SLRs"],LTL:[2,"Lt","Lt"],MNT:[0,"\u20ae","MN\u20ae"],MVR:[2,"Rf","MVR"],MXN:[2,"$","Mex$"],MYR:[2,"RM","RM"],NOK:[50,"kr","NOkr"],PAB:[2,"B/.","B/."],PEN:[2,"S/.","S/."],PHP:[2,"\u20b1","PHP"],PKR:[0,"Rs","PKRs."],PLN:[50,"z\u0142","z\u0142"],RON:[2,"RON","RON"],RSD:[0,"din","RSD"],RUB:[50,"\u20bd",
"RUB"],SAR:[2,"Rial","Rial"],SEK:[50,"kr","kr"],SGD:[2,"$","S$"],THB:[2,"\u0e3f","THB"],TRY:[2,"TL","YTL"],TWD:[2,"NT$","NT$"],TZS:[0,"TSh","TSh"],UAH:[2,"\u0433\u0440\u043d.","UAH"],USD:[2,"$","US$"],UYU:[2,"$","$U"],VND:[48,"\u20ab","VN\u20ab"],YER:[0,"Rial","Rial"],ZAR:[2,"R","ZAR"]};var rt={eg:".",Oe:",",kg:"%",Ue:"0",Zi:"+",Pi:"-",hg:"E",lg:"\u2030",Qe:"\u221e",Ui:"NaN",dg:"#,##0.###",rj:"#E0",Yi:"#,##0%",si:"\u00a4#,##0.00",sd:"USD"},st=rt,st=rt;var vt=function(a,b,c){this.v=b;this.O=c||0;this.B=40;this.b=1;this.T=0;this.g=3;this.J=this.f=0;this.K=!1;this.A=this.u="";this.j="-";this.w="";this.a=1;this.m=!1;this.h=[];this.G=this.H=!1;this.s=0;if("number"==typeof a)switch(a){case 1:tt(this,st.dg);break;case 2:tt(this,st.rj);break;case 3:tt(this,st.Yi);break;case 4:a=st.si;b=["0"];c=qt[this.v||st.sd][0]&7;if(0<c){b.push(".");for(var d=0;d<c;d++)b.push("0")}a=a.replace(/0.00/g,b.join(""));tt(this,a);break;case 5:ut(this,1);break;case 6:ut(this,
2);break;default:throw Error("Unsupported pattern type.");}else tt(this,a)},tt=function(a,b){b.replace(/ /g,"\u00a0");var c=[0];a.u=wt(a,b,c);for(var d=c[0],e=-1,f=0,g=0,l=0,r=-1,y=b.length,z=!0;c[0]<y&&z;c[0]++)switch(b.charAt(c[0])){case "#":0<g?l++:f++;0<=r&&0>e&&r++;break;case "0":if(0<l)throw Error('Unexpected "0" in pattern "'+b+'"');g++;0<=r&&0>e&&r++;break;case ",":0<r&&a.h.push(r);r=0;break;case ".":if(0<=e)throw Error('Multiple decimal separators in pattern "'+b+'"');e=f+g+l;break;case "E":if(a.G)throw Error('Multiple exponential symbols in pattern "'+
b+'"');a.G=!0;a.J=0;c[0]+1<y&&"+"==b.charAt(c[0]+1)&&(c[0]++,a.K=!0);for(;c[0]+1<y&&"0"==b.charAt(c[0]+1);)c[0]++,a.J++;if(1>f+g||1>a.J)throw Error('Malformed exponential pattern "'+b+'"');z=!1;break;default:c[0]--,z=!1}0==g&&0<f&&0<=e&&(g=e,0==g&&g++,l=f-g,f=g-1,g=1);if(0>e&&0<l||0<=e&&(e<f||e>f+g)||0==r)throw Error('Malformed pattern "'+b+'"');l=f+g+l;a.g=0<=e?l-e:0;0<=e&&(a.f=f+g-e,0>a.f&&(a.f=0));a.b=(0<=e?e:l)-f;a.G&&(a.B=f+a.b,0==a.g&&0==a.b&&(a.b=1));a.h.push(Math.max(0,r));a.H=0==e||e==l;
d=c[0]-d;a.A=wt(a,b,c);c[0]<b.length&&";"==b.charAt(c[0])?(c[0]++,1!=a.a&&(a.m=!0),a.j=wt(a,b,c),c[0]+=d,a.w=wt(a,b,c)):(a.j+=a.u,a.w+=a.A)},ut=function(a,b){a.s=b;tt(a,st.dg);a.f=0;a.g=2;if(0<a.f)throw Error("Can't combine significant digits and minimum fraction digits");a.T=2};
vt.prototype.parse=function(a,b){b=b||[0];if(0!=this.s)throw Error("Parsing of compact numbers is unimplemented");a=a.replace(/ /g,"\u00a0");var c=a.indexOf(this.u,b[0])==b[0],d=a.indexOf(this.j,b[0])==b[0];c&&d&&(this.u.length>this.j.length?d=!1:this.u.length<this.j.length&&(c=!1));c?b[0]+=this.u.length:d&&(b[0]+=this.j.length);if(a.indexOf(st.Qe,b[0])==b[0]){b[0]+=st.Qe.length;var e=Infinity}else{e=a;var f=!1,g=!1,l=!1,r=-1,y=1,z=st.eg,I=st.Oe,H=st.hg;if(0!=this.s)throw Error("Parsing of compact style numbers is not implemented");
for(var ha="";b[0]<e.length;b[0]++){var Va=e.charAt(b[0]),Z=xt(Va);if(0<=Z&&9>=Z)ha+=Z,l=!0;else if(Va==z.charAt(0)){if(f||g)break;ha+=".";f=!0}else if(Va==I.charAt(0)&&("\u00a0"!=I.charAt(0)||b[0]+1<e.length&&0<=xt(e.charAt(b[0]+1)))){if(f||g)break}else if(Va==H.charAt(0)){if(g)break;ha+="E";g=!0;r=b[0]}else if("+"==Va||"-"==Va){if(l&&r!=b[0]-1)break;ha+=Va}else if(1==this.a&&Va==st.kg.charAt(0)){if(1!=y)break;y=100;if(l){b[0]++;break}}else if(1==this.a&&Va==st.lg.charAt(0)){if(1!=y)break;y=1E3;
if(l){b[0]++;break}}else break}1!=this.a&&(y=this.a);e=parseFloat(ha)/y}if(c){if(a.indexOf(this.A,b[0])!=b[0])return NaN;b[0]+=this.A.length}else if(d){if(a.indexOf(this.w,b[0])!=b[0])return NaN;b[0]+=this.w.length}return d?-e:e};
vt.prototype.format=function(a){if(isNaN(a))return st.Ui;var b=[];var c=a;if(0==this.s)c=yt;else{c=Math.abs(c);var d=zt(this,1>=c?0:At(c)).ff;c=zt(this,d+At(Bt(this,c/Math.pow(10,d)).fh))}a/=Math.pow(10,c.ff);b.push(c.prefix);d=0>a||0==a&&0>1/a;b.push(d?this.j:this.u);if(isFinite(a))if(a=a*(d?-1:1)*this.a,this.G){var e=a;if(0==e)Ct(this,e,this.b,b),Dt(this,0,b);else{a=Math.floor(Math.log(e)/Math.log(10)+2E-15);var f=Math.pow(10,a);isFinite(f)&&0!==f?e/=f:(f=Math.pow(10,Math.floor(a/2)),e=e/f/f,1==
a%2&&(e=0<a?e/10:10*e));f=this.b;if(1<this.B&&this.B>this.b){for(;0!=a%this.B;)e*=10,a--;f=1}else 1>this.b?(a++,e/=10):(a-=this.b-1,e*=Math.pow(10,this.b-1));Ct(this,e,f,b);Dt(this,a,b)}}else Ct(this,a,this.b,b);else b.push(st.Qe);b.push(d?this.w:this.A);b.push(c.ci);return b.join("")};
var Bt=function(a,b){var c=Math.pow(10,a.g);a=0>=a.T?Math.round(b*c):Math.round(Et(b*c,a.T,a.g));isFinite(a)?(b=Math.floor(a/c),c=Math.floor(a-b*c)):c=0;return{fh:b,mk:c}},Ct=function(a,b,c,d){if(a.f>a.g)throw Error("Min value must be less than max value");d||(d=[]);b=Bt(a,b);var e=b.fh,f=b.mk,g=0<a.f||0<f||!1;b=a.f;g&&(b=a.f);for(var l="",r=e;1E20<r;)l="0"+l,r=Math.round(r/10);var l=r+l,y=st.eg,r=st.Ue.charCodeAt(0),z=l.length,I=0;if(0<e||0<c){for(e=z;e<c;e++)d.push(String.fromCharCode(r));if(2<=
a.h.length)for(c=1;c<a.h.length;c++)I+=a.h[c];c=z-I;if(0<c)for(var e=a.h,I=z=0,H,ha=st.Oe,Va=l.length,Z=0;Z<Va;Z++){if(d.push(String.fromCharCode(r+1*Number(l.charAt(Z)))),1<Va-Z)if(H=e[I],Z<c){var fb=c-Z;(1===H||0<H&&1===fb%H)&&d.push(ha)}else I<e.length&&(Z===c?I+=1:H===Z-c-z+1&&(d.push(ha),z+=H,I+=1))}else{c=l;l=a.h;e=st.Oe;H=c.length;ha=[];for(z=l.length-1;0<=z&&0<H;z--){I=l[z];for(Va=0;Va<I&&0<=H-Va-1;Va++)ha.push(String.fromCharCode(r+1*Number(c.charAt(H-Va-1))));H-=I;0<H&&ha.push(e)}d.push.apply(d,
ha.reverse())}}else g||d.push(String.fromCharCode(r));(a.H||g)&&d.push(y);f=String(f);g=f.split("e+");2==g.length&&(f=String(Et(parseFloat(g[0]),a.T,1)),f=f.replace(".",""),f+=rb("0",parseInt(g[1],10)-f.length+1));a.g+1>f.length&&(f="1"+rb("0",a.g-f.length)+f);for(a=f.length;"0"==f.charAt(a-1)&&a>b+1;)a--;for(e=1;e<a;e++)d.push(String.fromCharCode(r+1*Number(f.charAt(e))))},Dt=function(a,b,c){c.push(st.hg);0>b?(b=-b,c.push(st.Pi)):a.K&&c.push(st.Zi);b=""+b;for(var d=st.Ue,e=b.length;e<a.J;e++)c.push(d);
c.push(b)},xt=function(a){a=a.charCodeAt(0);if(48<=a&&58>a)return a-48;var b=st.Ue.charCodeAt(0);return b<=a&&a<b+10?a-b:-1},wt=function(a,b,c){for(var d="",e=!1,f=b.length;c[0]<f;c[0]++){var g=b.charAt(c[0]);if("'"==g)c[0]+1<f&&"'"==b.charAt(c[0]+1)?(c[0]++,d+="'"):e=!e;else if(e)d+=g;else switch(g){case "#":case "0":case ",":case ".":case ";":return d;case "\u00a4":if(c[0]+1<f&&"\u00a4"==b.charAt(c[0]+1))c[0]++,d+=a.v||st.sd;else switch(a.O){case 0:d+=qt[a.v||st.sd][1];break;case 2:var g=a.v||st.sd,
l=qt[g],d=d+(g==l[1]?g:g+" "+l[1]);break;case 1:d+=qt[a.v||st.sd][2]}break;case "%":if(!a.m&&1!=a.a)throw Error("Too many percent/permill");if(a.m&&100!=a.a)throw Error("Inconsistent use of percent/permill characters");a.a=100;a.m=!1;d+=st.kg;break;case "\u2030":if(!a.m&&1!=a.a)throw Error("Too many percent/permill");if(a.m&&1E3!=a.a)throw Error("Inconsistent use of percent/permill characters");a.a=1E3;a.m=!1;d+=st.lg;break;default:d+=g}}return d},yt={prefix:"",ci:"",ff:0},zt=function(a,b){a=1==a.s?
pt.bg:pt.ri;null==a&&(a=pt.bg);if(3>b)return yt;b=Math.min(14,b);var c=a[Math.pow(10,b)];for(--b;!c&&3<=b;)c=a[Math.pow(10,b)],b--;if(!c)return yt;a=c.other;return a&&"0"!=a?(a=/([^0]*)(0+)(.*)/.exec(a))?{prefix:a[1],ci:a[3],ff:b+1-(a[2].length-1)}:yt:yt},At=function(a){if(!isFinite(a))return 0<a?a:0;for(var b=0;1<=(a/=10);)b++;return b},Et=function(a,b,c){if(!a)return a;b=b-At(a)-1;if(b<-c)return c=Math.pow(10,c),Math.round(a/c)*c;c=Math.pow(10,b);return Math.round(a*c)/c};var Ft=function(a){return 1==a%10&&11!=a%100?"one":2==a%10&&12!=a%100?"two":3==a%10&&13!=a%100?"few":"other"},Gt=Ft,Gt=Ft;var Ht=function(a,b){if(void 0===b){b=a+"";var c=b.indexOf(".");b=Math.min(-1==c?0:b.length-c-1,3)}return 1==(a|0)&&0==b?"one":"other"},It=Ht,It=Ht;var Mt=function(a){this.g=a;this.b=this.a=this.j=null;a=st;var b=pt;if(Jt!==a||Kt!==b)Jt=a,Kt=b,Lt=new vt(1);this.h=Lt},Jt=null,Kt=null,Lt=null,Nt=/'([{}#].*?)'/g,Ot=/''/g;Mt.prototype.format=function(a){if(this.g){this.j=[];var b=Pt(this,this.g);this.b=Qt(this,b);this.g=null}if(this.b&&0!=this.b.length)for(this.a=x(this.j),b=[],Rt(this,this.b,a,!1,b),a=b.join("");0<this.a.length;)a=a.replace(this.f(this.a),this.a.pop());else a="";return a};
var Rt=function(a,b,c,d,e){for(var f=0;f<b.length;f++)switch(b[f].type){case 4:e.push(b[f].value);break;case 3:var g=b[f].value,l=a,r=e,y=c[g];k(y)?(l.a.push(y),r.push(l.f(l.a))):r.push("Undefined parameter - "+g);break;case 2:g=b[f].value;l=e;r=g.he;k(c[r])?(r=g[c[r]],k(r)||(r=g.other),Rt(a,r,c,d,l)):l.push("Undefined parameter - "+r);break;case 0:g=b[f].value;St(a,g,c,It,d,e);break;case 1:g=b[f].value;St(a,g,c,Gt,d,e);break;default:Cb("Unrecognized block type: "+b[f].type)}},St=function(a,b,c,d,
e,f){var g=b.he,l=b.Bg,r=+c[g];isNaN(r)?f.push("Undefined or invalid parameter - "+g):(l=r-l,g=b[c[g]],k(g)||(d=a.h.U?d(l,a.h.U()):d(l),g=b[d],k(g)||(g=b.other)),b=[],Rt(a,g,c,e,b),c=b.join(""),e?f.push(c):(a=a.h.format(l),f.push(c.replace(/#/g,a))))},Pt=function(a,b){var c=a.j,d=n(a.f,a);b=b.replace(Ot,function(){c.push("'");return d(c)});return b=b.replace(Nt,function(a,b){c.push(b);return d(c)})},Tt=function(a){var b=0;var c=[],d=[],e=/[{}]/g;e.lastIndex=0;for(var f;f=e.exec(a);){var g=f.index;
"}"==f[0]?(c.pop(),0==c.length&&(f={type:1},f.value=a.substring(b,g),d.push(f),b=g+1)):(0==c.length&&(b=a.substring(b,g),""!=b&&d.push({type:0,value:b}),b=g+1),c.push("{"))}b=a.substring(b);""!=b&&d.push({type:0,value:b});return d},Ut=/^\s*(\w+)\s*,\s*plural\s*,(?:\s*offset:(\d+))?/,Vt=/^\s*(\w+)\s*,\s*selectordinal\s*,/,Wt=/^\s*(\w+)\s*,\s*select\s*,/,Qt=function(a,b){var c=[];b=Tt(b);for(var d=0;d<b.length;d++){var e={};if(0==b[d].type)e.type=4,e.value=b[d].value;else if(1==b[d].type){var f=b[d].value;
switch(Ut.test(f)?0:Vt.test(f)?1:Wt.test(f)?2:/^\s*\w+\s*/.test(f)?3:5){case 2:e.type=2;e.value=Xt(a,b[d].value);break;case 0:e.type=0;e.value=Yt(a,b[d].value);break;case 1:e.type=1;e.value=Zt(a,b[d].value);break;case 3:e.type=3;e.value=b[d].value;break;default:Cb("Unknown block type for pattern: "+b[d].value)}}else Cb("Unknown part of the pattern.");c.push(e)}return c},Xt=function(a,b){var c,d="";b=b.replace(Wt,function(a,b){d=b;return""});var e={};e.he=d;b=Tt(b);for(var f=0;f<b.length;){var g=b[f].value;
f++;1==b[f].type?c=Qt(a,b[f].value):Cb("Expected block type.");e[g.replace(/\s/g,"")]=c;f++}return e},Yt=function(a,b){var c,d="",e=0;b=b.replace(Ut,function(a,b,c){d=b;c&&(e=parseInt(c,10));return""});var f={};f.he=d;f.Bg=e;b=Tt(b);for(var g=0;g<b.length;){var l=b[g].value;g++;1==b[g].type?c=Qt(a,b[g].value):Cb("Expected block type.");f[l.replace(/\s*(?:=)?(\w+)\s*/,"$1")]=c;g++}return f},Zt=function(a,b){var c,d="";b=b.replace(Vt,function(a,b){d=b;return""});var e={};e.he=d;e.Bg=0;b=Tt(b);for(var f=
0;f<b.length;){var g=b[f].value;f++;1==b[f].type?c=Qt(a,b[f].value):Cb("Expected block type.");e[g.replace(/\s*(?:=)?(\w+)\s*/,"$1")]=c;f++}return e};Mt.prototype.f=function(a){return"\ufddf_"+(a.length-1).toString(10)+"_"};var $t=chrome.i18n.getMessage("1522140683318860351"),au=chrome.i18n.getMessage("4246483347873264186"),bu=chrome.i18n.getMessage("5991427458288444010"),ie=chrome.i18n.getMessage("6063910461797960050"),cu=chrome.i18n.getMessage("7735695102441495789"),du=chrome.i18n.getMessage("4575332923598659024"),eu=chrome.i18n.getMessage("2297080986956220930"),fu=new Mt(eu);var gu=function(a){this.a=a;this.l=Ja("mr.cloud.mesi.MesiService")},Ks=function(a){var b=Rr.a;.1>Math.random()&&(b=b.replace("v1","v1_preprod"));b=Zr(b,["hangouts","search"]);u(a.l,"Retrieving Hangouts from MESI: "+b);return $r(a.a,b,"POST",hu).then(function(a){var b=[];a.result&&(b=a.result.map(function(a){var b=a.hangout,c=b.meeting_room_name,d;b.meeting_domain?d=b.meeting_domain:"BUSINESS"==b.type&&b.company_title&&(d=b.company_title.toLowerCase());var e=fu.format({ORGANIZER:"",PARTICIPANTS:0});
if((a=a.participant)&&0<a.length)var y=a[0].display_name,e=a.reduce(function(a,b){a.add(b.user_id);"ORGANIZER"==b.role&&(y=b.display_name);return a},new Set),e=fu.format({ORGANIZER:y,PARTICIPANTS:e.size});return c&&d?new Nr(!1,c+"@"+d,d,c,e,b.hangout_id):new Nr(!1,b.hangout_id,d,c,e,b.hangout_id)}));return b})},hu={request_header:{client_version:{client_id:"39"}},search_sources:["0"]};var iu=function(a,b,c){this.state=a;this.type=null!=b?b:null;this.a=null!=c?c:null},ju=function(a){this.a=a},mu=function(a,b,c,d){return ku(a,fs,b,c,d,35E3).then(function(b){return lu(a,b)})},ou=function(a,b,c,d){return ku(a,gs,b,c,d,23E3).then(function(a){var b=a.state;return"done"==b?(a=nu(a),new iu(b,a.type,new cs(a.sessionDescription))):new iu(b)})},ku=function(a,b,c,d,e,f){var g={_webrtcMessage:JSON.stringify(d.presentationUrl?new cs(d.description,null,d.presentationUrl):new cs(d.description))};
d.settings&&(g._settings=pf(d.settings));d.mediaConstraints&&(g._optMediaConstraints=JSON.stringify(d.mediaConstraints));e&&(g._user=JSON.stringify(e));return pu(a,c,b,g,f)},lu=function(a,b){var c=b.state;switch(c){case "done":return Promise.resolve(qu(b));case "queued":case "inProgress":return ru(a,b).then(function(b){return lu(a,b)});default:return Promise.resolve(new iu(c))}},ru=function(a,b){return new Promise(function(c){var d=setInterval(function(){su(a,b.id).then(function(a){"queued"!=a.state&&
"inProgress"!=a.state&&(clearInterval(d),c(a))})},2E3)})},qu=function(a){a=nu(a);return"__cloud_webrtc_session_message__"==a.type?new iu("done","knocking_cloud_webrtc_session_message",new cs(a.sessionDescription)):new iu("done",a.type)},pu=function(a,b,c,d,e){b={deviceId:b,name:"_cloudCast."+c.name,parameters:d,expirationTimeoutMs:e||1E4};c={};e&&(c.responseAwaitMs=Math.min(e+5E3,25E3));e=Zr(Pr.a,["commands"],c);return $r(a.a,e,"POST",b)},nu=function(a){return a.results&&a.results.results?JSON.parse(a.results.results):
null},su=function(a,b){b=Zr(Pr.a,["commands",b]);return $r(a.a,b,"GET")};ju.$inject=["gapiService"];var tu=function(a,b,c,d){this.b=a;this.f=b;this.g=c;this.a=d},xu=function(a,b,c,d){return uu(a,b,d).then(function(b){a:{var d=c.id;if("done"!=b.state)d=Promise.reject(Error("Offer not executed by receiver. State: "+b.state));else{switch(b.type){case "__cloud_webrtc_session_message__":b=new sf("ANSWER",b.a.sessionDescription);vu(a.a,b,d);break;case "knocking_cloud_webrtc_session_message":Jr(0);b=new sf("KNOCK_ANSWER",b.a.sessionDescription);vu(a.a,b,d);break;case "knock_denied":Jr(1);wu(a,au,d);break;
case "knock_timeout":Jr(2);wu(a,bu,d);break;default:d=Promise.reject(Error("Invalid message type: "+b.type));break a}d=Promise.resolve()}}return d})},zu=function(a,b){return yu(a.g).then(function(c){vu(a.a,new sf("TURN_CREDENTIALS",{credentials:c}),b.id)})},uu=function(a,b,c){var d=c.deviceId,e=a.f.a,e=e?new as(e):void 0;b=b.data;switch(c.Ve){case "owner":Mr(0);break;case "manager":Mr(1);break;case "user":Mr(2);break;case "viewer":Mr(3)}return"viewer"==c.Ve?mu(a.b,d,b,e):ou(a.b,d,b,e)},wu=function(a,
b,c){b=new he(b,"warning");b.isBlocking=!0;a.a.a.oc(b);vu(a.a,new sf("STOP"),c)};var Au=function(a,b){this.b=a;this.a=b},Cu=function(a,b,c,d){switch(b.type){case "REFRESH_AUTH":var e=d.zb,f=d.deviceId,g=d.zc;return mt(a.b).then(function(){vu(a.a,new sf("AUTH_READY",{zb:e,Va:f,zc:g}),c.id)});case "LOCAL_PRESENT":return vu(a.a,new sf("AUTH_READY",{zb:d.zb,Va:d.deviceId,zc:d.zc,hc:!b.data.local}),c.id),Promise.resolve();case "STATUS_REQUEST":return vu(a.a,b,c.id),Promise.resolve();case "STATUS_RESPONSE":return vu(a.a,b,c.id,!0),b.data.routeDescription||vu(a.a,b,c.id),Promise.resolve();
case "HANGOUT_INACTIVE":return Bu(a.a,c,4,new he(cu,"warning"));case "HANGOUT_INVALID":return Bu(a.a,c,3,new he(du,"warning"));default:return Promise.reject(Error("Unknown type: "+b.type))}};var Du=function(a,b,c){this.b=a;this.f=b;this.a=c},Eu=function(a,b,c,d,e){return new Promise(function(f){switch(b){case "cloud":case "mesi":break;default:throw Error("Unrecognized channel type");}if(!c.type)throw Error("Message has no type");switch(c.type){case "STOP":f(Bu(a.a,d,1,null));return;case "SESSION_START_SUCCESS":Kr(0);break;case "SESSION_END":break;case "SESSION_FAILURE":Kr(1);f(Bu(a.a,d,2,new he($t,"warning")));return;case "__webrtc_stats__":break;case "PRESENTATION_CONNECTION_MESSAGE":vu(a.a,
c.data,d.id,!0);break;case "OFFER":f(xu(a.b,c,d,e));return;case "GET_TURN_CREDENTIALS":f(zu(a.b,d));return;case "REFRESH_AUTH":case "LOCAL_PRESENT":case "MUTE":case "STATUS_REQUEST":case "STATUS_RESPONSE":case "HANGOUT_INACTIVE":case "HANGOUT_INVALID":f(Cu(a.f,c,d,e));return;case "new_session":vu(a.a,c,d.id,!0);break;case "remove_session":vu(a.a,c,d.id,!0);a.a.terminateRoute(d.id);break;default:throw Error("Unknown type: "+c.type);}f()})};var Fu=function(){var a=this;this.l=Ja("mr.cloud.settings.SettingsService");this.a=null;chrome.settingsPrivate.onPrefsChanged.addListener(function(b){Je(13);if(a.a){b=ka(b);for(var c=b.next();!c.done;c=b.next())if(c=c.value,"media_router.cloudservices.enabled"==c.key){a.a.call(null,c.value);break}}})},Gu=function(a,b){a.a=b},Hu=function(a){var b=a.l;chrome.storage.sync.set({"mr.cloud.cloudEnabled":!0},function(){chrome.runtime.lastError&&t(b,"Error setting cloud setting: "+JSON.stringify(chrome.runtime.lastError))})},
Ju=function(a){return Iu().catch(function(){return Iu().catch(function(b){t(a.l,"Error retrieving cloud on setting.",b);return!1})})},Iu=function(){return Ku("mr.cloud.cloudEnabled").then(function(a){return!!a["mr.cloud.cloudEnabled"]})},Ku=function(a){return new Promise(function(b,c){chrome.storage.sync.get(a,function(a){chrome.runtime.lastError?c(chrome.runtime.lastError):b(a)})})},Mu=function(a){return Lu().catch(function(){return Lu().catch(function(b){t(a.l,"Error retrieving cloud enabled setting.",
b);return!1})})},Lu=function(){return Nu().then(function(a){return!!a.value})},Nu=function(){return new Promise(function(a,b){chrome.settingsPrivate.getPref("media_router.cloudservices.enabled",function(c){chrome.runtime.lastError?b(chrome.runtime.lastError):a(c)})})},Ou=function(a){var b=a.l;chrome.storage.sync.set({"mr.cloud.notifiedHangouts":!0},function(){chrome.runtime.lastError&&t(b,"Error setting notified Hangout privacy.",chrome.runtime.lastError)})},Qu=function(a){return Pu().catch(function(){return Pu().catch(function(b){t(a.l,
"Error retrieving hangouts notified setting.",b);return!1})})},Pu=function(){return Ku("mr.cloud.notifiedHangouts").then(function(a){return!!a["mr.cloud.notifiedHangouts"]})};var Ru=function(){var a=window.crypto.getRandomValues(new Uint8Array(16));return Hb(a,function(a){a=a.toString(16);return 1<a.length?a:"0"+a}).join("")},Su=function(a){for(var b=[],c=0,d=0;d<a.length;d++){var e=a.charCodeAt(d);128>e?b[c++]=e:(2048>e?b[c++]=e>>6|192:(55296==(e&64512)&&d+1<a.length&&56320==(a.charCodeAt(d+1)&64512)?(e=65536+((e&1023)<<10)+(a.charCodeAt(++d)&1023),b[c++]=e>>18|240,b[c++]=e>>12&63|128):b[c++]=e>>12|224,b[c++]=e>>6&63|128),b[c++]=e&63|128)}return b},Tu=function(a){for(var b,
c,d=[],e=0,f=0;e<a.length;){var g=a[e++];if(128>g)d[f++]=String.fromCharCode(g);else if(191<g&&224>g)c=a[e++],d[f++]=String.fromCharCode((g&31)<<6|c&63);else if(239<g&&365>g){c=a[e++];b=a[e++];var l=a[e++];b=((g&7)<<18|(c&63)<<12|(b&63)<<6|l&63)-65536;d[f++]=String.fromCharCode(55296+(b>>10));d[f++]=String.fromCharCode(56320+(b&1023))}else c=a[e++],b=a[e++],d[f++]=String.fromCharCode((g&15)<<12|(c&63)<<6|b&63)}return d.join("")};var Uu=null,Vu=null,Xu=function(a){Wu();for(var b=Uu,c=[],d=0;d<a.length;d+=3){var e=a[d],f=d+1<a.length,g=f?a[d+1]:0,l=d+2<a.length,r=l?a[d+2]:0,y=e>>2,e=(e&3)<<4|g>>4,g=(g&15)<<2|r>>6,r=r&63;l||(r=64,f||(g=64));c.push(b[y],b[e],b[g],b[r])}return c.join("")},Zu=function(a){var b=new Uint8Array(Math.ceil(3*a.length/4)),c=0;Yu(a,function(a){b[c++]=a});return b.subarray(0,c)},Yu=function(a,b){function c(b){for(;d<a.length;){var c=a.charAt(d++),e=Vu[c];if(null!=e)return e;if(!ib(c))throw Error("Unknown base64 encoding at char: "+
c);}return b}Wu();for(var d=0;;){var e=c(-1),f=c(0),g=c(64),l=c(64);if(64===l&&-1===e)break;b(e<<2|f>>4);64!=g&&(b(f<<4&240|g>>2),64!=l&&b(g<<6&192|l))}},Wu=function(){if(!Uu){Uu={};Vu={};for(var a=0;65>a;a++)Uu[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a),Vu[Uu[a]]=a,62<=a&&(Vu["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(a)]=a)}};var $u=function(a,b){this.a=a;this.b=b},av=function(a){return new $u((a.a>>>1|(a.b&1)<<31)>>>0,a.b>>>1>>>0)},bv=function(a){return new $u(a.a<<1>>>0,(a.b<<1|a.a>>>31)>>>0)};$u.prototype.add=function(a){return new $u((this.a+a.a&4294967295)>>>0>>>0,((this.b+a.b&4294967295)>>>0)+(4294967296<=this.a+a.a?1:0)>>>0)};
var cv=function(a,b){return new $u((a.a-b.a&4294967295)>>>0>>>0,((a.b-b.b&4294967295)>>>0)-(0>a.a-b.a?1:0)>>>0)},dv=function(a){var b=a&65535,c=a>>>16;a=10*b+65536*(0*b&65535)+65536*(10*c&65535);for(b=0*c+(0*b>>>16)+(10*c>>>16);4294967296<=a;)a-=4294967296,b+=1;return new $u(a>>>0,b>>>0)};
$u.prototype.toString=function(){for(var a="",b=this;0!=b.a||0!=b.b;){var c=new $u(0,0);for(var b=new $u(b.a,b.b),d=new $u(10,0),e=new $u(1,0);!(d.b&2147483648);)d=bv(d),e=bv(e);for(;0!=e.a||0!=e.b;)0>=(d.b<b.b||d.b==b.b&&d.a<b.a?-1:d.b==b.b&&d.a==b.a?0:1)&&(c=c.add(e),b=cv(b,d)),d=av(d),e=av(e);c=[c,b];b=c[0];a=c[1].a+a}""==a&&(a="0");return a};
var ev=function(a){for(var b=new $u(0,0),c=new $u(0,0),d=0;d<a.length;d++){if("0">a[d]||"9"<a[d])return null;c.a=parseInt(a[d],10);var e=dv(b.a),b=dv(b.b);b.b=b.a;b.a=0;b=e.add(b).add(c)}return b};$u.prototype.clone=function(){return new $u(this.a,this.b)};var fv=function(a,b){this.a=a;this.b=b};fv.prototype.add=function(a){return new fv((this.a+a.a&4294967295)>>>0>>>0,((this.b+a.b&4294967295)>>>0)+(4294967296<=this.a+a.a?1:0)>>>0)};fv.prototype.clone=function(){return new fv(this.a,this.b)};
fv.prototype.toString=function(){var a=0!=(this.b&2147483648),b=new $u(this.a,this.b);a&&(b=cv(new $u(0,0),b));return(a?"-":"")+b.toString()};var gv=0,hv=0,iv=function(a){var b=0>a;a=Math.abs(a);var c=a>>>0;a=Math.floor((a-c)/4294967296);a>>>=0;b&&(a=~a>>>0,c=(~c>>>0)+1,4294967295<c&&(c=0,a++,4294967295<a&&(a=0)));gv=c;hv=a},jv=function(a){if(a.constructor===Uint8Array)return a;if(a.constructor===ArrayBuffer)return new Uint8Array(a);if(a.constructor===Array)return new Uint8Array(a);if(a.constructor===String)return Zu(a);Cb("Type not convertible to Uint8Array.");return new Uint8Array(0)};var lv=function(a,b,c){this.b=null;this.m=this.u=this.a=this.g=this.j=0;this.h=!1;a&&kv(this,a,b,c)},mv=[],nv=function(a,b,c){if(mv.length){var d=mv.pop();a&&kv(d,a,b,c);return d}return new lv(a,b,c)};lv.prototype.clone=function(){return nv(this.b,this.j,this.g-this.j)};lv.prototype.clear=function(){this.b=null;this.a=this.g=this.j=0;this.h=!1};var kv=function(a,b,c,d){a.b=jv(b);a.j=k(c)?c:0;a.g=k(d)?a.j+d:a.b.length;a.a=a.j};lv.prototype.reset=function(){this.a=this.j};
lv.prototype.f=function(){var a=this.b;var b=a[this.a+0];var c=b&127;if(128>b)return this.a+=1,c;b=a[this.a+1];c|=(b&127)<<7;if(128>b)return this.a+=2,c;b=a[this.a+2];c|=(b&127)<<14;if(128>b)return this.a+=3,c;b=a[this.a+3];c|=(b&127)<<21;if(128>b)return this.a+=4,c;b=a[this.a+4];c|=(b&15)<<28;if(128>b)return this.a+=5,c>>>0;this.a+=10;return c};lv.prototype.w=lv.prototype.f;
var ov=function(a){a:{for(var b,c=0,d,e=0;4>e;e++)if(b=a.b[a.a++],c|=(b&127)<<7*e,128>b){a.u=c>>>0;a.m=0;break a}b=a.b[a.a++];c|=(b&127)<<28;d=0|(b&127)>>4;if(128>b)a.u=c>>>0,a.m=d>>>0;else{for(e=0;5>e;e++)if(b=a.b[a.a++],d|=(b&127)<<7*e+3,128>b){a.u=c>>>0;a.m=d>>>0;break a}Cb("Failed to read varint, encoding is invalid.");a.h=!0}}b=a.u;c=a.m;if(a=c&2147483648)b=~b+1>>>0,c=~c>>>0,0==b&&(c=c+1>>>0);b=4294967296*c+b;return a?-b:b};lv.prototype.s=function(){return this.w()};var pv=function(){this.a=[]};pv.prototype.length=function(){return this.a.length};var qv=function(a){var b=a.a;a.a=[];return b},rv=function(a,b,c){for(;0<c||127<b;)a.a.push(b&127|128),b=(b>>>7|c<<25)>>>0,c>>>=7;a.a.push(b)},sv=function(a,b){for(;127<b;)a.a.push(b&127|128),b>>>=7;a.a.push(b)},tv=function(a,b){if(0<=b)sv(a,b);else{for(var c=0;9>c;c++)a.a.push(b&127|128),b>>=7;a.a.push(1)}},uv=function(a,b){a.a.push(b>>>0&255);a.a.push(b>>>8&255);a.a.push(b>>>16&255);a.a.push(b>>>24&255)};var vv=function(a,b,c){this.a=nv(a,b,c);this.b=this.f=-1;this.g=!1};vv.prototype.reset=function(){this.a.reset();this.b=this.f=-1};
var wv=function(a){var b=a.a;if(b.a==b.g)return!1;(b=a.g)||(b=a.a,b=b.h||0>b.a||b.a>b.g);if(b)return Cb("Decoder hit an error"),!1;var c=a.a.f(),b=c>>>3,c=c&7;if(0!=c&&5!=c&&1!=c&&2!=c&&3!=c&&4!=c)return Cb("Invalid wire type"),a.g=!0,!1;a.f=b;a.b=c;return!0},xv=function(a){switch(a.b){case 0:if(0!=a.b)Cb("Invalid wire type for skipVarintField"),xv(a);else{for(a=a.a;a.b[a.a]&128;)a.a++;a.a++}break;case 1:1!=a.b?(Cb("Invalid wire type for skipFixed64Field"),xv(a)):(a=a.a,a.a+=8);break;case 2:if(2!=
a.b)Cb("Invalid wire type for skipDelimitedField"),xv(a);else{var b=a.a.f();a=a.a;a.a+=b}break;case 5:5!=a.b?(Cb("Invalid wire type for skipFixed32Field"),xv(a)):(a=a.a,a.a+=4);break;case 3:b=[a.f];do{if(!wv(a)){Cb("Unmatched start-group tag: stream EOF");a.g=!0;break}if(3==a.b)b.push(a.f);else if(4==a.b&&a.f!=b.pop()){Cb("Unmatched end-group tag");a.g=!0;break}}while(0<b.length);break;default:Cb("Invalid wire encoding for field.")}},yv=function(a,b,c){var d=a.a.g,e=a.a.f(),e=a.a.a+e;a.a.g=e;c(b,
a);a.a.a=e;a.a.g=d},zv=function(a){var b=a.a.f();a=a.a;for(var c,d,e=a.b,f=a.a,b=f+b,g=[],l="";f<b;){var r=e[f++];if(128>r)g.push(r);else if(192>r)continue;else if(224>r)d=e[f++],g.push((r&31)<<6|d&63);else if(240>r)d=e[f++],c=e[f++],g.push((r&15)<<12|(d&63)<<6|c&63);else if(248>r){d=e[f++];c=e[f++];var y=e[f++];c=(r&7)<<18|(d&63)<<12|(c&63)<<6|y&63;c-=65536;g.push((c>>10&1023)+55296,(c&1023)+56320)}8192<=g.length&&(l+=String.fromCharCode.apply(null,g),g.length=0)}l+=String.fromCharCode.apply(null,
g);a.a=f;return l},Av=function(a,b){for(var c=a.a.f(),c=a.a.a+c,d=[];a.a.a<c;)d.push(b.call(a.a));return d};var E=function(){this.f=[];this.b=0;this.a=new pv},Cv=function(a,b){Bv(a,b,2);b=qv(a.a);a.f.push(b);a.b+=b.length;b.push(a.b);return b},Dv=function(a,b){for(var c=b.pop(),c=a.b+a.a.length()-c;127<c;)b.push(c&127|128),c>>>=7,a.b++;b.push(c);a.b++};E.prototype.reset=function(){this.f=[];qv(this.a);this.b=0};
var F=function(a){for(var b=new Uint8Array(a.b+a.a.length()),c=a.f,d=c.length,e=0,f=0;f<d;f++){var g=c[f];b.set(g,e);e+=g.length}c=qv(a.a);b.set(c,e);a.f=[b];return b},Bv=function(a,b,c){sv(a.a,8*b+c)},G=function(a,b,c){null!=c&&null!=c&&(Bv(a,b,0),tv(a.a,c))},J=function(a,b,c){null!=c&&null!=c&&(Bv(a,b,0),a=a.a,iv(c),rv(a,gv,hv))},Ev=function(a,b,c){if(null!=c){var d=c;(c=0<d.length&&"-"==d[0])&&(d=d.substring(1));d=ev(d);null===d?c=null:(c&&(d=cv(new $u(0,0),d)),c=new fv(d.a,d.b));Bv(a,b,0);rv(a.a,
c.a,c.b)}},Fv=function(a,b,c){null!=c&&null!=c&&(Bv(a,b,0),sv(a.a,c))},Gv=function(a,b,c){null!=c&&null!=c&&(Bv(a,b,0),a=a.a,iv(c),rv(a,gv,hv))},Hv=function(a,b,c){null!=c&&(c=ev(c),Bv(a,b,0),rv(a.a,c.a,c.b))},Iv=function(a,b,c){null!=c&&(Bv(a,b,5),uv(a.a,c))},Jv=function(a,b,c){if(null!=c){Bv(a,b,5);a=a.a;var d=c,d=(c=0>d?1:0)?-d:d;0===d?0<1/d?gv=hv=0:(hv=0,gv=2147483648):isNaN(d)?(hv=0,gv=2147483647):3.4028234663852886E38<d?(hv=0,gv=(c<<31|2139095040)>>>0):1.1754943508222875E-38>d?(d=Math.round(d/
Math.pow(2,-149)),hv=0,gv=(c<<31|d)>>>0):(b=Math.floor(Math.log(d)/Math.LN2),d*=Math.pow(2,-b),d=Math.round(8388608*d)&8388607,hv=0,gv=(c<<31|b+127<<23|d)>>>0);uv(a,gv)}},K=function(a,b,c){null!=c&&(Bv(a,b,0),a.a.a.push(c?1:0))},L=function(a,b,c){null!=c&&(Bv(a,b,0),tv(a.a,c))},M=function(a,b,c){if(null!=c){b=Cv(a,b);for(var d=a.a,e=0;e<c.length;e++){var f=c.charCodeAt(e);if(128>f)d.a.push(f);else if(2048>f)d.a.push(f>>6|192),d.a.push(f&63|128);else if(65536>f)if(55296<=f&&56319>=f&&e+1<c.length){var g=
c.charCodeAt(e+1);56320<=g&&57343>=g&&(f=1024*(f-55296)+g-56320+65536,d.a.push(f>>18|240),d.a.push(f>>12&63|128),d.a.push(f>>6&63|128),d.a.push(f&63|128),e++)}else d.a.push(f>>12|224),d.a.push(f>>6&63|128),d.a.push(f&63|128)}Dv(a,b)}},Kv=function(a,b,c){null!=c&&(c=jv(c),Bv(a,b,2),sv(a.a,c.length),b=qv(a.a),a.f.push(b),a.f.push(c),a.b+=b.length+c.length)},N=function(a,b,c,d){null!=c&&(b=Cv(a,b),d(c,a),Dv(a,b))},Lv=function(a,b,c){if(null!=c)for(var d=0;d<c.length;d++){var e=a,f=c[d];null!=f&&(Bv(e,
b,0),tv(e.a,f))}},Mv=function(a,b,c){if(null!=c)for(var d=0;d<c.length;d++){var e=a,f=c[d];null!=f&&(Bv(e,b,0),e=e.a,iv(f),rv(e,gv,hv))}},Nv=function(a,b,c){if(null!=c)for(var d=0;d<c.length;d++){var e=a,f=c[d];null!=f&&(Bv(e,b,0),sv(e.a,f))}},Ov=function(a,b,c){if(null!=c)for(var d=0;d<c.length;d++)Iv(a,b,c[d])},Pv=function(a,b,c){if(null!=c)for(var d=0;d<c.length;d++)L(a,b,c[d])},Qv=function(a,b,c){if(null!=c)for(var d=0;d<c.length;d++)M(a,b,c[d])},Rv=function(a,b,c){if(null!=c)for(var d=0;d<c.length;d++)Kv(a,
b,c[d])},O=function(a,b,c,d){if(null!=c)for(var e=0;e<c.length;e++){var f=Cv(a,b);d(c[e],a);Dv(a,f)}},Sv=function(a,b,c,d){if(null!=c)for(var e=0;e<c.length;e++)Bv(a,b,3),d(c[e],a),Bv(a,b,4)},Tv=function(a,b,c){if(null!=c&&c.length){b=Cv(a,b);for(var d=0;d<c.length;d++)tv(a.a,c[d]);Dv(a,b)}};var P=function(){},Uv="function"==typeof Uint8Array;P.prototype.pk=function(){return this.jh};
var Q=function(a,b,c,d,e){a.a=null;b||(b=c?[c]:[]);a.jh=c?String(c):void 0;a.h=0===c?-1:0;a.f=b;a:{if(a.f.length&&(b=a.f.length-1,(c=a.f[b])&&"object"==typeof c&&!va(c)&&!(Uv&&c instanceof Uint8Array))){a.g=b-a.h;a.b=c;break a}-1<d?(a.g=d,a.b=null):a.g=Number.MAX_VALUE}a.A={};if(e)for(d=0;d<e.length;d++)b=e[d],b<a.g?(b+=a.h,a.f[b]=a.f[b]||Vv):a.b[b]=a.b[b]||Vv},Vv=Object.freeze?Object.freeze([]):[],Wv=function(a,b,c,d){for(var e in c){var f=c[e],g=f.Ar;if(!f.Eg)throw Error("Message extension present that was generated without binary serialization support");
var l=d.call(a,g);if(null!=l)if(g.hh())if(f.dk)f.Eg.call(b,g.Kg,l,f.dk);else throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format");else f.Eg.call(b,g.Kg,l)}},R=function(a,b){if(b<a.g){b+=a.h;var c=a.f[b];return c===Vv?a.f[b]=[]:c}c=a.b[b];return c===Vv?a.b[b]=[]:c},S=function(a,b){if(b<a.g){b+=a.h;var c=a.f[b];return c===Vv?a.f[b]=[]:c}c=a.b[b];return c===Vv?a.b[b]=[]:c},Xv=function(a,b){a=R(a,b);return null==a?
a:+a},Yv=function(a){if(null==a||a instanceof Uint8Array)return a;if(pa(a))return Zu(a);Cb("Cannot coerce to Uint8Array: "+ta(a));return null},$v=function(a){Zv(a);return!a.length||a[0]instanceof Uint8Array?a:Hb(a,Yv)},Zv=function(a){if(a&&1<a.length){var b=ta(a[0]);w(a,function(a){ta(a)!=b&&Cb("Inconsistent type in JSPB repeated field array. Got "+ta(a)+" expected "+b)})}},T=function(a,b,c){a=R(a,b);return null==a?c:a},U=function(a,b,c){b<a.g?a.f[b+a.h]=c:a.b[b]=c},V=function(a,b,c,d){a.a||(a.a=
{});if(!a.a[c]){var e=R(a,c);if(d||e)a.a[c]=new b(e)}return a.a[c]},W=function(a,b,c){aw(a,b,c);b=a.a[c];b==Vv&&(b=a.a[c]=[]);return b},aw=function(a,b,c){a.a||(a.a={});if(!a.a[c]){for(var d=S(a,c),e=[],f=0;f<d.length;f++)e[f]=new b(d[f]);a.a[c]=e}},X=function(a,b,c){a.a||(a.a={});var d=c?bw(c):c;a.a[b]=c;U(a,b,d)},cw=function(a,b,c){a.a||(a.a={});c=c||[];for(var d=[],e=0;e<c.length;e++)d[e]=bw(c[e]);a.a[b]=c;U(a,b,d)},dw=function(a,b,c,d){aw(a,d,b);var e=a.a[b];e||(e=a.a[b]=[]);c=c?c:new d;a=S(a,
b);e.push(c);a.push(bw(c))},ew=function(a){if(a.a)for(var b in a.a){var c=a.a[b];if(va(c))for(var d=0;d<c.length;d++)c[d]&&bw(c[d]);else c&&bw(c)}},bw=function(a){ew(a);return a.f};P.prototype.ha=Uv?function(){var a=Uint8Array.prototype.toJSON;Uint8Array.prototype.toJSON=function(){return Xu(this)};try{var b=JSON.stringify(bw(this),fw)}finally{Uint8Array.prototype.toJSON=a}return b}:function(){return JSON.stringify(bw(this),fw)};
var fw=function(a,b){if(m(b)){if(isNaN(b))return"NaN";if(Infinity===b)return"Infinity";if(-Infinity===b)return"-Infinity"}return b},hw=function(a){var b=gw[a[0]];if(!b)throw Error("Unknown JsPb message type: "+a[0]);return new b(a)};P.prototype.toString=function(){ew(this);return this.f.toString()};
P.prototype.m=function(a){if(this.b){this.a||(this.a={});var b=a.Kg;if(a.b){if(a.hh())return this.a[b]||(this.a[b]=Hb(this.b[b]||[],function(b){return new a.a(b)})),this.a[b]}else if(a.hh())return!this.a[b]&&this.b[b]&&(this.a[b]=new a.a(this.b[b])),this.a[b];return this.b[b]}};
var jw=function(a,b){a=a||{};b=b||{};var c={},d;for(d in a)c[d]=0;for(d in b)c[d]=0;for(d in c)if(!iw(a[d],b[d]))return!1;return!0},iw=function(a,b){if(a==b)return!0;if(!ya(a)||!ya(b)||a.constructor!=b.constructor)return!1;if(Uv&&a.constructor===Uint8Array){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!=b[c])return!1;return!0}if(a.constructor===Array){for(var d=void 0,e=void 0,f=Math.max(a.length,b.length),c=0;c<f;c++){var g=a[c],l=b[c];g&&g.constructor==Object&&(d=g,g=void 0);
l&&l.constructor==Object&&(e=l,l=void 0);if(!iw(g,l))return!1}return d||e?(d=d||{},e=e||{},jw(d,e)):!0}if(a.constructor===Object)return jw(a,b);throw Error("Invalid type in JSPB array");};P.prototype.clone=function(){return kw(this)};
var kw=function(a){return new a.constructor(lw(bw(a)))},lw=function(a){var b;if(va(a)){for(var c=Array(a.length),d=0;d<a.length;d++)null!=(b=a[d])&&(c[d]="object"==typeof b?lw(b):b);return c}if(Uv&&a instanceof Uint8Array)return new Uint8Array(a);c={};for(d in a)null!=(b=a[d])&&(c[d]="object"==typeof b?lw(b):b);return c},mw=function(a,b){gw[a]=b;b.messageId=a},gw={};var nw=function(a){Q(this,a,0,-1,null)};q(nw,P);nw.prototype.o=function(){var a=new E;ow(this,a);return F(a)};var ow=function(a,b){var c=R(a,1);null!=c&&J(b,1,c);c=R(a,2);null!=c&&M(b,2,c);c=V(a,pw,3);null!=c&&N(b,3,c,qw)},pw=function(a){Q(this,a,0,-1,null)};q(pw,P);pw.prototype.o=function(){var a=new E;qw(this,a);return F(a)};var qw=function(a,b){var c=R(a,1);null!=c&&M(b,1,c);c=R(a,2);null!=c&&J(b,2,c)};nw.prototype.tb=function(){return R(this,1)};var rw=function(){this.a=null},sw=function(a,b){if(!a.a||R(a.a,2)<R(b,2))a.a=kw(b)},tw=function(a){return a.a?R(a.a,2)+";"+R(a.a,1):null};var uw=function(){this.l=Ja("mr.cloud.CredentialService")},yu=function(a){var b=new eb,c=Sr.a+"/iceconfig?key="+Sr.b;u(a.l,"Requesting TURN credentials from "+c);var d=uj(c,function(){Ej(d)?(u(a.l,"Got TURN credentials: "+Fj(d)),b.resolve(vw(a,Gj(d)))):b.resolve(ww(a))},"POST",void 0,{"Content-Type":"application/json"});return b.a},vw=function(a,b){try{var c=[];b.iceServers.forEach(function(a){a.urls.forEach(function(b){0==b.indexOf("turn:")&&c.push({url:b,credential:a.credential,username:a.username})})});
return c}catch(d){return a.l.error("Error parsing TURN credentials.",d),[]}},ww=function(a){a.l.error("XHR failed fetching TURN credentials.",null);return[]};var xw=function(){this.u=this.J=this.B=this.A=this.v=this.m=this.s=this.j=this.b=this.h=this.g=this.f=this.w=this.a=null},yw=function(){var a=xw.na();null==a.u&&(a.u=new rw);return a.u},zw=function(a){null==a.a&&(a.a=new kt);return a.a},Aw=function(a){null==a.w&&(a.w=new ct(zw(a)));return a.w},Bw=function(a){null==a.s&&(a.s=new ju(Aw(a)));return a.s};sa(xw);var Cw=function(a){this.a=a;this.b=new Map;this.A=new Map;this.s=[];this.j=this.J=this.w=this.B=this.h=null;this.m=this.g=this.f=!1;this.v=new Map;this.u=new Map;Of(this)};Cw.prototype.getName=function(){return"cloud"};
Cw.prototype.Ha=function(){var a=this;u(this.l,"Initializing Cloud MRP");var b=xw.na();null==b.g&&(null==b.f&&(b.f=new ks(Aw(b))),b.g=new Gs(b.f,this));this.s.push(b.g);if(null==b.j){null==b.b&&(b.b=new Tr(Aw(b),zw(b)));var c=b.b;null==b.h&&(b.h=new gu(Aw(b)));b.j=new Js(c,b.h,this)}this.h=b.j;this.s.push(this.h);this.B=Bw(b);this.w=zw(b);if(null==b.A){if(null==b.m){c=Bw(b);var d=zw(b);null==b.J&&(b.J=new uw(Aw(b)));b.m=new tu(c,d,b.J,this)}c=b.m;null==b.v&&(b.v=new Au(zw(b),this));b.A=new Du(c,b.v,
this)}this.J=b.A;null==b.B&&(b.B=new Fu);this.j=b.B;Mu(this.j).then(function(b){a.f=b;u(a.l,"Cloud enabled setting: "+a.f)});Ju(this.j).then(function(b){a.g=b;u(a.l,"Cloud on setting: "+a.g)});Gu(this.j,function(b){a.f=b;u(a.l,"Cloud enabled setting: "+a.f);a.f&&Dw(a)});Qu(this.j).then(function(b){a.m=b;u(a.l,"Privacy notified setting: "+a.m)})};Cw.prototype.mc=function(){return Array.from(this.b.values())};
Cw.prototype.Ad=function(a){if(!Ew(this,a))return Ko;v(this.l,"GetAvailableSinks for "+a);var b=[];if(this.g||Fw())b=Dw(this);this.u.clear();for(var c={},d=ka(this.v.values()),e=d.next();!e.done;c={gd:c.gd,oe:c.oe},e=d.next())c.gd=e.value,c.oe=!1,b.forEach(function(a){return function(b){b.xa.id==a.gd.xa.id&&(a.oe=!0,b.xa.friendlyName=a.gd.xa.friendlyName)}}(c)),c.oe||this.u.set(c.gd.xa.id,c.gd);b=b.concat.apply(b,[].concat(ma(this.u.values())));v(this.l,function(){return"Available sinks are..."+JSON.stringify(b)});
c=b.map(function(a){return a.xa});this.h&&(c=c.concat(Gw));return new Jo(c,-1!=a.indexOf("0F5096E8")?Oe:null)};var Dw=function(a){var b=[];u(a.l,"Checking cloud discovery services");kk().g=Fa();a.s.forEach(function(a){a=a.ad();b=b.concat(a)});return b};h=Cw.prototype;h.startObservingMediaSinks=function(){};h.stopObservingMediaSinks=function(){};h.startObservingMediaRoutes=function(){};h.stopObservingMediaRoutes=function(){};h.hd=function(){};h.Gd=function(a){return(a=Hw(this,a))?a.xa:null};
h.createRoute=function(a,b,c,d,e,f,g){var l=this;u(this.l,"createRoute called");v(this.l,"urn: "+a+" sinkId:"+b);if(e=this.A.get(b))return le(this.a.kh(this,e,a,c,g,function(b){b.mediaSource=a;b.pb.tabId=g;return ne(b)}),function(a){l.a.ac(l,a);return a});e=Hw(this,b);return Iw(this,a,e,b,c,d,g)};
var Jw=function(a,b,c,d,e){b instanceof Io&&2==b.errorCode?Bu(a,c,6,null):(a.l.error("Error on start session",b instanceof Error?b:Error("Expected an Error value, got "+b)),Bu(a,c,e,new he($t,"warning")));if(b=a.h)b=a.h,b.b.delete(d.deviceId)?(b.a.a.delete(d.xa.id),b=!0):b=!1;b&&Cs(a,[d.xa])},Iw=function(a,b,c,d,e,f,g){if(f)return oe(Error("not supported"));f=!1;switch(Kw(c)){case "cloud":Lr(1);break;case "mesi":f=!0;if(!a.m){a.m=!0;Ou(a.j);var l=je();a.a.oc(l)}Lr(0)}kk().f=new hk(c.model,null);var r=
Mj(e,a.getName(),d,b,!0,"",null);f&&(r.customControllerPath="cloud_route_details/view.html?routeId="+r.id);a.b.set(r.id,r);a.A.set(d,r);a.v.set(r.id,c);a.a.rc(a,r);a.a.fd(a.ea(),!0);if(Ne(b)&&!f)return u(a.l,"starting presentation on route: "+r.id),me(Lw(r,b),function(b){Jw(a,b,r,c,7);throw b;});u(a.l,"starting mirroring on route: "+r.id);r.pb={tabId:g,sessionId:"",Le:"",Me:c.model};Ne(b)&&(r.isOffscreenPresentation=!0);return me(a.a.sf(a,r,e),function(b){Jw(a,b,r,c,5);throw b;})};
Cw.prototype.terminateRoute=function(a){var b=this.b.get(a);return b?Bu(this,b,0,null):Promise.reject(new Io(3,"Route in cloud provider not found for routeId "+a))};
var Bu=function(a,b,c,d){u(a.l,"terminating route: "+b.id);a.b.delete(b.id);a.A.delete(b.sinkId);var e=a.v.get(b.id);a.v.delete(b.id);d&&a.a.oc(d);cb("MediaRouter.Cloud.Session.End",c,Gr);switch(c){case 1:break;default:switch(Kw(e)){case "cloud":pu(a.B,e.deviceId,hs,{})}}a.a.Zc(a,b);0==a.b.size&&a.a.fd(a.ea(),!1);a.a.onPresentationConnectionStateChanged(b.id,"terminated");a.u.has(b.sinkId)&&(c=a.u.get(b.sinkId),Cs(a,[c.xa]),a.u.delete(b.sinkId));return Promise.resolve()};h=Cw.prototype;
h.sendRouteMessage=function(a,b,c){if(c&&c.channelType){c=c.channelType;var d=(a=this.b.get(a)||void 0)?Hw(this,a.sinkId):void 0;return Eu(this.J,c,b,a,d)}return pa(b)?(vu(this,b,a),Promise.resolve()):Promise.reject(Error("Channel type missing"))};h.sendRouteBinaryMessage=function(a){return Promise.reject(Error("Route "+a+" does not support sending binary data."))};
h.Sc=function(a){var b=new qf;5>b.minFrameRate&&(b.minFrameRate=5);"hangouts"!=this.jc(a)&&(b.senderSideLetterboxing=!0);rf(b);Object.freeze(b);u(this.l,"Settings for "+a+": "+pf(b));if(!b.shouldCaptureAudio&&!b.shouldCaptureVideo)throw Error("Cannot start mirroring without video or audio capture.");return b};h.jc=function(a){var b=null;a=Hw(this,a);switch(Kw(a)){case "cloud":b="webrtc";break;case "mesi":b=a.zb?"meetings":"hangouts"}return b};
h.vd=function(a,b){v(this.l,"Checking canRoute: "+a+" for sinkId: "+b);return Ew(this,a)&&!!this.Gd(b)};h.Lc=function(a,b){return"https://hangouts.google.com/cloudmrp-mirroring"==a&&this.b.has(b)};h.joinRoute=function(a,b){return(a=this.b.get(b))?ne(a):oe(Error("not supported"))};h.connectRouteByRouteId=function(){return oe(Error("not supported"))};h.detachRoute=function(){};
var ws=function(a,b){u(a.l,b.length+" sinks added");0<b.length&&!a.g&&(Hu(a.j),a.g=!0);b=Hw(a,b[0].id);kk().b=new hk(b.model,null);a.a.Gb();a.a.onSinkAvailabilityUpdated(a,2);u(a.l,"sinkAvailability changed to AVAILABLE")},Cs=function(a,b){u(a.l,b.length+" sinks removed");a.s.some(function(a){return 0<a.ad().length})||(a.a.onSinkAvailabilityUpdated(a,0),u(a.l,"sinkAvailability changed to UNAVAILABLE"));a.a.Gb()},xs=function(a,b){u(a.l,b.length+" sinks updated");a.a.Gb()},vu=function(a,b,c,d){(void 0===
d?0:d)?a.a.Qb(a,c,b):a.a.we(a,c,b)},Hw=function(a,b){var c=Mw(a,b);c||(c=null,(b=a.A.get(b))&&(c=a.v.get(b.id)));return c},Mw=function(a,b){var c=null;a.s.some(function(a){c=a.pc(b);return!!c});return c},Kw=function(a){return Ob(a.a,"cloud")?"cloud":Ob(a.a,"mesi")?"mesi":null},Fw=function(){var a=kk().g;return 3E5<=Date.now()-a},Ew=function(a,b){var c=Me(b);b=Ne(b);if(a.w.f&&!a.w.b&&c)return a.a.onSinkAvailabilityUpdated(a,2),!0;var d=!1;a.f&&a.w.b&&(d=!0);var e;if(e=!chrome.declarativeWebRequest)a=
a.w,e=!(a.f||a.b&&a.a&&(-1!=nt.indexOf(a.a)||-1!=nt.indexOf(lt(a))))&&b;return e?!1:d&&(c||b)};Cw.prototype.searchSinks=function(a,b){var c=this;if(!Ew(this,a))return Promise.reject(Error("err"));a=Ms(this.h,b);a.then(function(a){ws(c,[a])});return a};var Nw=function(a,b){b=a.b.get(b);if(!b)return Promise.reject(Error("Route not found"));a=a.jc(b.sinkId);return"hangouts"!=a&&"meetings"!=a?Promise.reject(Error("Unsupported sink channel type")):tr(Re.get("mr.ProviderManager")||null,a)};h=Cw.prototype;
h.createMediaRouteController=function(a,b,c){return Nw(this,a).then(function(d){return d.createMediaRouteController(a,b,c)})};h.provideSinks=function(){};h.ea=function(){return"CloudProvider"};h.ta=function(){return[void 0,{cloudEnabled:this.f,cloudOn:this.g,notifiedHangoutsPrivacy:this.m}]};h.wa=function(){var a=Mf(this);a&&(a.cloudEnabled&&(this.f=a.cloudEnabled),a.cloudOn&&(this.g=a.cloudOn),a.notifiedHangoutsPrivacy&&(this.m=a.notifiedHangoutsPrivacy))};var Lw=function(a,b){a=new Cr(a,b);return pe(a.start())};
Cw.prototype.l=Ja("mr.CloudProvider");var Gw=new Zj("pseudo:cloud","","meeting","","default");var Ow=function(){Hk.call(this,12,"ExternalMessageListener","mr.ProviderManager",chrome.runtime.onMessageExternal)};la(Ow,Hk);Ow.prototype.Ne=function(a,b){return b.id&&-1!=Pw.indexOf(b.id)?"start"==a.type||"stop"==a.type:!1};Ow.prototype.ef=function(){return!0};var Rw=function(){Qw||(Qw=new Ow);return Qw},Qw=null,Pw=["idmofbkcelhplfjnmmdolenpigiiiecc","ggedfkijiiammpnbdadhllnehapomdge","njjegkblellcjnakomndbaloifhcoccg"];var Sw=function(){Hk.call(this,11,"InternalMessageListener","mr.ProviderManager",chrome.runtime.onMessage)};la(Sw,Hk);Sw.prototype.Ne=function(a,b){return"retrieve_log_data"==a.type&&b.id==chrome.runtime.id&&b.url=="chrome-extension://"+b.id+"/feedback.html"};Sw.prototype.ef=function(){return!0};var Uw=function(){Tw||(Tw=new Sw);return Tw},Tw=null;var Ww=function(){var a=Vw,b=new $o(a),c=new ar(a,b),b=[b,c];b.push(new Cw(a));return b};var Xw=function(a,b){this.type="internal_message";this.routeId=a;this.message=b};var Yw=function(a,b,c){this.a=a;this.g=b;this.f=c;this.onMessage=function(){};c.listen("internal_message",this.b,this)};Yw.prototype.sendMessage=function(a,b){return this.g(this.a,a,b)};Yw.prototype.b=function(a){if(a.routeId==this.a)this.onMessage(a.message)};Yw.prototype.sa=function(){this.onMessage=function(){};this.f.w("internal_message",this.b,this)};
var Zw=new Yw("",function(){return Promise.resolve()},new Cp),$w=function(a){this.a=a},yr=function(a){var b=ge,c=b.a.jf(a);return c?new Yw(a,c.sendRouteMessage.bind(c),b.a.lf()):Zw};var ax=function(){this.l=Ja("mr.ProviderManager");this.b=[];this.a=new Map;this.m=new Map;this.g=new Set;this.j=new Set;this.s=new Map;this.f=this.w=null;this.T=new Cp;this.G=new Dp(this.Tl,500,this);this.X=new Dp(this.H,500,this);this.h=new yp(this,524288);this.J=0;this.u=new Map;this.B=-1==window.navigator.userAgent.indexOf("Windows");this.A=[];this.v=[];var a=new qr(this);this.O=a.onMessage.bind(a);a=new fr(this);this.K=a.onMessage.bind(a);this.onBeforeInvokeHandler=this.onBeforeInvokeHandler;
this.createRoute=this.createRoute;this.joinRoute=this.joinRoute;this.connectRouteByRouteId=this.connectRouteByRouteId;this.terminateRoute=this.terminateRoute;this.startObservingMediaSinks=this.startObservingMediaSinks;this.stopObservingMediaSinks=this.stopObservingMediaSinks;this.sendRouteMessage=this.sendRouteMessage;this.sendRouteBinaryMessage=this.sendRouteBinaryMessage;this.startListeningForRouteMessages=this.startListeningForRouteMessages;this.stopListeningForRouteMessages=this.stopListeningForRouteMessages;
this.startObservingMediaRoutes=this.startObservingMediaRoutes;this.stopObservingMediaRoutes=this.stopObservingMediaRoutes;this.detachRoute=this.detachRoute;this.enableMdnsDiscovery=this.enableMdnsDiscovery;this.searchSinks=this.searchSinks;this.provideSinks=this.provideSinks;this.updateMediaSinks=this.updateMediaSinks;this.createMediaRouteController=this.createMediaRouteController};la(ax,Qe);
ax.prototype.handleEvent=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];if(a==chrome.runtime.onMessage)this.O.apply(this,[].concat(ma(c)));else if(a==chrome.runtime.onMessageExternal)this.K.apply(this,[].concat(ma(c)));else throw Error("Unhandled event");};var tr=function(a,b){b=a.s.get(b);return Ue(b).then(function(b){b.Ha(a);return b})};
ax.prototype.Ha=function(a,b,c){this.s.set("webrtc","mr.mirror.webrtc.WebRtcService");this.s.set("cast_streaming","mr.mirror.cast.Service");this.s.set("hangouts","mr.mirror.hangouts.HangoutsService");this.s.set("meetings","mr.mirror.hangouts.MeetingsService");var d=new $w(this);ge||(ge=d);this.f=a;this.h.init(this.f.onRouteMessagesReceived.bind(this.f));b.forEach(this.U,this);(a=bx(this,"dial"))&&a.hd(c?c.enable_dial_discovery:!0);(a=bx(this,"cast"))&&a.hd(c?c.enable_cast_discovery:!0);Of(this);$e("mr.ProviderManager",
this)};ax.prototype.U=function(a){if(bx(this,a.getName()))t(this.l,"Provider "+a.getName()+" already registered.");else try{a.Ha(),this.b.push(a),this.u.set(a.getName(),0)}catch(b){t(this.l,"Provider "+a.getName()+" failed to initialize.",b)}};
var dx=function(a,b,c){return new Promise(function(d,e){var f=null;a.J++;cx(a);f=window.setTimeout(function(){f=null;b.cancel(new Io(2,"timeout after "+c+" ms."))},c);b.a.then(function(b){a.J--;cx(a);null!=f&&window.clearTimeout(f);d(b)},function(b){a.J--;cx(a);null!=f&&window.clearTimeout(f);e(b instanceof Io?b:b instanceof Error?new Io(0,b.message,b.stack):new Io(0))})})};ax.prototype.onBeforeInvokeHandler=function(){Je(0)};
var ex=function(a){return"string"==typeof a?a:a.unique?"":a.scheme+"://"+a.host+"\n       "+(a.port?":"+a.port:"")+"/"};h=ax.prototype;
h.createRoute=function(a,b,c,d,e,f,g){var l=this;g=void 0===g?!1:g;var r=fx(this,a,b);if(!r)return Promise.reject(new Io(7,"No provider supports createRoute with source: "+a+" and sink: "+b));var y=void 0;void 0!==d&&(y=ex(d));f=f&&0<f?f:6E4;a=r.createRoute(a,b,c,g,f,y,e);return dx(this,a,f).then(function(a){return a},function(a){l.l.error("Error creating route.",a);throw a;})};
h.connectRouteByRouteId=function(a,b,c,d,e,f){var g=this.a.get(b);if(!g)return Promise.reject(new Io(7,"No provider supports join "+b));a=g.connectRouteByRouteId(a,b,c,ex(d),e);return dx(this,a,f&&0<f?f:3E4)};h.joinRoute=function(a,b,c,d,e,f){f=void 0===f?!1:f;var g=gx(this,a,b);if(!g)return Promise.reject(new Io(7,"No provider supports join "+b));e=e&&0<e?e:3E4;a=g.joinRoute(a,b,f,e,ex(c),d);return dx(this,a,e)};
h.terminateRoute=function(a){var b=this.a.get(a);return b?hx(this,a).then(function(){return b.terminateRoute(a)}):Promise.reject(new Io(3,"Route not found for routeId "+a))};h.startObservingMediaSinks=function(a){this.g.has(a)||(this.g.add(a),this.b.forEach(function(b){b.startObservingMediaSinks(a)}));ix(this,a)};h.stopObservingMediaSinks=function(a){this.g.delete(a)?jx(this,a):u(this.l,"No existing query "+a)};
var jx=function(a,b){a.b.forEach(function(a){a.stopObservingMediaSinks(b)})},ix=function(a,b){if("urn:x-org.chromium.media:source:tab:-1"==b)t(a.l,"No sinks for sourceUrn: "+b);else{var c=new Map,d=[];a.b.forEach(function(e){var f=e.Ad(b);0<f.sinks.length&&(d=f.origins);f.sinks.forEach(function(b){c.has(b.id)?t(a.l,"Detected duplicate sink "+b.id+" from provider: "+e.getName()):c.set(b.id,b)})});kx(a,b,Array.from(c.values()),d||[])}},kx=function(a,b,c,d){u(a.l,"Sending "+c.length+" sinks to MR for "+
b);a.f.onSinksReceived(b,c,d.map(hm))};h=ax.prototype;h.sendRouteMessage=function(a,b,c){var d=this.a.get(a);d?(a=d.sendRouteMessage(a,b,c),a=dx(this,pe(a),3E4)):a=Promise.reject(Error("Invalid route ID "+a));return a};h.sendRouteBinaryMessage=function(a,b){var c=this.a.get(a);c?(a=c.sendRouteBinaryMessage(a,b),a=dx(this,pe(a),3E4)):a=Promise.reject(Error("Invalid route ID "+a));return a};
h.startListeningForRouteMessages=function(a){var b=this.h;b.b.has(a)||(b.b.add(a),(a=b.a.get(a))&&0<a.length&&xp(b))};h.stopListeningForRouteMessages=function(a){this.h.stopListeningForRouteMessages(a)};h.detachRoute=function(a){var b=this.a.get(a);b?b.detachRoute(a):u(this.l,"Route "+a+" does not exist.")};h.enableMdnsDiscovery=function(){this.B=!0;this.A.forEach(function(a){a()});this.A.length=0};
var fx=function(a,b,c){return a.b.find(function(a){return a.vd(b,c)})||null},gx=function(a,b,c){return a.b.find(function(a){return a.Lc(b,c)})||null};ax.prototype.H=function(){var a=this;this.g.forEach(function(b){ix(a,b)})};var cx=function(a){a.f.setKeepAlive(0<a.J||0<a.v.length)};h=ax.prototype;h.startObservingMediaRoutes=function(a){this.j.has(a)||(this.j.add(a),this.b.forEach(function(b){b.startObservingMediaRoutes(a)}));this.G.f()};
h.stopObservingMediaRoutes=function(a){this.j.delete(a)?this.b.forEach(function(b){b.stopObservingMediaRoutes(a)}):u(this.l,"No existing route query "+a)};h.Tl=function(){var a=this;if(0!=this.j.size){var b=[];this.b.forEach(function(a){b=b.concat(a.mc())});this.j.forEach(function(c){var d=[];a.b.forEach(function(a){a.mc().forEach(function(b){!b.Pc&&a.Lc(c,void 0,b)&&d.push(b.id)})});a.f.onRoutesUpdated(b,c,d)})}};h.ea=function(){return"ProviderManager"};
h.ta=function(){return[new lx(this.b.map(function(a){return a.getName()}),Array.from(this.g),Array.from(this.j),Array.from(this.a,function(a){var b=ka(a);a=b.next().value;b=b.next().value;return[a,b.getName()]}),Array.from(this.u),this.B,this.w)]};h.wa=function(){var a=Lf(this);if(a){this.g=new Set(a.h);this.j=new Set(a.g);for(var b=ka(a.f),c=b.next();!c.done;c=b.next()){var d=ka(c.value),c=d.next().value,d=d.next().value,d=bx(this,d);this.a.set(c,d)}this.u=new Map(a.j);this.w=a.a||null;a.b&&this.enableMdnsDiscovery()}};
h.jf=function(a){return this.a.get(a)};h.rc=function(a,b){this.a.set(b.id,a);this.ac(a,b)};h.Zc=function(a,b){hx(this,b.id);this.a.delete(b.id);var c=this.h,d=b.id;c.b.delete(d);var e=c.a.get(d);e&&(c.a.delete(d),Ap(c,e),zp(c));this.ac(a,b)};h.ac=function(){0<this.j.size&&this.G.f()};h.sh=function(a){var b=this.a.get(a.id);b&&this.ac(b,a)};
h.Qb=function(a,b,c){this.a.has(b)?("string"===typeof c||c instanceof Uint8Array||(c=JSON.stringify(c)),this.h.send(b,c)):t(this.l,"Got route message for closed route "+b)};h.onPresentationConnectionStateChanged=function(a,b){"terminated"==b&&this.h.h();this.f.onPresentationConnectionStateChanged(a,b)};h.onPresentationConnectionClosed=function(a,b,c){this.h.h();this.f.onPresentationConnectionClosed(a,b,c)};h.vf=function(a){this.m.delete(a);var b=this.a.get(a);b&&b.terminateRoute(a)};
h.we=function(a,b,c){this.T.dispatchEvent(new Xw(b,c))};h.Gb=function(){this.X.f()};h.onSinkAvailabilityUpdated=function(a,b){var c=this;if(this.u.get(a.getName())!=b){var d=mx(this);this.u.set(a.getName(),b);a=mx(this);d!=a&&(this.f.onSinkAvailabilityUpdated(a),0==a&&(this.g.forEach(function(a){jx(c,a)}),this.g.clear()))}};var mx=function(a){return Array.from(a.u.values()).reduce(function(a,c){return Math.max(a,c)},0)};ax.prototype.lf=function(){return this.T};ax.prototype.oc=function(a){this.f.onIssue(a)};
var hx=function(a,b){return a.m.has(b)?tr(a,a.m.get(b)).then(function(c){a.m.delete(b);return df(c)}):Promise.resolve(!1)};h=ax.prototype;h.sf=function(a,b,c,d){var e=this,f=a.jc(b.sinkId);u(this.l,"Starting mirroring using service: "+f);this.m.set(b.id,f);return qe(tr(this,f),function(g){e.w=f;return me(gf(g,b,b.mediaSource,a.Sc(b.sinkId),c,d),function(a){if(a instanceof Ae&&3==a.reason)throw new Io(8);throw a;})})};
h.kh=function(a,b,c,d,e,f){var g=this,l=this.m.get(b.id);return l?qe(tr(this,l),function(r){g.w=l;var y=a.Sc(b.sinkId);u(r.F,"Update mirroring on route "+b.id);return r.g?pe(cf(c,e).then(r.J.bind(r,b,c,y,d,f))):oe(Error("Not initialized"))}):oe(Error("Route "+b.id+" is not mirroring"))};h.Kf=function(a){this.B?a():-1==this.A.indexOf(a)&&this.A.push(a)};h.qf=function(){return this.B};h.fd=function(a,b){var c=this.v.indexOf(a),d=0<=c;b&&!d?this.v.push(a):!b&&d&&this.v.splice(c,1);cx(this)};
var bx=function(a,b){return a.b.find(function(a){return a.getName()==b})||null};ax.prototype.searchSinks=function(a,b,c){var d=a.startsWith("pseudo:")?a.substring(7):null;return(d=d?bx(this,d):null)?d.searchSinks(b,c).then(function(a){return a.id}):Promise.reject(Error("No provider supports "+a))};ax.prototype.provideSinks=function(a,b){var c=bx(this,a);c?c.provideSinks(b):this.l.error("provideSinks: Provider not found for providerName "+a)};
ax.prototype.updateMediaSinks=function(a){this.g.has(a)||ix(this,a)};ax.prototype.createMediaRouteController=function(a,b,c){var d=this,e=this.a.get(a);return e?e.createMediaRouteController(a,b,c).catch(function(a){d.l.error("createMediaRouteController failed: "+a.message);b.close();c.ptr.reset();throw a;}):(a="createMediaRouteController: Provider not found for "+a,this.l.error(a),b.close(),c.ptr.reset(),Promise.reject(Error(a)))};
var lx=function(a,b,c,d,e,f,g){this.h=b;this.g=c;this.f=d;this.j=e;this.b=f;this.a=g};
